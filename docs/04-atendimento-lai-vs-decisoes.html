<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt-BR" xml:lang="pt-BR"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.1.189">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<title>Atendimento da LAI - Órgãos do governo Federal</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<script src="04-atendimento-lai-vs-decisoes_files/libs/clipboard/clipboard.min.js"></script>
<script src="04-atendimento-lai-vs-decisoes_files/libs/quarto-html/quarto.js"></script>
<script src="04-atendimento-lai-vs-decisoes_files/libs/quarto-html/popper.min.js"></script>
<script src="04-atendimento-lai-vs-decisoes_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="04-atendimento-lai-vs-decisoes_files/libs/quarto-html/anchor.min.js"></script>
<link href="04-atendimento-lai-vs-decisoes_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="04-atendimento-lai-vs-decisoes_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="04-atendimento-lai-vs-decisoes_files/libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="04-atendimento-lai-vs-decisoes_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="04-atendimento-lai-vs-decisoes_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="04-atendimento-lai-vs-decisoes_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="04-atendimento-lai-vs-decisoes_files/libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark"><style>html{ scroll-behavior: smooth; }</style>
<link rel="stylesheet" href="style.css">
</head>
<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active"><h2 id="toc-title">Índice</h2>
   
  <ul>
<li><a href="#introdu%C3%A7%C3%A3o" id="toc-introdução" class="nav-link active" data-scroll-target="#introdu%C3%A7%C3%A3o">Introdução</a></li>
  <li>
<a href="#metodologia" id="toc-metodologia" class="nav-link" data-scroll-target="#metodologia">Metodologia</a>
  <ul>
<li><a href="#dados" id="toc-dados" class="nav-link" data-scroll-target="#dados">Dados</a></li>
  <li><a href="#classifica%C3%A7%C3%A3o-de-pedidos-com-intelig%C3%AAncia-artificial" id="toc-classificação-de-pedidos-com-inteligência-artificial" class="nav-link" data-scroll-target="#classifica%C3%A7%C3%A3o-de-pedidos-com-intelig%C3%AAncia-artificial">Classificação de pedidos com Inteligência Artificial</a></li>
  <li><a href="#decis%C3%A3o-sobre-acesso-a-informa%C3%A7%C3%A3o-do-governo-federal" id="toc-decisão-sobre-acesso-a-informação-do-governo-federal" class="nav-link" data-scroll-target="#decis%C3%A3o-sobre-acesso-a-informa%C3%A7%C3%A3o-do-governo-federal">Decisão sobre acesso a informação do Governo Federal</a></li>
  </ul>
</li>
  <li><a href="#cruzamento-de-decis%C3%B5es-falabrcgu-com-classifica%C3%A7%C3%B5es-de-atendimento-bertnlp" id="toc-cruzamento-de-decisões-falabrcgu-com-classificações-de-atendimento-bertnlp" class="nav-link" data-scroll-target="#cruzamento-de-decis%C3%B5es-falabrcgu-com-classifica%C3%A7%C3%B5es-de-atendimento-bertnlp">Cruzamento de decisões (FalaBr/CGU) com classificações de atendimento (BERT/NLP)</a></li>
  <li>
<a href="#an%C3%A1lise-qualitativa" id="toc-análise-qualitativa" class="nav-link" data-scroll-target="#an%C3%A1lise-qualitativa">Análise qualitativa</a>
  <ul>
<li>
<a href="#resultados" id="toc-resultados" class="nav-link" data-scroll-target="#resultados">Resultados</a>
  <ul class="collapse">
<li><a href="#amostras-analisadas" id="toc-amostras-analisadas" class="nav-link" data-scroll-target="#amostras-analisadas">Amostras analisadas</a></li>
  <li><a href="#classifica%C3%A7%C3%B5es-nlpbert-erradas" id="toc-classificações-nlpbert-erradas" class="nav-link" data-scroll-target="#classifica%C3%A7%C3%B5es-nlpbert-erradas">Classificações (NLP/BERT) erradas</a></li>
  <li><a href="#amostras-de-%C3%B3rg%C3%A3os-selecionados" id="toc-amostras-de-órgãos-selecionados" class="nav-link" data-scroll-target="#amostras-de-%C3%B3rg%C3%A3os-selecionados">Amostras de órgãos selecionados</a></li>
  </ul>
</li>
  </ul>
</li>
  <li>
<a href="#n%C3%A3o-atendimento-da-lai-pelos-%C3%B3rg%C3%A3os" id="toc-não-atendimento-da-lai-pelos-órgãos" class="nav-link" data-scroll-target="#n%C3%A3o-atendimento-da-lai-pelos-%C3%B3rg%C3%A3os">Não atendimento da LAI pelos órgãos</a>
  <ul>
<li><a href="#taxa-de-classifica%C3%A7%C3%B5es-contradit%C3%B3rias" id="toc-taxa-de-classificações-contraditórias" class="nav-link" data-scroll-target="#taxa-de-classifica%C3%A7%C3%B5es-contradit%C3%B3rias">Taxa de classificações contraditórias</a></li>
  <li><a href="#%C3%B3rg%C3%A3os-com-mais-de-20-de-classifica%C3%A7%C3%B5es-contradit%C3%B3rias" id="toc-órgãos-com-mais-de-20-de-classificações-contraditórias" class="nav-link" data-scroll-target="#%C3%B3rg%C3%A3os-com-mais-de-20-de-classifica%C3%A7%C3%B5es-contradit%C3%B3rias">Órgãos com mais de 20% de classificações contraditórias</a></li>
  <li><a href="#%C3%B3rg%C3%A3os-agrupados-por-temas" id="toc-órgãos-agrupados-por-temas" class="nav-link" data-scroll-target="#%C3%B3rg%C3%A3os-agrupados-por-temas">Órgãos agrupados por temas</a></li>
  </ul>
</li>
  </ul></nav>
</div>
<main class="content" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Atendimento da LAI - Órgãos do governo Federal</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Código</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Mostrar o código</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Esconder o código</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">Ver o código fonte</a></li></ul></div></div>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header><div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(glue)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(here)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(scales)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(gt)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="fu">library</span>(googlesheets4)</span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="fu">source</span>(<span class="fu">here</span>(<span class="st">"src/00-plot-aesthetics.R"</span>), <span class="at">encoding =</span> <span class="st">"utf-8"</span>)</span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="st">`</span><span class="at">%notin%</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) <span class="sc">!</span>(x <span class="sc">%in%</span> y)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="introdução" class="level2"><h2 class="anchored" data-anchor-id="introdução">Introdução</h2>
<p>O objetivo desta análise é avaliar o cumprimento da <a href="http://www.planalto.gov.br/ccivil_03/_Ato2011-2014/2011/Lei/L12527.htm">Lei de Acesso a Informação (Lei n° 12.527)</a> por parte do Poder Executivo Federal. Para isso, os pedidos e respostas de acesso a informação feitos aos órgãos do Poder Executivo Federal foram processados por um algoritmo de inteligência artificial capaz de analisar seus conteúdos e classificar as solicitações como “Atendido”, “Não Atendido” ou “Parcialmente Atendido”. As classificações resultantes de cada pedido foram confrontadas com a decisão de acesso a informação expedida pelos órgãos aos quais as solicitações foram enviadas.</p>
</section><section id="metodologia" class="level2"><h2 class="anchored" data-anchor-id="metodologia">Metodologia</h2>
<section id="dados" class="level3"><h3 class="anchored" data-anchor-id="dados">Dados</h3>
<p>A análise foi feita a partir <a href="http://www.consultaesic.cgu.gov.br/busca/_layouts/15/DownloadPedidos/DownloadDados.aspx">da base de dados de pedidos e respostas realizados no Poder Executivo Federal</a>, disponível no FalaBr. O formato utilizado é o <code>CSV</code>. Os dados vão de Janeiro de 2021 até agosto de 2022.</p>
<blockquote class="blockquote">
<p>Código para extrair os dados do FalaBr (<a href="src/01-download-base-cgu-filtrada.R">link</a>)</p>
</blockquote>
<p>Foram selecionados para análise somente pedidos:</p>
<ul>
<li>
<strong>Sem recursos</strong>,</li>
<li>
<strong>Sem arquivos anexos</strong>,</li>
<li>
<strong>Com decisões “Acesso Concedido”, “Acesso Parcialmente Concedido”, “Acesso Negado”</strong>.</li>
</ul>
<p>Os <strong>pedidos sem recursos</strong> não são um problema para a classificação do algorítmo BERT/NLP mas foram descartados por uma questão de simplicidade e para garantir que os pedidos analisados seriam somente aqueles considerados concluídos levando em conta os prazos legais de tramitação da LAI.</p>
<p>Os <strong>pedidos com anexo</strong> foram descartados pois, em sua versão atual, o algoritmo desenvolvido pelo AeP não é capaz de avaliar respostas atreladas a conteúdos de arquivos externos ao pedido (PDFs, XLS, ODS, etc.) e, portanto, <strong>ele não serve para classificar pedidos que possuem anexos ou referências externas à resposta do pedido solicitado</strong>.</p>
<p>Mas, como saber se os pedidos possuem anexos? A base de dados do FalaBr não possui uma informação (uma coluna na tabela) que indique a presença ou a ausência de anexos no pedido de acesso a informação. Os anexos dos pedidos só estão acessíveis por meio da página de <a href="http://www.consultaesic.cgu.gov.br/busca/SitePages/Principal.aspx">“Buscas de pedidos e respostas”</a>, onde só é possível consultar os pedidos individualmente em uma página HTML específica.</p>
<p>A solução encontrada para saber se um pedido tinha ou unão um anexo foi varrer milhares de páginas de pedidos em busca das URLs que contém os anexos. Este processo foi documentado <a href="..src/10-coletando-url-anexos.R">neste link</a> e uma base de dados auxiliar foi criada com as URLs de anexos com um <em>id</em> único e número de protocolo para cada pedido.</p>
<blockquote class="blockquote">
<p>Por uma questão de tempo de processamento foram coletados os anexos referentes aos anos de 2021 e 2022.</p>
</blockquote>
<p>Por fim, foram filtrados somente os <strong>pedidos com decisões “Acesso Concedido”, “Acesso Parcialmente Concedido” e “Acesso Negado”</strong>, pois o modelo NLP/BERT não foi treinado para interpretar pedidos classificados como “Não se trata de solicitação de informação”, “Pergunta duplicada/repetida”, “Órgão não tem competência para responder sobre o assunto” ou “Informação inexistente”.</p>
<blockquote class="blockquote">
<p>Processamento da base de dados para análise (<a href="../src/09-pedidos-classificados.R">link</a>)</p>
</blockquote>
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a><span class="co"># label: base-pedidos</span></span>
<span id="cb2-2"><a href="#cb2-2"></a></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="co"># base de dados de pedidos</span></span>
<span id="cb2-4"><a href="#cb2-4"></a>pedidos <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">here</span>(<span class="st">"data/pedidos-classificados.rds"</span>))</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a><span class="co"># Decisões que deverão ser escolhidas para análise</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>decisoes_validas <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb3-3"><a href="#cb3-3"></a>  <span class="st">"Acesso Concedido"</span>,</span>
<span id="cb3-4"><a href="#cb3-4"></a>  <span class="st">"Acesso Parcialmente Concedido"</span>,</span>
<span id="cb3-5"><a href="#cb3-5"></a>  <span class="st">"Acesso Negado"</span></span>
<span id="cb3-6"><a href="#cb3-6"></a>)</span>
<span id="cb3-7"><a href="#cb3-7"></a></span>
<span id="cb3-8"><a href="#cb3-8"></a>pedidos_count_validos <span class="ot">&lt;-</span> pedidos <span class="sc">%&gt;%</span></span>
<span id="cb3-9"><a href="#cb3-9"></a>  <span class="fu">count</span>(motivo_pedido_nao_valido) <span class="sc">%&gt;%</span></span>
<span id="cb3-10"><a href="#cb3-10"></a>  <span class="fu">mutate</span>(</span>
<span id="cb3-11"><a href="#cb3-11"></a>    <span class="at">perc =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n),</span>
<span id="cb3-12"><a href="#cb3-12"></a>    <span class="at">pos =</span> <span class="fu">rev</span>(<span class="fu">cumsum</span>(perc) <span class="sc">-</span> <span class="fl">0.6</span> <span class="sc">*</span> perc),</span>
<span id="cb3-13"><a href="#cb3-13"></a>    <span class="at">motivo_pedido_nao_valido =</span> <span class="fu">reorder</span>(motivo_pedido_nao_valido, perc)</span>
<span id="cb3-14"><a href="#cb3-14"></a>  )</span>
<span id="cb3-15"><a href="#cb3-15"></a></span>
<span id="cb3-16"><a href="#cb3-16"></a>pedidos_count_validos <span class="sc">%&gt;%</span></span>
<span id="cb3-17"><a href="#cb3-17"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> motivo_pedido_nao_valido, <span class="at">y =</span> n, <span class="at">fill =</span> motivo_pedido_nao_valido)) <span class="sc">+</span></span>
<span id="cb3-18"><a href="#cb3-18"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]) <span class="sc">+</span></span>
<span id="cb3-19"><a href="#cb3-19"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb3-20"><a href="#cb3-20"></a>    <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">5</span>,</span>
<span id="cb3-21"><a href="#cb3-21"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb3-22"><a href="#cb3-22"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb3-23"><a href="#cb3-23"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb3-24"><a href="#cb3-24"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">str_glue</span>(<span class="st">"{number(n)}</span><span class="sc">\n</span><span class="st">({percent(perc, decimal.mark = ',', accuracy = .1)})"</span>))</span>
<span id="cb3-25"><a href="#cb3-25"></a>  ) <span class="sc">+</span></span>
<span id="cb3-26"><a href="#cb3-26"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb3-27"><a href="#cb3-27"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span> , <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">5.5e4</span>), <span class="at">labels =</span> number) <span class="sc">+</span></span>
<span id="cb3-28"><a href="#cb3-28"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb3-29"><a href="#cb3-29"></a>    <span class="st">"Pedido válido"</span> <span class="ot">=</span> cores_tb[[<span class="st">"azul"</span>]],</span>
<span id="cb3-30"><a href="#cb3-30"></a>    <span class="st">"Pedido com anexo</span><span class="sc">\n</span><span class="st">(Pedido descartado)"</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb3-31"><a href="#cb3-31"></a>    <span class="st">"Decisão (FalaBr/CGU) inválida</span><span class="sc">\n</span><span class="st">(Pedido descartado)"</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"rosa"</span>]], .<span class="dv">6</span>),</span>
<span id="cb3-32"><a href="#cb3-32"></a>    <span class="st">"Pedidos com recursos</span><span class="sc">\n</span><span class="st">(Pedido descartado)"</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"rosa"</span>]], .<span class="dv">3</span>)</span>
<span id="cb3-33"><a href="#cb3-33"></a>  )) <span class="sc">+</span></span>
<span id="cb3-34"><a href="#cb3-34"></a>  <span class="fu">labs</span>(</span>
<span id="cb3-35"><a href="#cb3-35"></a>    <span class="at">title =</span> <span class="fu">str_glue</span>(</span>
<span id="cb3-36"><a href="#cb3-36"></a>      <span class="st">"Foram processados {number(sum(pedidos_count_validos$n))} pedidos, "</span>,</span>
<span id="cb3-37"><a href="#cb3-37"></a>      <span class="st">"dos quais {number(pedidos_count_validos$n[3])}"</span>,</span>
<span id="cb3-38"><a href="#cb3-38"></a>      <span class="st">"</span><span class="sc">\n</span><span class="st">({percent(pedidos_count_validos$perc[3], decimal.mark = ',', accuracy = .1)})"</span>,</span>
<span id="cb3-39"><a href="#cb3-39"></a>      <span class="st">" são considerados válidos para análise"</span></span>
<span id="cb3-40"><a href="#cb3-40"></a>    ),</span>
<span id="cb3-41"><a href="#cb3-41"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb3-42"><a href="#cb3-42"></a>    <span class="at">x =</span> <span class="st">"Pedidos selecionados e descartados"</span></span>
<span id="cb3-43"><a href="#cb3-43"></a>  ) <span class="sc">+</span></span>
<span id="cb3-44"><a href="#cb3-44"></a>  <span class="fu">theme</span>(</span>
<span id="cb3-45"><a href="#cb3-45"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb3-46"><a href="#cb3-46"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb3-47"><a href="#cb3-47"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="672"></p>
</div>
</div>
<p>Recorte da base de dados:</p>
<ul>
<li><strong>Sem recursos</strong></li>
<li><strong>Sem arquivos anexos</strong></li>
<li><strong>Com decisões “Acesso Concedido”, “Acesso Parcialmente Concedido”, “Acesso Negado”</strong></li>
</ul>
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1"></a>pedidos <span class="ot">&lt;-</span> pedidos <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2"></a>  <span class="fu">filter</span>(motivo_pedido_nao_valido <span class="sc">==</span> <span class="st">"Pedido válido"</span>)</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<blockquote class="blockquote">
<p>Código que faz o tratamento da base de dados de pedidos utilizada neste relatório (<a href="src/02-pedidos-classificados.R">link</a>)</p>
</blockquote>
</section><section id="classificação-de-pedidos-com-inteligência-artificial" class="level3"><h3 class="anchored" data-anchor-id="classificação-de-pedidos-com-inteligência-artificial">Classificação de pedidos com Inteligência Artificial</h3>
<p>Os pedidos selecionados foram classificados como “Atendido”, “Não Atendido” e “Parcialmente Atendido” por meio do <a href="https://huggingface.co/neuralmind/bert-large-portuguese-cased">modelo BERT/NLP</a>.</p>
<ul>
<li>Uma breve explicação sobre como utilizamos o algoritmo de Machine Learning (BERT/NLP) para classificar os pedidos de acesso a informação. (<a href="https://achadosepedidos.org.br/na-midia/achados-e-pedidos-usa-inteligencia-artificial-para-classificar-atendimento-a-pedidos">link</a>)</li>
<li>Código que utiliza o modelo BERT para classificar pedidos como “Atendido”, “Não Atendido” e “Parcialmente Atendido” (<a href="https://colab.research.google.com/drive/1BpahuNidPR6RhIYjrk06vThO3Fz4xA-Z?usp=sharing">link</a>)</li>
<li>O repositório com o modelo BERT treinado para classificação de pedidos de acesso a informação (<a href="https://huggingface.co/tbrasil/classificador_de_atendimento_3_classes_v1.1?text=I+like+you.+I+love+you">link</a>)</li>
<li>Repositório deste relatório (<a href="https://github.com/Transparencia-Brasil/monitoramento-lai">link</a>)</li>
</ul>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" href="">Total</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false" href="">Percentual (%)</a></li>
</ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a>pedidos <span class="sc">%&gt;%</span></span>
<span id="cb5-2"><a href="#cb5-2"></a>  <span class="fu">count</span>(resultados) <span class="sc">%&gt;%</span></span>
<span id="cb5-3"><a href="#cb5-3"></a>  <span class="fu">mutate</span>(</span>
<span id="cb5-4"><a href="#cb5-4"></a>    <span class="at">resultados =</span> <span class="fu">reorder</span>(resultados, n),</span>
<span id="cb5-5"><a href="#cb5-5"></a>    <span class="at">perc =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)</span>
<span id="cb5-6"><a href="#cb5-6"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb5-7"><a href="#cb5-7"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> resultados, <span class="at">y =</span> n, <span class="at">fill =</span> resultados)) <span class="sc">+</span></span>
<span id="cb5-8"><a href="#cb5-8"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]) <span class="sc">+</span></span>
<span id="cb5-9"><a href="#cb5-9"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb5-10"><a href="#cb5-10"></a>    <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">3</span>,</span>
<span id="cb5-11"><a href="#cb5-11"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb5-12"><a href="#cb5-12"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb5-13"><a href="#cb5-13"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">str_glue</span>(<span class="st">"{number(n)}</span><span class="sc">\n</span><span class="st">({percent(perc, decimal = ',', accuracy = .1)})"</span>))</span>
<span id="cb5-14"><a href="#cb5-14"></a>  ) <span class="sc">+</span></span>
<span id="cb5-15"><a href="#cb5-15"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb5-16"><a href="#cb5-16"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">labels =</span> number, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">3.5e4</span>)) <span class="sc">+</span></span>
<span id="cb5-17"><a href="#cb5-17"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cores_classificacao) <span class="sc">+</span></span>
<span id="cb5-18"><a href="#cb5-18"></a>  <span class="fu">theme</span>(</span>
<span id="cb5-19"><a href="#cb5-19"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb5-20"><a href="#cb5-20"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb5-21"><a href="#cb5-21"></a>  ) <span class="sc">+</span></span>
<span id="cb5-22"><a href="#cb5-22"></a>  <span class="fu">labs</span>(</span>
<span id="cb5-23"><a href="#cb5-23"></a>    <span class="at">title =</span> <span class="st">"Quantidade de pedidos com classificações BERT/NLP"</span>,</span>
<span id="cb5-24"><a href="#cb5-24"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedido"</span>,</span>
<span id="cb5-25"><a href="#cb5-25"></a>    <span class="at">x =</span> <span class="st">"Classificações BERT/NLP"</span></span>
<span id="cb5-26"><a href="#cb5-26"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid"></p>
</div>
</div>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a>pedidos <span class="sc">%&gt;%</span></span>
<span id="cb6-2"><a href="#cb6-2"></a>  <span class="fu">filter</span>(motivo_pedido_nao_valido <span class="sc">==</span> <span class="st">"Pedido válido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb6-3"><a href="#cb6-3"></a>  <span class="fu">count</span>(resultados) <span class="sc">%&gt;%</span></span>
<span id="cb6-4"><a href="#cb6-4"></a>  <span class="fu">mutate</span>(</span>
<span id="cb6-5"><a href="#cb6-5"></a>    <span class="at">resultados =</span> <span class="fu">reorder</span>(resultados, n),</span>
<span id="cb6-6"><a href="#cb6-6"></a>    <span class="at">perc =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n),</span>
<span id="cb6-7"><a href="#cb6-7"></a>    <span class="at">pos =</span> <span class="fu">cumsum</span>(perc) <span class="sc">-</span> <span class="fl">0.5</span> <span class="sc">*</span> perc</span>
<span id="cb6-8"><a href="#cb6-8"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb6-9"><a href="#cb6-9"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> perc, <span class="at">fill =</span> resultados)) <span class="sc">+</span></span>
<span id="cb6-10"><a href="#cb6-10"></a>  <span class="fu">geom_bar</span>(</span>
<span id="cb6-11"><a href="#cb6-11"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb6-12"><a href="#cb6-12"></a>    <span class="at">width =</span> <span class="dv">1</span>,</span>
<span id="cb6-13"><a href="#cb6-13"></a>    <span class="at">stat =</span> <span class="st">"identity"</span></span>
<span id="cb6-14"><a href="#cb6-14"></a>  ) <span class="sc">+</span></span>
<span id="cb6-15"><a href="#cb6-15"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb6-16"><a href="#cb6-16"></a>    <span class="fu">aes</span>(<span class="at">y =</span> pos, <span class="at">label =</span> <span class="fu">str_glue</span>(<span class="st">"{number(n)}</span><span class="sc">\n</span><span class="st">{percent(perc, decimal = ',', accuracy = .1)}"</span>))</span>
<span id="cb6-17"><a href="#cb6-17"></a>  ) <span class="sc">+</span></span>
<span id="cb6-18"><a href="#cb6-18"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb6-19"><a href="#cb6-19"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cores_classificacao) <span class="sc">+</span></span>
<span id="cb6-20"><a href="#cb6-20"></a>  <span class="fu">theme</span>(</span>
<span id="cb6-21"><a href="#cb6-21"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb6-22"><a href="#cb6-22"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb6-23"><a href="#cb6-23"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb6-24"><a href="#cb6-24"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb6-25"><a href="#cb6-25"></a>  ) <span class="sc">+</span></span>
<span id="cb6-26"><a href="#cb6-26"></a>  <span class="fu">labs</span>(</span>
<span id="cb6-27"><a href="#cb6-27"></a>    <span class="at">title =</span> <span class="st">"Percentual de pedidos com classificações BERT/NLP"</span>,</span>
<span id="cb6-28"><a href="#cb6-28"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb6-29"><a href="#cb6-29"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb6-30"><a href="#cb6-30"></a>    <span class="at">fill =</span> <span class="st">"Classificação BERT/NLP"</span></span>
<span id="cb6-31"><a href="#cb6-31"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</div>
</section><section id="decisão-sobre-acesso-a-informação-do-governo-federal" class="level3"><h3 class="anchored" data-anchor-id="decisão-sobre-acesso-a-informação-do-governo-federal">Decisão sobre acesso a informação do Governo Federal</h3>
<p>Após recebimento e análise da solicitação de acesso a informação os órgãos do Poder Executivo Federal podem emitir 6 decisões diferentes. A tabela abaixo mostra as decisões possíveis e a classificação de atendimento (BERT/NLP) correspondente.</p>
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">tibble</span>(<span class="at">decisao =</span> <span class="fu">c</span>(</span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="st">"Acesso Concedido"</span>,</span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="st">"Acesso Parcialmente Concedido"</span>,</span>
<span id="cb7-4"><a href="#cb7-4"></a>  <span class="st">"Acesso Negado"</span>,</span>
<span id="cb7-5"><a href="#cb7-5"></a>  <span class="st">"Não se trata de solicitação de informação"</span>,</span>
<span id="cb7-6"><a href="#cb7-6"></a>  <span class="st">"Informação Inexistente"</span>,</span>
<span id="cb7-7"><a href="#cb7-7"></a>  <span class="st">"Órgão não tem competência para responder sobre o assunto"</span>,</span>
<span id="cb7-8"><a href="#cb7-8"></a>  <span class="st">"Pergunta Duplicada/Repetida"</span></span>
<span id="cb7-9"><a href="#cb7-9"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb7-10"><a href="#cb7-10"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-11"><a href="#cb7-11"></a>    <span class="at">classif =</span> <span class="fu">case_when</span>(</span>
<span id="cb7-12"><a href="#cb7-12"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span> <span class="sc">~</span> <span class="st">"Atendido"</span>,</span>
<span id="cb7-13"><a href="#cb7-13"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Parcialmente Concedido"</span> <span class="sc">~</span> <span class="st">"Parcialmente Atendido"</span>,</span>
<span id="cb7-14"><a href="#cb7-14"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Negado"</span> <span class="sc">~</span> <span class="st">"Não Atendido"</span>,</span>
<span id="cb7-15"><a href="#cb7-15"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Decisão Inválida"</span></span>
<span id="cb7-16"><a href="#cb7-16"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb7-17"><a href="#cb7-17"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-18"><a href="#cb7-18"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb7-19"><a href="#cb7-19"></a>    <span class="at">decisao =</span> <span class="fu">md</span>(<span class="st">"**Decisão (FalaBr/CGU)**"</span>),</span>
<span id="cb7-20"><a href="#cb7-20"></a>    <span class="at">classif =</span> <span class="fu">md</span>(<span class="st">"**Classificação correspondente (BERT/NLP)**"</span>)</span>
<span id="cb7-21"><a href="#cb7-21"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div id="tbl-atendimento-classificacao" class="anchored">

<div id="mwlefoodfi" style="overflow-x:auto;overflow-y:auto;width:auto;height:auto;">
<style>html {
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;
}

:where(#mwlefoodfi) .gt_table {
  display: table;
  border-collapse: collapse;
  margin-left: auto;
  margin-right: auto;
  color: #333333;
  font-size: 16px;
  font-weight: normal;
  font-style: normal;
  background-color: #FFFFFF;
  width: auto;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #A8A8A8;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #A8A8A8;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
}

:where(#mwlefoodfi) .gt_heading {
  background-color: #FFFFFF;
  text-align: center;
  border-bottom-color: #FFFFFF;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#mwlefoodfi) .gt_title {
  color: #333333;
  font-size: 125%;
  font-weight: initial;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-color: #FFFFFF;
  border-bottom-width: 0;
}

:where(#mwlefoodfi) .gt_subtitle {
  color: #333333;
  font-size: 85%;
  font-weight: initial;
  padding-top: 0;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-color: #FFFFFF;
  border-top-width: 0;
}

:where(#mwlefoodfi) .gt_bottom_border {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#mwlefoodfi) .gt_col_headings {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
}

:where(#mwlefoodfi) .gt_col_heading {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 6px;
  padding-left: 5px;
  padding-right: 5px;
  overflow-x: hidden;
}

:where(#mwlefoodfi) .gt_column_spanner_outer {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: normal;
  text-transform: inherit;
  padding-top: 0;
  padding-bottom: 0;
  padding-left: 4px;
  padding-right: 4px;
}

:where(#mwlefoodfi) .gt_column_spanner_outer:first-child {
  padding-left: 0;
}

:where(#mwlefoodfi) .gt_column_spanner_outer:last-child {
  padding-right: 0;
}

:where(#mwlefoodfi) .gt_column_spanner {
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: bottom;
  padding-top: 5px;
  padding-bottom: 5px;
  overflow-x: hidden;
  display: inline-block;
  width: 100%;
}

:where(#mwlefoodfi) .gt_group_heading {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
}

:where(#mwlefoodfi) .gt_empty_group_heading {
  padding: 0.5px;
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  vertical-align: middle;
}

:where(#mwlefoodfi) .gt_from_md > :first-child {
  margin-top: 0;
}

:where(#mwlefoodfi) .gt_from_md > :last-child {
  margin-bottom: 0;
}

:where(#mwlefoodfi) .gt_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  margin: 10px;
  border-top-style: solid;
  border-top-width: 1px;
  border-top-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 1px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 1px;
  border-right-color: #D3D3D3;
  vertical-align: middle;
  overflow-x: hidden;
}

:where(#mwlefoodfi) .gt_stub {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#mwlefoodfi) .gt_stub_row_group {
  color: #333333;
  background-color: #FFFFFF;
  font-size: 100%;
  font-weight: initial;
  text-transform: inherit;
  border-right-style: solid;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
  padding-left: 5px;
  padding-right: 5px;
  vertical-align: top;
}

:where(#mwlefoodfi) .gt_row_group_first td {
  border-top-width: 2px;
}

:where(#mwlefoodfi) .gt_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#mwlefoodfi) .gt_first_summary_row {
  border-top-style: solid;
  border-top-color: #D3D3D3;
}

:where(#mwlefoodfi) .gt_first_summary_row.thick {
  border-top-width: 2px;
}

:where(#mwlefoodfi) .gt_last_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#mwlefoodfi) .gt_grand_summary_row {
  color: #333333;
  background-color: #FFFFFF;
  text-transform: inherit;
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#mwlefoodfi) .gt_first_grand_summary_row {
  padding-top: 8px;
  padding-bottom: 8px;
  padding-left: 5px;
  padding-right: 5px;
  border-top-style: double;
  border-top-width: 6px;
  border-top-color: #D3D3D3;
}

:where(#mwlefoodfi) .gt_striped {
  background-color: rgba(128, 128, 128, 0.05);
}

:where(#mwlefoodfi) .gt_table_body {
  border-top-style: solid;
  border-top-width: 2px;
  border-top-color: #D3D3D3;
  border-bottom-style: solid;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
}

:where(#mwlefoodfi) .gt_footnotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#mwlefoodfi) .gt_footnote {
  margin: 0px;
  font-size: 90%;
  padding-left: 4px;
  padding-right: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#mwlefoodfi) .gt_sourcenotes {
  color: #333333;
  background-color: #FFFFFF;
  border-bottom-style: none;
  border-bottom-width: 2px;
  border-bottom-color: #D3D3D3;
  border-left-style: none;
  border-left-width: 2px;
  border-left-color: #D3D3D3;
  border-right-style: none;
  border-right-width: 2px;
  border-right-color: #D3D3D3;
}

:where(#mwlefoodfi) .gt_sourcenote {
  font-size: 90%;
  padding-top: 4px;
  padding-bottom: 4px;
  padding-left: 5px;
  padding-right: 5px;
}

:where(#mwlefoodfi) .gt_left {
  text-align: left;
}

:where(#mwlefoodfi) .gt_center {
  text-align: center;
}

:where(#mwlefoodfi) .gt_right {
  text-align: right;
  font-variant-numeric: tabular-nums;
}

:where(#mwlefoodfi) .gt_font_normal {
  font-weight: normal;
}

:where(#mwlefoodfi) .gt_font_bold {
  font-weight: bold;
}

:where(#mwlefoodfi) .gt_font_italic {
  font-style: italic;
}

:where(#mwlefoodfi) .gt_super {
  font-size: 65%;
}

:where(#mwlefoodfi) .gt_footnote_marks {
  font-style: italic;
  font-weight: normal;
  font-size: 75%;
  vertical-align: 0.4em;
}

:where(#mwlefoodfi) .gt_asterisk {
  font-size: 100%;
  vertical-align: 0;
}

:where(#mwlefoodfi) .gt_indent_1 {
  text-indent: 5px;
}

:where(#mwlefoodfi) .gt_indent_2 {
  text-indent: 10px;
}

:where(#mwlefoodfi) .gt_indent_3 {
  text-indent: 15px;
}

:where(#mwlefoodfi) .gt_indent_4 {
  text-indent: 20px;
}

:where(#mwlefoodfi) .gt_indent_5 {
  text-indent: 25px;
}
</style>
<table class="gt_table">
<caption>Tabela&nbsp;1:  tabela de correspond~encia entre classificações (NLP/BERT) e decisões (FalaBr/CGU) </caption>
  
  <thead class="gt_col_headings"><tr>
<th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col"><strong>Decisão (FalaBr/CGU)</strong></th>
      <th class="gt_col_heading gt_columns_bottom_border gt_left" rowspan="1" colspan="1" scope="col"><strong>Classificação correspondente (BERT/NLP)</strong></th>
    </tr></thead>
<tbody class="gt_table_body">
<tr>
<td class="gt_row gt_left">Acesso Concedido</td>
<td class="gt_row gt_left">Atendido</td>
</tr>
<tr>
<td class="gt_row gt_left">Acesso Parcialmente Concedido</td>
<td class="gt_row gt_left">Parcialmente Atendido</td>
</tr>
<tr>
<td class="gt_row gt_left">Acesso Negado</td>
<td class="gt_row gt_left">Não Atendido</td>
</tr>
<tr>
<td class="gt_row gt_left">Não se trata de solicitação de informação</td>
<td class="gt_row gt_left">Decisão Inválida</td>
</tr>
<tr>
<td class="gt_row gt_left">Informação Inexistente</td>
<td class="gt_row gt_left">Decisão Inválida</td>
</tr>
<tr>
<td class="gt_row gt_left">Órgão não tem competência para responder sobre o assunto</td>
<td class="gt_row gt_left">Decisão Inválida</td>
</tr>
<tr>
<td class="gt_row gt_left">Pergunta Duplicada/Repetida</td>
<td class="gt_row gt_left">Decisão Inválida</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<p>A distribuição das decisões para pedidos válidos mostram que a maior parte dos pedidos são classificados com Acesso Concedido:</p>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true" href="">Total</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false" href="">Percentual (%)</a></li>
</ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>pedidos <span class="sc">%&gt;%</span></span>
<span id="cb8-2"><a href="#cb8-2"></a>  <span class="fu">filter</span>(motivo_pedido_nao_valido <span class="sc">==</span> <span class="st">"Pedido válido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb8-3"><a href="#cb8-3"></a>  <span class="fu">count</span>(decisao) <span class="sc">%&gt;%</span></span>
<span id="cb8-4"><a href="#cb8-4"></a>  <span class="fu">mutate</span>(</span>
<span id="cb8-5"><a href="#cb8-5"></a>    <span class="at">perc =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n),</span>
<span id="cb8-6"><a href="#cb8-6"></a>    <span class="at">decisao =</span> <span class="fu">reorder</span>(decisao, n)</span>
<span id="cb8-7"><a href="#cb8-7"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb8-8"><a href="#cb8-8"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> decisao, <span class="at">y =</span> n, <span class="at">fill =</span> decisao)) <span class="sc">+</span></span>
<span id="cb8-9"><a href="#cb8-9"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb8-10"><a href="#cb8-10"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb8-11"><a href="#cb8-11"></a>    <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">3</span>,</span>
<span id="cb8-12"><a href="#cb8-12"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb8-13"><a href="#cb8-13"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb8-14"><a href="#cb8-14"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb8-15"><a href="#cb8-15"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">str_glue</span>(<span class="st">"{number(n)}</span><span class="sc">\n</span><span class="st">({percent(perc, accuracy = .1, decimal.mark = ',')})"</span>))</span>
<span id="cb8-16"><a href="#cb8-16"></a>  ) <span class="sc">+</span></span>
<span id="cb8-17"><a href="#cb8-17"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb8-18"><a href="#cb8-18"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span> ,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">4.5e4</span>), <span class="at">labels =</span> number) <span class="sc">+</span></span>
<span id="cb8-19"><a href="#cb8-19"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cores_decisao) <span class="sc">+</span></span>
<span id="cb8-20"><a href="#cb8-20"></a>  <span class="fu">theme</span>(</span>
<span id="cb8-21"><a href="#cb8-21"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb8-22"><a href="#cb8-22"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb8-23"><a href="#cb8-23"></a>  ) <span class="sc">+</span></span>
<span id="cb8-24"><a href="#cb8-24"></a>  <span class="fu">labs</span>(</span>
<span id="cb8-25"><a href="#cb8-25"></a>    <span class="at">title =</span> <span class="st">"Quantidade de pedidos por decisão (FalaBr/CGU)"</span>,</span>
<span id="cb8-26"><a href="#cb8-26"></a>    <span class="at">x =</span> <span class="st">"Decisão (FalaBr/CGU)"</span>,</span>
<span id="cb8-27"><a href="#cb8-27"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span></span>
<span id="cb8-28"><a href="#cb8-28"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid"></p>
</div>
</div>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>pedidos <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2"></a>  <span class="fu">filter</span>(motivo_pedido_nao_valido <span class="sc">==</span> <span class="st">"Pedido válido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3"></a>  <span class="fu">count</span>(decisao) <span class="sc">%&gt;%</span></span>
<span id="cb9-4"><a href="#cb9-4"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-5"><a href="#cb9-5"></a>    <span class="at">resultados =</span> <span class="fu">reorder</span>(decisao, n),</span>
<span id="cb9-6"><a href="#cb9-6"></a>    <span class="at">perc =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n),</span>
<span id="cb9-7"><a href="#cb9-7"></a>    <span class="at">pos =</span> <span class="fu">cumsum</span>(perc) <span class="sc">-</span> <span class="fl">0.5</span> <span class="sc">*</span> perc</span>
<span id="cb9-8"><a href="#cb9-8"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-9"><a href="#cb9-9"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> perc, <span class="at">fill =</span> resultados)) <span class="sc">+</span></span>
<span id="cb9-10"><a href="#cb9-10"></a>  <span class="fu">geom_bar</span>(</span>
<span id="cb9-11"><a href="#cb9-11"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb9-12"><a href="#cb9-12"></a>    <span class="at">width =</span> <span class="dv">1</span>,</span>
<span id="cb9-13"><a href="#cb9-13"></a>    <span class="at">stat =</span> <span class="st">"identity"</span></span>
<span id="cb9-14"><a href="#cb9-14"></a>  ) <span class="sc">+</span></span>
<span id="cb9-15"><a href="#cb9-15"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb9-16"><a href="#cb9-16"></a>    <span class="fu">aes</span>(<span class="at">y =</span> pos, <span class="at">label =</span> <span class="fu">str_glue</span>(<span class="st">"{number(n)}</span><span class="sc">\n</span><span class="st">{percent(perc, decimal = ',', accuracy = .1)}"</span>))</span>
<span id="cb9-17"><a href="#cb9-17"></a>  ) <span class="sc">+</span></span>
<span id="cb9-18"><a href="#cb9-18"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb9-19"><a href="#cb9-19"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cores_decisao[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">4</span>)], <span class="at">drop =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb9-20"><a href="#cb9-20"></a>  <span class="fu">theme</span>(</span>
<span id="cb9-21"><a href="#cb9-21"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb9-22"><a href="#cb9-22"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb9-23"><a href="#cb9-23"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb9-24"><a href="#cb9-24"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb9-25"><a href="#cb9-25"></a>  ) <span class="sc">+</span></span>
<span id="cb9-26"><a href="#cb9-26"></a>  <span class="fu">labs</span>(</span>
<span id="cb9-27"><a href="#cb9-27"></a>    <span class="at">title =</span> <span class="st">"Percentual de pedidos por decisão (FalaBr/CGU)"</span>,</span>
<span id="cb9-28"><a href="#cb9-28"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb9-29"><a href="#cb9-29"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb9-30"><a href="#cb9-30"></a>    <span class="at">fill =</span> <span class="st">"Decisão (FalaBr/CGU)"</span></span>
<span id="cb9-31"><a href="#cb9-31"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</div>
</div>
</div>
</section></section><section id="cruzamento-de-decisões-falabrcgu-com-classificações-de-atendimento-bertnlp" class="level2"><h2 class="anchored" data-anchor-id="cruzamento-de-decisões-falabrcgu-com-classificações-de-atendimento-bertnlp">Cruzamento de decisões (FalaBr/CGU) com classificações de atendimento (BERT/NLP)</h2>
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1"></a>pedidos_counts <span class="ot">&lt;-</span> pedidos <span class="sc">%&gt;%</span></span>
<span id="cb10-2"><a href="#cb10-2"></a>  <span class="fu">filter</span>(pedido_valido) <span class="sc">%&gt;%</span></span>
<span id="cb10-3"><a href="#cb10-3"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(decisao)) <span class="sc">%&gt;%</span></span>
<span id="cb10-4"><a href="#cb10-4"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"n_decisao_resultado"</span>, decisao, resultados) <span class="sc">%&gt;%</span></span>
<span id="cb10-5"><a href="#cb10-5"></a>  <span class="fu">add_count</span>(resultados, <span class="at">name =</span> <span class="st">"n_resultados"</span>, <span class="at">wt =</span> n_decisao_resultado) <span class="sc">%&gt;%</span></span>
<span id="cb10-6"><a href="#cb10-6"></a>  <span class="fu">add_count</span>(decisao, <span class="at">name =</span> <span class="st">"n_decisao"</span>, <span class="at">wt =</span> n_decisao_resultado) <span class="sc">%&gt;%</span></span>
<span id="cb10-7"><a href="#cb10-7"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-8"><a href="#cb10-8"></a>    <span class="at">resultados =</span> <span class="fu">ordered</span>(resultados, <span class="at">levels =</span> ord_classificacao),</span>
<span id="cb10-9"><a href="#cb10-9"></a>    <span class="at">perc =</span> n_decisao_resultado <span class="sc">/</span> n_decisao</span>
<span id="cb10-10"><a href="#cb10-10"></a>  )</span>
<span id="cb10-11"><a href="#cb10-11"></a></span>
<span id="cb10-12"><a href="#cb10-12"></a>pedidos_counts_comparativo <span class="ot">&lt;-</span> pedidos_counts <span class="sc">%&gt;%</span></span>
<span id="cb10-13"><a href="#cb10-13"></a>  <span class="fu">distinct</span>(<span class="at">atend =</span> decisao, <span class="at">n =</span> n_decisao) <span class="sc">%&gt;%</span></span>
<span id="cb10-14"><a href="#cb10-14"></a>  <span class="fu">filter</span>(atend <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb10-15"><a href="#cb10-15"></a>    <span class="st">"Acesso Concedido"</span>,</span>
<span id="cb10-16"><a href="#cb10-16"></a>    <span class="st">"Acesso Negado"</span>,</span>
<span id="cb10-17"><a href="#cb10-17"></a>    <span class="st">"Acesso Parcialmente Concedido"</span></span>
<span id="cb10-18"><a href="#cb10-18"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb10-19"><a href="#cb10-19"></a>  <span class="fu">mutate</span>(<span class="at">atend =</span> <span class="fu">str_glue</span>(<span class="st">"{atend} (FalaBr/CGU)"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb10-20"><a href="#cb10-20"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb10-21"><a href="#cb10-21"></a>    pedidos_counts <span class="sc">%&gt;%</span></span>
<span id="cb10-22"><a href="#cb10-22"></a>      <span class="fu">distinct</span>(<span class="at">atend =</span> resultados, <span class="at">n =</span> n_resultados) <span class="sc">%&gt;%</span></span>
<span id="cb10-23"><a href="#cb10-23"></a>      <span class="fu">mutate</span>(<span class="at">atend =</span> <span class="fu">str_glue</span>(<span class="st">"{atend} (BERT/NLP)"</span>))</span>
<span id="cb10-24"><a href="#cb10-24"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb10-25"><a href="#cb10-25"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-26"><a href="#cb10-26"></a>    <span class="at">atend =</span> <span class="fu">ordered</span>(atend, <span class="fu">c</span>(</span>
<span id="cb10-27"><a href="#cb10-27"></a>      <span class="st">"Atendido (BERT/NLP)"</span>,</span>
<span id="cb10-28"><a href="#cb10-28"></a>      <span class="st">"Acesso Concedido (FalaBr/CGU)"</span>,</span>
<span id="cb10-29"><a href="#cb10-29"></a>      <span class="st">"Não Atendido (BERT/NLP)"</span>,</span>
<span id="cb10-30"><a href="#cb10-30"></a>      <span class="st">"Acesso Negado (FalaBr/CGU)"</span>,</span>
<span id="cb10-31"><a href="#cb10-31"></a>      <span class="st">"Parcialmente Atendido (BERT/NLP)"</span>,</span>
<span id="cb10-32"><a href="#cb10-32"></a>      <span class="st">"Acesso Parcialmente Concedido (FalaBr/CGU)"</span></span>
<span id="cb10-33"><a href="#cb10-33"></a>  ))) <span class="sc">%&gt;%</span></span>
<span id="cb10-34"><a href="#cb10-34"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-35"><a href="#cb10-35"></a>    <span class="at">atend2 =</span> <span class="fu">case_when</span>(</span>
<span id="cb10-36"><a href="#cb10-36"></a>      atend <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Atendido (BERT/NLP)"</span>, <span class="st">"Acesso Concedido (FalaBr/CGU)"</span>) <span class="sc">~</span> <span class="st">"Atendido (BERT/NLP) e Acesso Concedido (FalaBr/CGU)"</span>,</span>
<span id="cb10-37"><a href="#cb10-37"></a>      atend <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Não Atendido (BERT/NLP)"</span>, <span class="st">"Acesso Negado (FalaBr/CGU)"</span>) <span class="sc">~</span> <span class="st">"Não Atendido (BERT/NLP) e Acesso Negado (FalaBr/CGU)"</span>,</span>
<span id="cb10-38"><a href="#cb10-38"></a>      atend <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Parcialmente Atendido (BERT/NLP)"</span>, <span class="st">"Acesso Parcialmente Concedido (FalaBr/CGU)"</span>) <span class="sc">~</span> <span class="st">"Parcialmente Atendido (BERT/NLP) e Acesso Parcialmente Concedido (FalaBr/CGU)"</span></span>
<span id="cb10-39"><a href="#cb10-39"></a>    )</span>
<span id="cb10-40"><a href="#cb10-40"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb10-41"><a href="#cb10-41"></a>  <span class="fu">mutate</span>(</span>
<span id="cb10-42"><a href="#cb10-42"></a>    <span class="at">origem =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(atend, <span class="st">"FalaBr"</span>), <span class="st">"FalaBr"</span>, <span class="st">"BERT/NLP"</span>)</span>
<span id="cb10-43"><a href="#cb10-43"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb10-44"><a href="#cb10-44"></a>  <span class="fu">group_by</span>(origem) <span class="sc">%&gt;%</span></span>
<span id="cb10-45"><a href="#cb10-45"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb10-46"><a href="#cb10-46"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>No comparativo entre as decisões (FalaBr/CGU) e as classificações por algorítmo (BERT/NLP), observa-se que enquanto o governo Federal alegou conceder acesso para 83% a classificação feita por algorítmo foi menor, de 61%.</p>
<p>O algoritmo BERT/NLP considerou como “Não Atendida” 27% dos pedidos, contra 11% de decisões de “Acesso Negado” registradas no FalaBr/CGU.</p>
<p>A comparação entre pedidos onde a informação foi parcialmente concedida/atendida, o algorítmo BERT/NLP classificou como “Parcialmente Atendido” 11% dos pedidos. Já o governo Federal expediu decisões de “Acesso Parcialmente Concedido” para 7% de pedidos.</p>
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a>pedidos_counts_comparativo <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> n, <span class="at">x =</span> atend, <span class="at">fill =</span> atend)) <span class="sc">+</span></span>
<span id="cb11-3"><a href="#cb11-3"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb11-4"><a href="#cb11-4"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]) <span class="sc">+</span></span>
<span id="cb11-5"><a href="#cb11-5"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb11-6"><a href="#cb11-6"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb11-7"><a href="#cb11-7"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb11-8"><a href="#cb11-8"></a>    <span class="at">nudge_y =</span> <span class="dv">800</span>,</span>
<span id="cb11-9"><a href="#cb11-9"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb11-10"><a href="#cb11-10"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb11-11"><a href="#cb11-11"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">str_glue</span>(<span class="st">"{number(n)}</span><span class="sc">\n</span><span class="st">({percent(perc, decimal.mark = ',')})"</span>))</span>
<span id="cb11-12"><a href="#cb11-12"></a>  ) <span class="sc">+</span></span>
<span id="cb11-13"><a href="#cb11-13"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> atend2, <span class="at">scales =</span> <span class="st">"free_y"</span>, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb11-14"><a href="#cb11-14"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">4.6e4</span>), <span class="at">labels =</span> number) <span class="sc">+</span></span>
<span id="cb11-15"><a href="#cb11-15"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb11-16"><a href="#cb11-16"></a>    <span class="st">"Atendido (BERT/NLP)"</span> <span class="ot">=</span> cores_tb[[<span class="st">"azul"</span>]],</span>
<span id="cb11-17"><a href="#cb11-17"></a>    <span class="st">"Acesso Concedido (FalaBr/CGU)"</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_tb[[<span class="st">"azul"</span>]], .<span class="dv">6</span>),</span>
<span id="cb11-18"><a href="#cb11-18"></a>    <span class="st">"Não Atendido (BERT/NLP)"</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb11-19"><a href="#cb11-19"></a>    <span class="st">"Acesso Negado (FalaBr/CGU)"</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"rosa"</span>]], .<span class="dv">6</span>),</span>
<span id="cb11-20"><a href="#cb11-20"></a>    <span class="st">"Parcialmente Atendido (BERT/NLP)"</span> <span class="ot">=</span> cores_aep[[<span class="st">"laranja"</span>]],</span>
<span id="cb11-21"><a href="#cb11-21"></a>    <span class="st">"Acesso Parcialmente Concedido (FalaBr/CGU)"</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"laranja"</span>]], .<span class="dv">6</span>)</span>
<span id="cb11-22"><a href="#cb11-22"></a>  )) <span class="sc">+</span></span>
<span id="cb11-23"><a href="#cb11-23"></a>  <span class="fu">theme</span>(</span>
<span id="cb11-24"><a href="#cb11-24"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb11-25"><a href="#cb11-25"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb11-26"><a href="#cb11-26"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb11-27"><a href="#cb11-27"></a>  ) <span class="sc">+</span></span>
<span id="cb11-28"><a href="#cb11-28"></a>  <span class="fu">labs</span>(</span>
<span id="cb11-29"><a href="#cb11-29"></a>    <span class="at">title =</span> <span class="st">"Comparativo entre decisões e classificações correspondentes"</span>,</span>
<span id="cb11-30"><a href="#cb11-30"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb11-31"><a href="#cb11-31"></a>    <span class="at">x =</span> <span class="cn">NULL</span></span>
<span id="cb11-32"><a href="#cb11-32"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>Ao confrontar as decisões, observamos que o algoritmo (BERT/NLP) classificou como “Não Atendido” 8 045 pedidos em que os órgãos alegaram “Acesso Concedido”. Isso significa que o Poder Executivo Federal não atendeu 20% do total de pedidos que classificou como “Acesso Concedido”.</p>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true" href="">Classificação BERT/NLP X Decisão (Abs.)</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false" href="">Classificação contraditória</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-3" role="tab" aria-controls="tabset-3-3" aria-selected="false" href="">Classificação BERT/NLP X Decisão (%)</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-4" role="tab" aria-controls="tabset-3-4" aria-selected="false" href="">Classificação BERT/NLP X Decisão (% acum.)</a></li>
</ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1"></a>pedidos_counts <span class="sc">%&gt;%</span></span>
<span id="cb12-2"><a href="#cb12-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb12-3"><a href="#cb12-3"></a>    <span class="at">perc =</span> n_decisao_resultado <span class="sc">/</span> n_decisao,</span>
<span id="cb12-4"><a href="#cb12-4"></a>    <span class="at">destaque =</span> <span class="fu">case_when</span>(</span>
<span id="cb12-5"><a href="#cb12-5"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb12-6"><a href="#cb12-6"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Parcialmente Concedido"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Parcialmente Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb12-7"><a href="#cb12-7"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Negado"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb12-8"><a href="#cb12-8"></a>      decisao <span class="sc">==</span> <span class="st">"Informação Inexistente"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb12-9"><a href="#cb12-9"></a>      decisao <span class="sc">==</span> <span class="st">"Não se trata de solicitação de informação"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb12-10"><a href="#cb12-10"></a>      decisao <span class="sc">==</span> <span class="st">"Órgão não tem competência para responder sobre o assunto"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb12-11"><a href="#cb12-11"></a>      decisao <span class="sc">==</span> <span class="st">"Pergunta Duplicada/Repetida"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb12-12"><a href="#cb12-12"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Resultado contraditório"</span></span>
<span id="cb12-13"><a href="#cb12-13"></a>    ),</span>
<span id="cb12-14"><a href="#cb12-14"></a>    <span class="at">destaque_texto =</span> <span class="fu">if_else</span>(</span>
<span id="cb12-15"><a href="#cb12-15"></a>      destaque <span class="sc">==</span> <span class="st">"Resultado esperado"</span>, <span class="fu">as.character</span>(resultados), destaque</span>
<span id="cb12-16"><a href="#cb12-16"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb12-17"><a href="#cb12-17"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> resultados, <span class="at">y =</span> n_decisao_resultado, <span class="at">fill =</span> resultados)) <span class="sc">+</span></span>
<span id="cb12-18"><a href="#cb12-18"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb12-19"><a href="#cb12-19"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb12-20"><a href="#cb12-20"></a>    <span class="fu">aes</span>(<span class="at">alpha =</span> destaque)</span>
<span id="cb12-21"><a href="#cb12-21"></a>  ) <span class="sc">+</span></span>
<span id="cb12-22"><a href="#cb12-22"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb12-23"><a href="#cb12-23"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(destaque <span class="sc">==</span> <span class="st">"Resultado esperado"</span>),</span>
<span id="cb12-24"><a href="#cb12-24"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb12-25"><a href="#cb12-25"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb12-26"><a href="#cb12-26"></a>  ) <span class="sc">+</span></span>
<span id="cb12-27"><a href="#cb12-27"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb12-28"><a href="#cb12-28"></a>    <span class="fu">aes</span>(</span>
<span id="cb12-29"><a href="#cb12-29"></a>      <span class="at">label =</span> <span class="fu">str_glue</span>(<span class="st">"{number(n_decisao_resultado)}</span><span class="sc">\n</span><span class="st">({percent(perc, decimal.mark = ',', accuracy = 0.1)})"</span>),</span>
<span id="cb12-30"><a href="#cb12-30"></a>      <span class="at">color =</span> destaque_texto</span>
<span id="cb12-31"><a href="#cb12-31"></a>    ),</span>
<span id="cb12-32"><a href="#cb12-32"></a>    <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.2</span>,</span>
<span id="cb12-33"><a href="#cb12-33"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb12-34"><a href="#cb12-34"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb12-35"><a href="#cb12-35"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb12-36"><a href="#cb12-36"></a>  ) <span class="sc">+</span></span>
<span id="cb12-37"><a href="#cb12-37"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb12-38"><a href="#cb12-38"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>),</span>
<span id="cb12-39"><a href="#cb12-39"></a>    <span class="at">check_overlap =</span> <span class="cn">TRUE</span>,</span>
<span id="cb12-40"><a href="#cb12-40"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb12-41"><a href="#cb12-41"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb12-42"><a href="#cb12-42"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb12-43"><a href="#cb12-43"></a>    <span class="fu">aes</span>(</span>
<span id="cb12-44"><a href="#cb12-44"></a>      <span class="at">y =</span> <span class="fl">1.5e4</span>,</span>
<span id="cb12-45"><a href="#cb12-45"></a>      <span class="at">x =</span> <span class="st">"Não Atendido"</span>,</span>
<span id="cb12-46"><a href="#cb12-46"></a>      <span class="at">label =</span> <span class="st">"As barras em destaques representam</span><span class="sc">\n</span><span class="st">os resultados esperados para cada decisão"</span></span>
<span id="cb12-47"><a href="#cb12-47"></a>    )</span>
<span id="cb12-48"><a href="#cb12-48"></a>  ) <span class="sc">+</span></span>
<span id="cb12-49"><a href="#cb12-49"></a>  <span class="fu">geom_curve</span>(</span>
<span id="cb12-50"><a href="#cb12-50"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>),</span>
<span id="cb12-51"><a href="#cb12-51"></a>    <span class="fu">aes</span>(<span class="at">y =</span> <span class="fl">1.48e4</span>, <span class="at">yend =</span> <span class="fl">1.35e4</span>, <span class="at">x =</span> <span class="st">"Não Atendido"</span>, <span class="at">xend =</span> <span class="st">"Atendido"</span>),</span>
<span id="cb12-52"><a href="#cb12-52"></a>    <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">"mm"</span>)),</span>
<span id="cb12-53"><a href="#cb12-53"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb12-54"><a href="#cb12-54"></a>    <span class="at">curvature =</span> <span class="fl">0.5</span></span>
<span id="cb12-55"><a href="#cb12-55"></a>  ) <span class="sc">+</span></span>
<span id="cb12-56"><a href="#cb12-56"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb12-57"><a href="#cb12-57"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cores_classificacao) <span class="sc">+</span></span>
<span id="cb12-58"><a href="#cb12-58"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb12-59"><a href="#cb12-59"></a>    <span class="at">labels =</span> scales<span class="sc">::</span>number,</span>
<span id="cb12-60"><a href="#cb12-60"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb12-61"><a href="#cb12-61"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">25e3</span>, <span class="fl">5e3</span>),</span>
<span id="cb12-62"><a href="#cb12-62"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">3e4</span>)</span>
<span id="cb12-63"><a href="#cb12-63"></a>  ) <span class="sc">+</span></span>
<span id="cb12-64"><a href="#cb12-64"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb12-65"><a href="#cb12-65"></a>    <span class="st">"Atendido"</span> <span class="ot">=</span> cores_tb[[<span class="st">"azul"</span>]],</span>
<span id="cb12-66"><a href="#cb12-66"></a>    <span class="st">"Parcialmente Atendido"</span> <span class="ot">=</span> cores_aep[[<span class="st">"laranja"</span>]],</span>
<span id="cb12-67"><a href="#cb12-67"></a>    <span class="st">"Não Atendido"</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb12-68"><a href="#cb12-68"></a>    <span class="st">"Resultado contraditório"</span> <span class="ot">=</span> cores_aep[[<span class="st">"cinza"</span>]]</span>
<span id="cb12-69"><a href="#cb12-69"></a>  )) <span class="sc">+</span></span>
<span id="cb12-70"><a href="#cb12-70"></a>  <span class="fu">scale_alpha_discrete</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb12-71"><a href="#cb12-71"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> <span class="fu">str_glue</span>(<span class="st">"Decisão do órgão: {decisao}"</span>), <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb12-72"><a href="#cb12-72"></a>  <span class="fu">labs</span>(</span>
<span id="cb12-73"><a href="#cb12-73"></a>    <span class="at">title =</span> <span class="st">"Classificação de atendimento (NLP-BERT) X Decisão do órgão"</span>,</span>
<span id="cb12-74"><a href="#cb12-74"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb12-75"><a href="#cb12-75"></a>    <span class="at">x =</span> <span class="st">"Classificação NLP-BERT"</span></span>
<span id="cb12-76"><a href="#cb12-76"></a>  ) <span class="sc">+</span></span>
<span id="cb12-77"><a href="#cb12-77"></a>  <span class="fu">theme</span>(</span>
<span id="cb12-78"><a href="#cb12-78"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb12-79"><a href="#cb12-79"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>),</span>
<span id="cb12-80"><a href="#cb12-80"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb12-81"><a href="#cb12-81"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/plot-classificacao-bert-nlp-decisao-abs-reduzido-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<blockquote class="blockquote">
<p>Uma classificação contraditória é quando o algoritmo classifica um pedido com “Acesso Concedido” (FalaBr) como “Não Atendido” (BERT).</p>
</blockquote>
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a>pedidos_counts <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> resultados, <span class="at">y =</span> n_decisao_resultado, <span class="at">fill =</span> resultados)) <span class="sc">+</span></span>
<span id="cb13-4"><a href="#cb13-4"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> F, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]) <span class="sc">+</span></span>
<span id="cb13-5"><a href="#cb13-5"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb13-6"><a href="#cb13-6"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">str_glue</span>(</span>
<span id="cb13-7"><a href="#cb13-7"></a>      <span class="st">"{number(n_decisao_resultado)}</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb13-8"><a href="#cb13-8"></a>      <span class="st">"({percent(perc, accuracy = 0.1, decimal.mark = ',')})"</span></span>
<span id="cb13-9"><a href="#cb13-9"></a>    )),</span>
<span id="cb13-10"><a href="#cb13-10"></a>    <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">3</span>,</span>
<span id="cb13-11"><a href="#cb13-11"></a>    <span class="at">size =</span> <span class="fl">2.8</span>,</span>
<span id="cb13-12"><a href="#cb13-12"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,<span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]</span>
<span id="cb13-13"><a href="#cb13-13"></a>  ) <span class="sc">+</span></span>
<span id="cb13-14"><a href="#cb13-14"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb13-15"><a href="#cb13-15"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cores_classificacao) <span class="sc">+</span></span>
<span id="cb13-16"><a href="#cb13-16"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb13-17"><a href="#cb13-17"></a>    <span class="at">labels =</span> scales<span class="sc">::</span>number,</span>
<span id="cb13-18"><a href="#cb13-18"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb13-19"><a href="#cb13-19"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">25e3</span>, <span class="fl">5e3</span>),</span>
<span id="cb13-20"><a href="#cb13-20"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">3.1e4</span>)</span>
<span id="cb13-21"><a href="#cb13-21"></a>  ) <span class="sc">+</span></span>
<span id="cb13-22"><a href="#cb13-22"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb13-23"><a href="#cb13-23"></a>    <span class="at">check_overlap =</span> <span class="cn">TRUE</span>,</span>
<span id="cb13-24"><a href="#cb13-24"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb13-25"><a href="#cb13-25"></a>    <span class="at">size =</span> <span class="fl">2.5</span>,</span>
<span id="cb13-26"><a href="#cb13-26"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb13-27"><a href="#cb13-27"></a>    <span class="fu">aes</span>(</span>
<span id="cb13-28"><a href="#cb13-28"></a>      <span class="at">y =</span> <span class="fl">1.5e4</span>,</span>
<span id="cb13-29"><a href="#cb13-29"></a>      <span class="at">x =</span> <span class="st">"Não Atendido"</span>,</span>
<span id="cb13-30"><a href="#cb13-30"></a>      <span class="at">label =</span> <span class="st">"A decisão do órgão</span><span class="sc">\n</span><span class="st">contradiz</span><span class="sc">\n</span><span class="st">a classificação</span><span class="sc">\n</span><span class="st">do modelo BERT"</span></span>
<span id="cb13-31"><a href="#cb13-31"></a>    )</span>
<span id="cb13-32"><a href="#cb13-32"></a>  ) <span class="sc">+</span></span>
<span id="cb13-33"><a href="#cb13-33"></a>  <span class="fu">geom_curve</span>(</span>
<span id="cb13-34"><a href="#cb13-34"></a>    <span class="fu">aes</span>(<span class="at">y =</span> <span class="fl">1.49e4</span>, <span class="at">yend =</span> <span class="fl">1.1e4</span>, <span class="at">x =</span> <span class="st">"Não Atendido"</span>, <span class="at">xend =</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb13-35"><a href="#cb13-35"></a>    <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="dv">3</span>, <span class="st">"mm"</span>)),</span>
<span id="cb13-36"><a href="#cb13-36"></a>    <span class="at">curvature =</span> .<span class="dv">1</span>,</span>
<span id="cb13-37"><a href="#cb13-37"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]</span>
<span id="cb13-38"><a href="#cb13-38"></a>  ) <span class="sc">+</span></span>
<span id="cb13-39"><a href="#cb13-39"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> <span class="fu">str_glue</span>(<span class="st">"Decisão do órgão (FalaBr/CGU): {decisao}"</span>), <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb13-40"><a href="#cb13-40"></a>  <span class="fu">labs</span>(</span>
<span id="cb13-41"><a href="#cb13-41"></a>    <span class="at">title =</span> <span class="st">"Classificação (BERT/NLP) vs. Decisão do órgão (FalaBr/CGU)"</span>,</span>
<span id="cb13-42"><a href="#cb13-42"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb13-43"><a href="#cb13-43"></a>    <span class="at">x =</span> <span class="st">"Classificação (BERT/NLP)"</span></span>
<span id="cb13-44"><a href="#cb13-44"></a>  ) <span class="sc">+</span></span>
<span id="cb13-45"><a href="#cb13-45"></a>  <span class="fu">theme</span>(</span>
<span id="cb13-46"><a href="#cb13-46"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb13-47"><a href="#cb13-47"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> .<span class="dv">5</span>),</span>
<span id="cb13-48"><a href="#cb13-48"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> .<span class="dv">5</span>),</span>
<span id="cb13-49"><a href="#cb13-49"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb13-50"><a href="#cb13-50"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>)</span>
<span id="cb13-51"><a href="#cb13-51"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid"></p>
</div>
</div>
</div>
<div id="tabset-3-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-3-tab">
<p>Uma classificação contraditória é quando o algoritmo classifica um pedido com “Acesso Concedido” (FalaBr/CGU) como “Não Atendido” (BERT/NLP).</p>
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>cores_classificacao2 <span class="ot">&lt;-</span> cores_classificacao</span>
<span id="cb14-2"><a href="#cb14-2"></a><span class="fu">names</span>(cores_classificacao2) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"Classificação BERT/NLP:"</span>, <span class="fu">names</span>(cores_classificacao))</span>
<span id="cb14-3"><a href="#cb14-3"></a></span>
<span id="cb14-4"><a href="#cb14-4"></a>pedidos_counts <span class="sc">%&gt;%</span></span>
<span id="cb14-5"><a href="#cb14-5"></a>  <span class="fu">mutate</span>(</span>
<span id="cb14-6"><a href="#cb14-6"></a>    <span class="at">resultados =</span> <span class="fu">str_glue</span>(<span class="st">"Classificação BERT/NLP: {resultados}"</span>)</span>
<span id="cb14-7"><a href="#cb14-7"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb14-8"><a href="#cb14-8"></a>  <span class="fu">mutate</span>(<span class="at">decisao =</span> tidytext<span class="sc">::</span><span class="fu">reorder_within</span>(</span>
<span id="cb14-9"><a href="#cb14-9"></a>    <span class="at">x =</span> decisao,</span>
<span id="cb14-10"><a href="#cb14-10"></a>    <span class="at">by =</span> perc,</span>
<span id="cb14-11"><a href="#cb14-11"></a>    <span class="at">within =</span> resultados,</span>
<span id="cb14-12"><a href="#cb14-12"></a>    <span class="at">fun =</span> sum</span>
<span id="cb14-13"><a href="#cb14-13"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb14-14"><a href="#cb14-14"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> decisao, <span class="at">y =</span> perc, <span class="at">fill =</span> resultados)) <span class="sc">+</span></span>
<span id="cb14-15"><a href="#cb14-15"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb14-16"><a href="#cb14-16"></a>    <span class="at">position =</span> <span class="st">"dodge"</span>,</span>
<span id="cb14-17"><a href="#cb14-17"></a>    <span class="at">show.legend =</span> F,</span>
<span id="cb14-18"><a href="#cb14-18"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb14-19"><a href="#cb14-19"></a>    <span class="at">alpha =</span> .<span class="dv">6</span></span>
<span id="cb14-20"><a href="#cb14-20"></a>  ) <span class="sc">+</span></span>
<span id="cb14-21"><a href="#cb14-21"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb14-22"><a href="#cb14-22"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido___Classificação BERT/NLP: Não Atendido"</span>),</span>
<span id="cb14-23"><a href="#cb14-23"></a>    <span class="at">position =</span> <span class="st">"dodge"</span>,</span>
<span id="cb14-24"><a href="#cb14-24"></a>    <span class="at">show.legend =</span> F,</span>
<span id="cb14-25"><a href="#cb14-25"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]</span>
<span id="cb14-26"><a href="#cb14-26"></a>  ) <span class="sc">+</span></span>
<span id="cb14-27"><a href="#cb14-27"></a>  tidytext<span class="sc">::</span><span class="fu">scale_x_reordered</span>() <span class="sc">+</span></span>
<span id="cb14-28"><a href="#cb14-28"></a>  hrbrthemes<span class="sc">::</span><span class="fu">scale_y_percent</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb14-29"><a href="#cb14-29"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cores_classificacao2) <span class="sc">+</span></span>
<span id="cb14-30"><a href="#cb14-30"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb14-31"><a href="#cb14-31"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb14-32"><a href="#cb14-32"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb14-33"><a href="#cb14-33"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb14-34"><a href="#cb14-34"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb14-35"><a href="#cb14-35"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">percent</span>(perc, <span class="at">accuracy =</span> <span class="fl">0.1</span>, <span class="at">big.mark =</span> <span class="st">"."</span>, <span class="at">decimal.mark =</span> <span class="st">","</span>)),</span>
<span id="cb14-36"><a href="#cb14-36"></a>    <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">15</span></span>
<span id="cb14-37"><a href="#cb14-37"></a>  ) <span class="sc">+</span></span>
<span id="cb14-38"><a href="#cb14-38"></a>  <span class="fu">facet_wrap</span>(resultados <span class="sc">~</span> ., <span class="at">scales =</span> <span class="st">"free_y"</span>, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb14-39"><a href="#cb14-39"></a>  <span class="fu">theme</span>(</span>
<span id="cb14-40"><a href="#cb14-40"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb14-41"><a href="#cb14-41"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>),</span>
<span id="cb14-42"><a href="#cb14-42"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb14-43"><a href="#cb14-43"></a>  ) <span class="sc">+</span></span>
<span id="cb14-44"><a href="#cb14-44"></a>  <span class="fu">labs</span>(</span>
<span id="cb14-45"><a href="#cb14-45"></a>    <span class="at">title =</span> <span class="st">"Classificação de atendimento (NLP-BERT) X</span><span class="sc">\n</span><span class="st">Decisão do órgão"</span>,</span>
<span id="cb14-46"><a href="#cb14-46"></a>    <span class="at">y =</span> <span class="st">"% de pedidos"</span>,</span>
<span id="cb14-47"><a href="#cb14-47"></a>    <span class="at">x =</span> <span class="st">"Decisão do órgão no (FlaBr)"</span></span>
<span id="cb14-48"><a href="#cb14-48"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/plot-classificacao-contraditoria-reduzido-1.png" class="img-fluid" width="960"></p>
</div>
</div>
</div>
<div id="tabset-3-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-4-tab">
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>pedidos_counts <span class="sc">%&gt;%</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>  <span class="fu">mutate</span>(</span>
<span id="cb15-3"><a href="#cb15-3"></a>    <span class="at">destaque =</span> <span class="fu">case_when</span>(</span>
<span id="cb15-4"><a href="#cb15-4"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb15-5"><a href="#cb15-5"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Parcialmente Concedido"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Parcialmente Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb15-6"><a href="#cb15-6"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Negado"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb15-7"><a href="#cb15-7"></a>      decisao <span class="sc">==</span> <span class="st">"Informação Inexistente"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb15-8"><a href="#cb15-8"></a>      decisao <span class="sc">==</span> <span class="st">"Não se trata de solicitação de informação"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb15-9"><a href="#cb15-9"></a>      decisao <span class="sc">==</span> <span class="st">"Órgão não tem competência para responder sobre o assunto"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb15-10"><a href="#cb15-10"></a>      decisao <span class="sc">==</span> <span class="st">"Pergunta Duplicada/Repetida"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb15-11"><a href="#cb15-11"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Resultado contraditório"</span></span>
<span id="cb15-12"><a href="#cb15-12"></a>    ),</span>
<span id="cb15-13"><a href="#cb15-13"></a>    <span class="at">destaque_texto =</span> <span class="fu">if_else</span>(</span>
<span id="cb15-14"><a href="#cb15-14"></a>      destaque <span class="sc">==</span> <span class="st">"Resultado esperado"</span>, <span class="fu">as.character</span>(resultados), destaque</span>
<span id="cb15-15"><a href="#cb15-15"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb15-16"><a href="#cb15-16"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb15-17"><a href="#cb15-17"></a>    <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb15-18"><a href="#cb15-18"></a>    <span class="at">y =</span> perc,</span>
<span id="cb15-19"><a href="#cb15-19"></a>    <span class="at">fill =</span> <span class="fu">fct_rev</span>(resultados),</span>
<span id="cb15-20"><a href="#cb15-20"></a>    <span class="at">group =</span> <span class="fu">fct_rev</span>(resultados)</span>
<span id="cb15-21"><a href="#cb15-21"></a>  )) <span class="sc">+</span></span>
<span id="cb15-22"><a href="#cb15-22"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> T, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="fu">aes</span>(<span class="at">alpha =</span> destaque)) <span class="sc">+</span></span>
<span id="cb15-23"><a href="#cb15-23"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb15-24"><a href="#cb15-24"></a>    <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> .<span class="dv">5</span>),</span>
<span id="cb15-25"><a href="#cb15-25"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb15-26"><a href="#cb15-26"></a>    <span class="fu">aes</span>(</span>
<span id="cb15-27"><a href="#cb15-27"></a>      <span class="at">label =</span> <span class="fu">percent</span>(perc, <span class="at">accuracy =</span> <span class="fl">0.1</span>, <span class="at">decimal.mark =</span> <span class="st">","</span>),</span>
<span id="cb15-28"><a href="#cb15-28"></a>      <span class="at">color =</span> destaque,</span>
<span id="cb15-29"><a href="#cb15-29"></a>      <span class="at">alpha =</span> destaque</span>
<span id="cb15-30"><a href="#cb15-30"></a>  )) <span class="sc">+</span></span>
<span id="cb15-31"><a href="#cb15-31"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb15-32"><a href="#cb15-32"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb15-33"><a href="#cb15-33"></a>    <span class="st">"Resultado esperado"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb15-34"><a href="#cb15-34"></a>    <span class="st">"Resultado contraditório"</span> <span class="ot">=</span> <span class="st">"gray20"</span></span>
<span id="cb15-35"><a href="#cb15-35"></a>  ), <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb15-36"><a href="#cb15-36"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cores_classificacao) <span class="sc">+</span></span>
<span id="cb15-37"><a href="#cb15-37"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">1.02</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb15-38"><a href="#cb15-38"></a>  <span class="fu">scale_alpha_discrete</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.4</span>, <span class="dv">1</span>), <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb15-39"><a href="#cb15-39"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> <span class="fu">reorder</span>(decisao, <span class="sc">-</span>perc, sum), <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb15-40"><a href="#cb15-40"></a>  <span class="fu">labs</span>(</span>
<span id="cb15-41"><a href="#cb15-41"></a>    <span class="at">title =</span> <span class="st">"Classificação de atendimento (BERT/NLP) X Decisão do órgão (FalaBr/CGU)"</span>,</span>
<span id="cb15-42"><a href="#cb15-42"></a>    <span class="at">subtitle =</span> <span class="st">"As barras em destaques representam os resultados esperados para cada decisão"</span>,</span>
<span id="cb15-43"><a href="#cb15-43"></a>    <span class="at">x =</span> <span class="st">"Decisões do órgão (FalaBr/CGU)"</span>,</span>
<span id="cb15-44"><a href="#cb15-44"></a>    <span class="at">y =</span> <span class="st">"% de pedidos"</span>,</span>
<span id="cb15-45"><a href="#cb15-45"></a>    <span class="at">fill =</span> <span class="st">"Classificação BERT/NLP:"</span></span>
<span id="cb15-46"><a href="#cb15-46"></a>  ) <span class="sc">+</span></span>
<span id="cb15-47"><a href="#cb15-47"></a>  <span class="fu">theme</span>(</span>
<span id="cb15-48"><a href="#cb15-48"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="dv">0</span>),</span>
<span id="cb15-49"><a href="#cb15-49"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb15-50"><a href="#cb15-50"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>,</span>
<span id="cb15-51"><a href="#cb15-51"></a>    <span class="at">legend.direction =</span> <span class="st">"horizontal"</span>,</span>
<span id="cb15-52"><a href="#cb15-52"></a>    <span class="at">legend.justification =</span> <span class="st">"left"</span></span>
<span id="cb15-53"><a href="#cb15-53"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/plot-classificacao-bert-nlp-decisao-reduzido-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</div>
</div>
</div>
<p><strong>Destaques</strong></p>
<ul>
<li><p>Uma classificação contraditória é quando a decisão de acesso emitida pelo órgão não corresponde à classificação de atendimento do algoritmo BERT/NLP definida pela <a href="#tbl-atendimento-classificacao">Tabela&nbsp;1</a></p></li>
<li><p>A classificação contraditória mais relevante é quando o algoritmo BERT/NLP classifica como “Não Atendido” uma solicitação onde o órgão alegou conceder acesso. São 8.045 pedidos que se enquadram nessa classificação contraditória e esses pedidos representam 20,1% dos acessos concedidos.</p></li>
<li><p>O algoritmo de classificação (BERT/NLP) capta uma taxa de não atendimento maior do que as apresentadas pelas decisões (FalaBr/CGU). Os resultados apontam para uma subnotificação do não atendimento de pedidos LAI pelo governo Federal.</p></li>
</ul></section><section id="análise-qualitativa" class="level2"><h2 class="anchored" data-anchor-id="análise-qualitativa">Análise qualitativa</h2>
<p>A fim de entender as razões para uma taxa de não atendimento tão alta em casos classificados como “Acesso concedido”, foi realizada uma análise qualitativa em uma amostra de 100 pedidos. Os pedidos foram lidos pela equipe da TB e a classificação de cada um foi avaliada.</p>
<blockquote class="blockquote">
<p>As amostras de pedidos selecionadas para análise humana estão disponíveis <a href="https://docs.google.com/spreadsheets/d/1gLRXoeQ7OZUL3Fq78KNcZiUcsTbUPVKPFge4OXTrKQ4/edit#gid=447338924">nesta planilha</a></p>
</blockquote>
<section id="resultados" class="level3"><h3 class="anchored" data-anchor-id="resultados">Resultados</h3>
<section id="amostras-analisadas" class="level4"><h4 class="anchored" data-anchor-id="amostras-analisadas">Amostras analisadas</h4>
<blockquote class="blockquote">
<p><strong>Dos 100 pedidos avaliados, 54 deles realmente não tiveram sua solicitação atendida, apesar de o órgão considerar o acesso como concedido</strong> - esses são casos onde a classificação NLP está correta.</p>
</blockquote>
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>read_amostra <span class="ot">&lt;-</span> <span class="cf">function</span>(aba) <span class="fu">read_sheet</span>(<span class="at">ss =</span> <span class="st">"1gLRXoeQ7OZUL3Fq78KNcZiUcsTbUPVKPFge4OXTrKQ4"</span>, <span class="at">sheet =</span> aba)</span>
<span id="cb16-2"><a href="#cb16-2"></a></span>
<span id="cb16-3"><a href="#cb16-3"></a><span class="co"># pegar dados da planilha</span></span>
<span id="cb16-4"><a href="#cb16-4"></a>quali <span class="ot">&lt;-</span> <span class="fu">read_amostra</span>(<span class="st">"DECISAO: Acesso Concedido | CLASSIFICAÇÃO: Não Atendido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-5"><a href="#cb16-5"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Classificação NLP está correta?</span><span class="st">`</span>))</span>
<span id="cb16-6"><a href="#cb16-6"></a></span>
<span id="cb16-7"><a href="#cb16-7"></a>quali <span class="sc">%&gt;%</span></span>
<span id="cb16-8"><a href="#cb16-8"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Classificação NLP está correta?</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb16-9"><a href="#cb16-9"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb16-10"><a href="#cb16-10"></a>    <span class="at">x =</span> <span class="st">`</span><span class="at">Classificação NLP está correta?</span><span class="st">`</span>,</span>
<span id="cb16-11"><a href="#cb16-11"></a>    <span class="at">y =</span> n,</span>
<span id="cb16-12"><a href="#cb16-12"></a>    <span class="at">fill =</span> <span class="st">`</span><span class="at">Classificação NLP está correta?</span><span class="st">`</span></span>
<span id="cb16-13"><a href="#cb16-13"></a>  )) <span class="sc">+</span></span>
<span id="cb16-14"><a href="#cb16-14"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]) <span class="sc">+</span></span>
<span id="cb16-15"><a href="#cb16-15"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n), <span class="at">vjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]) <span class="sc">+</span></span>
<span id="cb16-16"><a href="#cb16-16"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">65</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb16-17"><a href="#cb16-17"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb16-18"><a href="#cb16-18"></a>    <span class="st">"Sim"</span> <span class="ot">=</span> cores_tb[[<span class="st">"azul"</span>]],</span>
<span id="cb16-19"><a href="#cb16-19"></a>    <span class="st">"Não"</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb16-20"><a href="#cb16-20"></a>    <span class="st">"Ambíguo"</span> <span class="ot">=</span> cores_aep[[<span class="st">"laranja"</span>]]</span>
<span id="cb16-21"><a href="#cb16-21"></a>  )) <span class="sc">+</span></span>
<span id="cb16-22"><a href="#cb16-22"></a>  <span class="fu">theme</span>(<span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb16-23"><a href="#cb16-23"></a>  <span class="fu">labs</span>(</span>
<span id="cb16-24"><a href="#cb16-24"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos</span><span class="sc">\n</span><span class="st">analisados"</span>,</span>
<span id="cb16-25"><a href="#cb16-25"></a>    <span class="at">x =</span> <span class="st">"A classificação (BERT/NLP) foi correta?"</span>,</span>
<span id="cb16-26"><a href="#cb16-26"></a>    <span class="at">title =</span> <span class="st">"Resultados das análises qualitativas"</span>,</span>
<span id="cb16-27"><a href="#cb16-27"></a>    <span class="at">Subtitle =</span> <span class="st">"Amostra aleatória de 100 pedidos"</span></span>
<span id="cb16-28"><a href="#cb16-28"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/plot-resultado-amostra-1.png" class="img-fluid"></p>
</div>
</div>
<p>Ainda considerando a amostra de 100 pedidos, foram analisados os 36 casos onde o algoritmo NLP classificou incorretamente o atendimento. As **justificativas das contrariedades* foram classificados em 4 categorias:</p>
<ol type="1">
<li>
<strong>Erro de classificação</strong>: quando o algoritmo realmente classifica errado o atendimento ao pedido. O acesso foi, de fato, concedido pelo órgão e o algoritmo NLP/BERT classificou o pedido como “Não atendido”.</li>
<li>
<strong>Link externo</strong>: a resposta foi concedida ao solicitante por meio de uma URL externa, a qual o algoritmo não possui acesso direto e, portanto, não é capaz de avaliar a resposta.</li>
<li>
<strong>Por e-mail</strong>: a resposta foi concedida mas o conteúdo solicitado foi enviado diretamente ao e-mail do solicitante. Este é outro caso onde o algorítmo não é capaz de avaliar a resposta por não possuir acesso ao conteúdo enviado externamente.</li>
<li>
<strong>Retirar pessoalmente</strong>: o órgão concedeu acesso ao usuário, porém o conteúdo solicitado só é possível de ser acessado pessoalmente pelo solicitante no endereço indicado pelo órgão.</li>
</ol></section><section id="classificações-nlpbert-erradas" class="level4"><h4 class="anchored" data-anchor-id="classificações-nlpbert-erradas">Classificações (NLP/BERT) erradas</h4>
<blockquote class="blockquote">
<p>Os casos 2., 3., e 4. são semelhantes ao casos onde os pedidos possuem anexo. O algoritmo não possui acesso ao conteúdo e, portanto, não pode avaliar o teor da resposta por completo.</p>
</blockquote>
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>quali <span class="sc">%&gt;%</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Classificação NLP está correta?</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Não"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">reorder</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, n)) <span class="sc">%&gt;%</span></span>
<span id="cb17-5"><a href="#cb17-5"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb17-6"><a href="#cb17-6"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> F, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]) <span class="sc">+</span></span>
<span id="cb17-7"><a href="#cb17-7"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n), <span class="at">hjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]) <span class="sc">+</span></span>
<span id="cb17-8"><a href="#cb17-8"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb17-9"><a href="#cb17-9"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb17-10"><a href="#cb17-10"></a>    <span class="fu">rev</span>(<span class="fu">colorRampPalette</span>(<span class="fu">c</span>(cores_aep[[<span class="st">"rosa"</span>]], <span class="st">"white"</span>))(<span class="dv">5</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>])</span>
<span id="cb17-11"><a href="#cb17-11"></a>  )) <span class="sc">+</span></span>
<span id="cb17-12"><a href="#cb17-12"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">17</span>)) <span class="sc">+</span></span>
<span id="cb17-13"><a href="#cb17-13"></a>  <span class="fu">theme</span>(</span>
<span id="cb17-14"><a href="#cb17-14"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb17-15"><a href="#cb17-15"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>)</span>
<span id="cb17-16"><a href="#cb17-16"></a>  ) <span class="sc">+</span></span>
<span id="cb17-17"><a href="#cb17-17"></a>  <span class="fu">labs</span>(</span>
<span id="cb17-18"><a href="#cb17-18"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb17-19"><a href="#cb17-19"></a>    <span class="at">title =</span> <span class="st">"Justificativas das classificações contraditórias"</span>,</span>
<span id="cb17-20"><a href="#cb17-20"></a>    <span class="at">x =</span> <span class="cn">NULL</span></span>
<span id="cb17-21"><a href="#cb17-21"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-17-1.png" class="img-fluid"></p>
</div>
</div>
</section><section id="amostras-de-órgãos-selecionados" class="level4"><h4 class="anchored" data-anchor-id="amostras-de-órgãos-selecionados">Amostras de órgãos selecionados</h4>
<p>Selecionamos amostras de órgãos específicos com alta classificações (BERT/NLP) contraditórias com a decisão de acesso expedida pelos órgãos. Os órgãos analisados foram:</p>
<ul>
<li>ANVISA: que concedeu acesso a 4.735 pedidos, dos quais 860 (18,2%) foram classificados como Não Atendido pelo algoritmo BERT/NLP</li>
<li>INSS: que concedeu acesso a 1.679 pedidos, dos quais 745 foram classificados como Não Atendido pelo algoritmo BERT/NLP (44,4%)</li>
<li>SGPR: que concedeu acesso a 714 pedidos, dos quais 451 foram classificados como Não Atendido pelo algoritmo BERT/NLP (63,2%)</li>
</ul>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true" href="">INSS</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false" href="">SGPR</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-3" role="tab" aria-controls="tabset-4-3" aria-selected="false" href="">PETROBRÁS</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-4" role="tab" aria-controls="tabset-4-4" aria-selected="false" href="">CEX</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-5" role="tab" aria-controls="tabset-4-5" aria-selected="false" href="">ANVISA</a></li>
</ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<blockquote class="blockquote">
<p><strong>INSS</strong>: Foi constatado uma alta incidência de não atendimento de solicitações por parte do INSS, sob justificativas de que informações pessoais não podem ser oferecidas sem a devida confirmação de identidade do requerente - os pedidos normalmente versam sobre informações de prazos/recebimento de aposentadoria e serviços de seguridade social. Em outros casos o INSS orienta ao requerente a busca pela informação por outros meios que não o FalaBr, pois não se trata de pedido de acesso a informação com base na LAI - apesar de a orientação ser um procedimento correto, o acesso ao pedido não deve ser considerado concedido, pois o órgão não possui competencia para atender tal solicitação via FalaBr.</p>
</blockquote>
<ul>
<li>INSS – Instituto Nacional do Seguro Social</li>
<li>Amostra: 20 de 745 pedidos com classificação contraditória</li>
</ul>
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a><span class="fu">read_amostra</span>(<span class="at">aba =</span> <span class="st">"INSS"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="#cb18-2"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb18-3"><a href="#cb18-3"></a>  <span class="fu">mutate</span>(</span>
<span id="cb18-4"><a href="#cb18-4"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">" </span><span class="sc">\\</span><span class="st">("</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">("</span>),</span>
<span id="cb18-5"><a href="#cb18-5"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">"T"</span>, <span class="st">"T</span><span class="sc">\n</span><span class="st">"</span>),</span>
<span id="cb18-6"><a href="#cb18-6"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">reorder</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, n)</span>
<span id="cb18-7"><a href="#cb18-7"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb18-8"><a href="#cb18-8"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="at">x =</span> n, <span class="at">fill =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb18-9"><a href="#cb18-9"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb18-10"><a href="#cb18-10"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n), <span class="at">hjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb18-11"><a href="#cb18-11"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb18-12"><a href="#cb18-12"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb18-13"><a href="#cb18-13"></a>    cores_aep[[<span class="st">"laranja"</span>]],</span>
<span id="cb18-14"><a href="#cb18-14"></a>    cores_tb[[<span class="st">"azul"</span>]]</span>
<span id="cb18-15"><a href="#cb18-15"></a>  )) <span class="sc">+</span></span>
<span id="cb18-16"><a href="#cb18-16"></a>  <span class="fu">theme</span>(</span>
<span id="cb18-17"><a href="#cb18-17"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>),</span>
<span id="cb18-18"><a href="#cb18-18"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb18-19"><a href="#cb18-19"></a>  ) <span class="sc">+</span></span>
<span id="cb18-20"><a href="#cb18-20"></a>  <span class="fu">labs</span>(</span>
<span id="cb18-21"><a href="#cb18-21"></a>    <span class="at">title =</span> <span class="st">"Amostra de 20 pedidos da INSS"</span>,</span>
<span id="cb18-22"><a href="#cb18-22"></a>    <span class="at">subtitle =</span> <span class="st">"INSS – Instituto Nacional do Seguro Social"</span>,</span>
<span id="cb18-23"><a href="#cb18-23"></a>    <span class="at">x =</span> <span class="st">"Quantidade de pedidos analisados"</span>,</span>
<span id="cb18-24"><a href="#cb18-24"></a>    <span class="at">y =</span> <span class="st">"Justificativa da contrariedade"</span></span>
<span id="cb18-25"><a href="#cb18-25"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-18-1.png" class="img-fluid"></p>
</div>
</div>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<blockquote class="blockquote">
<p><strong>SGPR</strong>: Após o presidente da República declarar - em março de 2021 - que possuía provas sobre fraudes nas eleições de 2018 a SGPR recebeu ao menos 400 solicitações de envios - com base na LAI - das supostas provas existentes. Apesar de alegar não dispor das tais provas citadas pelo presidente, a SGPR alega que o acesso às mais de 400 solicitações foram concedidos. <strong>O Algoritmo BERT/NLP constatou corretamente o não atendimento de todas as solicitações.</strong></p>
</blockquote>
<ul>
<li>SGPR – Secretaria-Geral da Presidência da República</li>
<li>Foram analisados todos os 460 pedidos com classificação contraditória que o órgão possui
<ul>
<li>371 pedidos possuem o mesmo tema (fraudes nas eleições) e foram filtrados com regex</li>
<li>89 pedidos restantes</li>
</ul>
</li>
</ul>
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a><span class="fu">read_amostra</span>(<span class="at">aba =</span> <span class="st">"SGPR - DEMAIS"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb19-3"><a href="#cb19-3"></a>    <span class="fu">read_amostra</span>(<span class="at">aba =</span> <span class="st">"SGPR - FRAUDE ELEIÇÕES"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-4"><a href="#cb19-4"></a>      <span class="fu">filter</span>(<span class="st">`</span><span class="at">Decisão do órgão</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5"></a>      <span class="fu">filter</span>(<span class="st">`</span><span class="at">Classificação Modelo NLP</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Não Atendido"</span>)</span>
<span id="cb19-6"><a href="#cb19-6"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb19-7"><a href="#cb19-7"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb19-8"><a href="#cb19-8"></a>  <span class="fu">mutate</span>(</span>
<span id="cb19-9"><a href="#cb19-9"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">" </span><span class="sc">\\</span><span class="st">("</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">("</span>),</span>
<span id="cb19-10"><a href="#cb19-10"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">"T"</span>, <span class="st">"T</span><span class="sc">\n</span><span class="st">"</span>),</span>
<span id="cb19-11"><a href="#cb19-11"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">reorder</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, n)</span>
<span id="cb19-12"><a href="#cb19-12"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb19-13"><a href="#cb19-13"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="at">x =</span> n, <span class="at">fill =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb19-14"><a href="#cb19-14"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb19-15"><a href="#cb19-15"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n), <span class="at">hjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb19-16"><a href="#cb19-16"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">400</span>)) <span class="sc">+</span></span>
<span id="cb19-17"><a href="#cb19-17"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb19-18"><a href="#cb19-18"></a>    cores_tb[[<span class="st">"cinza_escuro"</span>]],</span>
<span id="cb19-19"><a href="#cb19-19"></a>    cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb19-20"><a href="#cb19-20"></a>    cores_aep[[<span class="st">'rosa'</span>]],</span>
<span id="cb19-21"><a href="#cb19-21"></a>    cores_aep[[<span class="st">"laranja"</span>]],</span>
<span id="cb19-22"><a href="#cb19-22"></a>    <span class="fu">alpha</span>(cores_tb[[<span class="st">"azul"</span>]], .<span class="dv">6</span>),</span>
<span id="cb19-23"><a href="#cb19-23"></a>    cores_tb[[<span class="st">"azul"</span>]]</span>
<span id="cb19-24"><a href="#cb19-24"></a>  )) <span class="sc">+</span></span>
<span id="cb19-25"><a href="#cb19-25"></a>  <span class="fu">theme</span>(</span>
<span id="cb19-26"><a href="#cb19-26"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>),</span>
<span id="cb19-27"><a href="#cb19-27"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb19-28"><a href="#cb19-28"></a>  ) <span class="sc">+</span></span>
<span id="cb19-29"><a href="#cb19-29"></a>  <span class="fu">labs</span>(</span>
<span id="cb19-30"><a href="#cb19-30"></a>    <span class="at">title =</span> <span class="st">"Amostra de 20 pedidos da SGPR"</span>,</span>
<span id="cb19-31"><a href="#cb19-31"></a>    <span class="at">subtitle =</span> <span class="st">"SGPR – Secretaria-Geral da Presidência da República"</span>,</span>
<span id="cb19-32"><a href="#cb19-32"></a>    <span class="at">x =</span> <span class="st">"Quantidade de pedidos analisados"</span>,</span>
<span id="cb19-33"><a href="#cb19-33"></a>    <span class="at">y =</span> <span class="st">"Justificativa da contrariedade"</span></span>
<span id="cb19-34"><a href="#cb19-34"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-19-1.png" class="img-fluid"></p>
</div>
</div>
</div>
<div id="tabset-4-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-3-tab">
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">read_amostra</span>(<span class="at">aba =</span> <span class="st">"PETROBRAS"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb20-3"><a href="#cb20-3"></a>  <span class="fu">mutate</span>(</span>
<span id="cb20-4"><a href="#cb20-4"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">" </span><span class="sc">\\</span><span class="st">("</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">("</span>),</span>
<span id="cb20-5"><a href="#cb20-5"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">"T"</span>, <span class="st">"T</span><span class="sc">\n</span><span class="st">"</span>),</span>
<span id="cb20-6"><a href="#cb20-6"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">reorder</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, n)</span>
<span id="cb20-7"><a href="#cb20-7"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb20-8"><a href="#cb20-8"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="at">x =</span> n, <span class="at">fill =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb20-9"><a href="#cb20-9"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb20-10"><a href="#cb20-10"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n), <span class="at">hjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb20-11"><a href="#cb20-11"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">15</span>)) <span class="sc">+</span></span>
<span id="cb20-12"><a href="#cb20-12"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb20-13"><a href="#cb20-13"></a>    cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb20-14"><a href="#cb20-14"></a>    cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb20-15"><a href="#cb20-15"></a>    cores_aep[[<span class="st">"laranja"</span>]],</span>
<span id="cb20-16"><a href="#cb20-16"></a>    cores_tb[[<span class="st">"azul"</span>]]</span>
<span id="cb20-17"><a href="#cb20-17"></a>  )) <span class="sc">+</span></span>
<span id="cb20-18"><a href="#cb20-18"></a>  <span class="fu">theme</span>(</span>
<span id="cb20-19"><a href="#cb20-19"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb20-20"><a href="#cb20-20"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>)</span>
<span id="cb20-21"><a href="#cb20-21"></a>  ) <span class="sc">+</span></span>
<span id="cb20-22"><a href="#cb20-22"></a>  <span class="fu">labs</span>(</span>
<span id="cb20-23"><a href="#cb20-23"></a>    <span class="at">title =</span> <span class="st">"Amostra de 20 pedidos da PETROBRÁS"</span>,</span>
<span id="cb20-24"><a href="#cb20-24"></a>    <span class="at">subtitle =</span> <span class="st">"PETROBRAS – Petróleo Brasileiro S.A."</span>,</span>
<span id="cb20-25"><a href="#cb20-25"></a>    <span class="at">x =</span> <span class="st">"Quantidade de pedidos analisados"</span>,</span>
<span id="cb20-26"><a href="#cb20-26"></a>    <span class="at">y =</span> <span class="st">"Justificativa da contrariedade"</span></span>
<span id="cb20-27"><a href="#cb20-27"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-20-1.png" class="img-fluid"></p>
</div>
</div>
</div>
<div id="tabset-4-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-4-tab">
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">read_amostra</span>(<span class="at">aba =</span> <span class="st">"CEX"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="#cb21-2"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb21-3"><a href="#cb21-3"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-4"><a href="#cb21-4"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">" </span><span class="sc">\\</span><span class="st">("</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">("</span>),</span>
<span id="cb21-5"><a href="#cb21-5"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">"T"</span>, <span class="st">"T</span><span class="sc">\n</span><span class="st">"</span>),</span>
<span id="cb21-6"><a href="#cb21-6"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">reorder</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, n)</span>
<span id="cb21-7"><a href="#cb21-7"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb21-8"><a href="#cb21-8"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="at">x =</span> n, <span class="at">fill =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb21-9"><a href="#cb21-9"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb21-10"><a href="#cb21-10"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n), <span class="at">hjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb21-11"><a href="#cb21-11"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">15</span>)) <span class="sc">+</span></span>
<span id="cb21-12"><a href="#cb21-12"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb21-13"><a href="#cb21-13"></a>    cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb21-14"><a href="#cb21-14"></a>    cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb21-15"><a href="#cb21-15"></a>    cores_aep[[<span class="st">"laranja"</span>]],</span>
<span id="cb21-16"><a href="#cb21-16"></a>    cores_tb[[<span class="st">"azul"</span>]]</span>
<span id="cb21-17"><a href="#cb21-17"></a>  )) <span class="sc">+</span></span>
<span id="cb21-18"><a href="#cb21-18"></a>  <span class="fu">theme</span>(</span>
<span id="cb21-19"><a href="#cb21-19"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb21-20"><a href="#cb21-20"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>)</span>
<span id="cb21-21"><a href="#cb21-21"></a>  ) <span class="sc">+</span></span>
<span id="cb21-22"><a href="#cb21-22"></a>  <span class="fu">labs</span>(</span>
<span id="cb21-23"><a href="#cb21-23"></a>    <span class="at">title =</span> <span class="st">"Amostra de 20 pedidos da CEX"</span>,</span>
<span id="cb21-24"><a href="#cb21-24"></a>    <span class="at">subtitle =</span> <span class="st">"CEX - Comando do Exército"</span>,</span>
<span id="cb21-25"><a href="#cb21-25"></a>    <span class="at">x =</span> <span class="st">"Quantidade de pedidos analisados"</span>,</span>
<span id="cb21-26"><a href="#cb21-26"></a>    <span class="at">y =</span> <span class="st">"Justificativa da contrariedade"</span></span>
<span id="cb21-27"><a href="#cb21-27"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-21-1.png" class="img-fluid"></p>
</div>
</div>
</div>
<div id="tabset-4-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-5-tab">
<blockquote class="blockquote">
<p>A <strong>ANVISA</strong> considera como “Acesso concedido” casos onde a informação só pode ser obtida por meio de consulta às Agências Sanitárias municipais ou locais. Também foram observados casos onde a informação não pode ser concedida sem a devida comprovação de identidade.</p>
</blockquote>
<ul>
<li>ANVISA – Agência Nacional de Vigilância Sanitária</li>
<li>Amostra: 20 de 860 pedidos com classificação contraditória</li>
</ul>
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a><span class="fu">read_amostra</span>(<span class="at">aba =</span> <span class="st">"ANVISA"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-2"><a href="#cb22-2"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb22-3"><a href="#cb22-3"></a>  <span class="fu">mutate</span>(</span>
<span id="cb22-4"><a href="#cb22-4"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">" </span><span class="sc">\\</span><span class="st">("</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">("</span>),</span>
<span id="cb22-5"><a href="#cb22-5"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">"T"</span>, <span class="st">"T</span><span class="sc">\n</span><span class="st">"</span>),</span>
<span id="cb22-6"><a href="#cb22-6"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">reorder</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, n)</span>
<span id="cb22-7"><a href="#cb22-7"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb22-8"><a href="#cb22-8"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="at">x =</span> n, <span class="at">fill =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb22-9"><a href="#cb22-9"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb22-10"><a href="#cb22-10"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n), <span class="at">hjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb22-11"><a href="#cb22-11"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">15</span>)) <span class="sc">+</span></span>
<span id="cb22-12"><a href="#cb22-12"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb22-13"><a href="#cb22-13"></a>    cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb22-14"><a href="#cb22-14"></a>    cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb22-15"><a href="#cb22-15"></a>    cores_aep[[<span class="st">"laranja"</span>]],</span>
<span id="cb22-16"><a href="#cb22-16"></a>    cores_tb[[<span class="st">"azul"</span>]]</span>
<span id="cb22-17"><a href="#cb22-17"></a>  )) <span class="sc">+</span></span>
<span id="cb22-18"><a href="#cb22-18"></a>  <span class="fu">theme</span>(</span>
<span id="cb22-19"><a href="#cb22-19"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb22-20"><a href="#cb22-20"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>)</span>
<span id="cb22-21"><a href="#cb22-21"></a>  ) <span class="sc">+</span></span>
<span id="cb22-22"><a href="#cb22-22"></a>  <span class="fu">labs</span>(</span>
<span id="cb22-23"><a href="#cb22-23"></a>    <span class="at">title =</span> <span class="st">"Amostra de 20 pedidos da ANVISA"</span>,</span>
<span id="cb22-24"><a href="#cb22-24"></a>    <span class="at">subtitle =</span> <span class="st">"ANVISA – Agência Nacional de Vigilância Sanitária"</span>,</span>
<span id="cb22-25"><a href="#cb22-25"></a>    <span class="at">x =</span> <span class="st">"Quantidade de pedidos analisados"</span>,</span>
<span id="cb22-26"><a href="#cb22-26"></a>    <span class="at">y =</span> <span class="st">"Justificativa da contrariedade"</span></span>
<span id="cb22-27"><a href="#cb22-27"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-22-1.png" class="img-fluid"></p>
</div>
</div>
</div>
</div>
</div>
<p><strong>Destaques</strong></p>
<ul>
<li>Análise qualitativa geral
<ul>
<li><strong>A equipe da TB leu e avaliou 100 pedidos LAI, verificando se a classificação do algoritmo (BERT/NLP) realmente correspondia com a realidade.</strong></li>
<li>Dos 100 pedidos avaliados, <strong>54 deles realmente não tiveram sua solicitação atendida, apesar de o órgão considerar o acesso como concedido</strong> - esses são casos onde a classificação NLP está correta.</li>
<li>os <strong>motivos de erro de classificação do algoritmo (BERT/NLP)</strong> variaram em 4 tipos diferentes: <strong>(i)</strong> <em>erro de classificação</em>, <strong>(ii)</strong> conteúdo disponibilizado via <em>link/url externo</em>, <strong>(iii)</strong> conteúdo disponibilizado <em>por e-mail</em>, <strong>(iv)</strong> conteúdo disponibilizado por <em>meio presencial</em>. Os casos iii, iii e iv são semelhantes ao casos onde os pedidos possuem anexo. O algoritmo não possui acesso ao conteúdo e, portanto, não pode avaliar o teor da resposta por completo.</li>
</ul>
</li>
</ul></section></section></section><section id="não-atendimento-da-lai-pelos-órgãos" class="level2"><h2 class="anchored" data-anchor-id="não-atendimento-da-lai-pelos-órgãos">Não atendimento da LAI pelos órgãos</h2>
<section id="taxa-de-classificações-contraditórias" class="level3"><h3 class="anchored" data-anchor-id="taxa-de-classificações-contraditórias">Taxa de classificações contraditórias</h3>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true" href="">Distribuição</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false" href="">Dispersão</a></li>
</ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>pedidos <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="#cb23-2"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"n_orgao_decisao_resultados"</span>, orgao, decisao, resultados) <span class="sc">%&gt;%</span></span>
<span id="cb23-3"><a href="#cb23-3"></a>  <span class="fu">add_count</span>(<span class="at">name =</span> <span class="st">"n_orgao"</span>, orgao, <span class="at">wt =</span> n_orgao_decisao_resultados) <span class="sc">%&gt;%</span></span>
<span id="cb23-4"><a href="#cb23-4"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> n_orgao_decisao_resultados <span class="sc">/</span> n_orgao) <span class="sc">%&gt;%</span></span>
<span id="cb23-5"><a href="#cb23-5"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>, resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb23-6"><a href="#cb23-6"></a>  <span class="fu">mutate</span>(<span class="at">cutoff =</span> <span class="fu">if_else</span>(perc <span class="sc">&gt;=</span> .<span class="dv">2</span>, <span class="st">"Acima de 20%"</span>, <span class="st">"Normal"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb23-7"><a href="#cb23-7"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> perc)) <span class="sc">+</span></span>
<span id="cb23-8"><a href="#cb23-8"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb23-9"><a href="#cb23-9"></a>    <span class="fu">aes</span>(<span class="at">alpha =</span> cutoff),</span>
<span id="cb23-10"><a href="#cb23-10"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb23-11"><a href="#cb23-11"></a>    <span class="at">fill =</span> cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb23-12"><a href="#cb23-12"></a>    <span class="at">bins =</span> <span class="dv">60</span></span>
<span id="cb23-13"><a href="#cb23-13"></a>  ) <span class="sc">+</span></span>
<span id="cb23-14"><a href="#cb23-14"></a>  <span class="fu">geom_vline</span>(</span>
<span id="cb23-15"><a href="#cb23-15"></a>    <span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fu">mean</span>(perc)),</span>
<span id="cb23-16"><a href="#cb23-16"></a>    <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb23-17"><a href="#cb23-17"></a>    <span class="at">lty =</span> <span class="st">"dashed"</span>,</span>
<span id="cb23-18"><a href="#cb23-18"></a>    <span class="at">size =</span> <span class="dv">2</span></span>
<span id="cb23-19"><a href="#cb23-19"></a>  ) <span class="sc">+</span></span>
<span id="cb23-20"><a href="#cb23-20"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb23-21"><a href="#cb23-21"></a>    <span class="fu">aes</span>(</span>
<span id="cb23-22"><a href="#cb23-22"></a>      <span class="at">label =</span> <span class="fu">str_glue</span>(</span>
<span id="cb23-23"><a href="#cb23-23"></a>        <span class="st">"Em média, cada órgão teve</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb23-24"><a href="#cb23-24"></a>        <span class="st">"{round(mean(perc)*100, 1)}% de pedidos com decisão </span><span class="sc">\"</span><span class="st">Acesso Concedido</span><span class="sc">\"</span><span class="st">"</span>,</span>
<span id="cb23-25"><a href="#cb23-25"></a>        <span class="st">"</span><span class="sc">\n</span><span class="st">foram classificados como </span><span class="sc">\"</span><span class="st">Não Atendido</span><span class="sc">\"</span><span class="st">"</span></span>
<span id="cb23-26"><a href="#cb23-26"></a>      ),</span>
<span id="cb23-27"><a href="#cb23-27"></a>      <span class="at">x =</span> .<span class="dv">21</span>,</span>
<span id="cb23-28"><a href="#cb23-28"></a>      <span class="at">y =</span> <span class="dv">15</span></span>
<span id="cb23-29"><a href="#cb23-29"></a>    ),</span>
<span id="cb23-30"><a href="#cb23-30"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb23-31"><a href="#cb23-31"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb23-32"><a href="#cb23-32"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb23-33"><a href="#cb23-33"></a>    <span class="at">check_overlap =</span> T</span>
<span id="cb23-34"><a href="#cb23-34"></a>  ) <span class="sc">+</span></span>
<span id="cb23-35"><a href="#cb23-35"></a>  <span class="fu">geom_curve</span>(</span>
<span id="cb23-36"><a href="#cb23-36"></a>    <span class="fu">aes</span>(</span>
<span id="cb23-37"><a href="#cb23-37"></a>      <span class="at">x =</span> .<span class="dv">205</span>, <span class="at">xend =</span> <span class="fu">mean</span>(perc)<span class="sc">+</span>.<span class="dv">01</span>,</span>
<span id="cb23-38"><a href="#cb23-38"></a>      <span class="at">y =</span> <span class="dv">15</span>, <span class="at">yend =</span> <span class="dv">17</span></span>
<span id="cb23-39"><a href="#cb23-39"></a>    ),</span>
<span id="cb23-40"><a href="#cb23-40"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb23-41"><a href="#cb23-41"></a>    <span class="at">curvature =</span> .<span class="dv">3</span>,</span>
<span id="cb23-42"><a href="#cb23-42"></a>    <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.02</span>, <span class="st">"npc"</span>))</span>
<span id="cb23-43"><a href="#cb23-43"></a>  ) <span class="sc">+</span></span>
<span id="cb23-44"><a href="#cb23-44"></a>  <span class="fu">scale_alpha_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="fl">0.3</span>)) <span class="sc">+</span></span>
<span id="cb23-45"><a href="#cb23-45"></a>  hrbrthemes<span class="sc">::</span><span class="fu">scale_x_percent</span>(</span>
<span id="cb23-46"><a href="#cb23-46"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>),</span>
<span id="cb23-47"><a href="#cb23-47"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, .<span class="dv">6</span>, <span class="at">by =</span> .<span class="dv">05</span>)</span>
<span id="cb23-48"><a href="#cb23-48"></a>  ) <span class="sc">+</span></span>
<span id="cb23-49"><a href="#cb23-49"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb23-50"><a href="#cb23-50"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">27</span>),</span>
<span id="cb23-51"><a href="#cb23-51"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb23-52"><a href="#cb23-52"></a>    <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>)</span>
<span id="cb23-53"><a href="#cb23-53"></a>  ) <span class="sc">+</span></span>
<span id="cb23-54"><a href="#cb23-54"></a>  <span class="fu">theme</span>(</span>
<span id="cb23-55"><a href="#cb23-55"></a>    <span class="at">axis.ticks.x =</span> <span class="fu">element_line</span>(),</span>
<span id="cb23-56"><a href="#cb23-56"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb23-57"><a href="#cb23-57"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="fl">0.9</span>)</span>
<span id="cb23-58"><a href="#cb23-58"></a>  ) <span class="sc">+</span></span>
<span id="cb23-59"><a href="#cb23-59"></a>  <span class="fu">labs</span>(</span>
<span id="cb23-60"><a href="#cb23-60"></a>    <span class="at">x =</span> <span class="st">'% de pedidos com "Acesso Concedido" classificados como "Não Atendido"'</span>,</span>
<span id="cb23-61"><a href="#cb23-61"></a>    <span class="at">y =</span> <span class="st">"Número de órgãos do governo Federal"</span>,</span>
<span id="cb23-62"><a href="#cb23-62"></a>    <span class="at">title =</span> <span class="st">"Distribuição do % de classificações contraditóras"</span>,</span>
<span id="cb23-63"><a href="#cb23-63"></a>    <span class="at">alpha =</span> <span class="st">"% de classificações</span><span class="sc">\n</span><span class="st">contraditórias"</span></span>
<span id="cb23-64"><a href="#cb23-64"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-23-1.png" class="img-fluid" width="768"></p>
</div>
</div>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>pedidos <span class="sc">%&gt;%</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"n_orgao_decisao_resultados"</span>, orgao_abrev, decisao, resultados) <span class="sc">%&gt;%</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>  <span class="fu">add_count</span>(<span class="at">name =</span> <span class="st">"n_orgao"</span>, orgao_abrev, <span class="at">wt =</span> n_orgao_decisao_resultados) <span class="sc">%&gt;%</span></span>
<span id="cb24-4"><a href="#cb24-4"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> n_orgao_decisao_resultados <span class="sc">/</span> n_orgao) <span class="sc">%&gt;%</span></span>
<span id="cb24-5"><a href="#cb24-5"></a>  <span class="fu">mutate</span>(</span>
<span id="cb24-6"><a href="#cb24-6"></a>    <span class="at">destaque =</span> <span class="fu">case_when</span>(</span>
<span id="cb24-7"><a href="#cb24-7"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb24-8"><a href="#cb24-8"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Parcialmente Concedido"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Parcialmente Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb24-9"><a href="#cb24-9"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Negado"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb24-10"><a href="#cb24-10"></a>      decisao <span class="sc">==</span> <span class="st">"Informação Inexistente"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb24-11"><a href="#cb24-11"></a>      decisao <span class="sc">==</span> <span class="st">"Não se trata de solicitação de informação"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb24-12"><a href="#cb24-12"></a>      decisao <span class="sc">==</span> <span class="st">"Órgão não tem competência para responder sobre o assunto"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb24-13"><a href="#cb24-13"></a>      decisao <span class="sc">==</span> <span class="st">"Pergunta Duplicada/Repetida"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb24-14"><a href="#cb24-14"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Resultado contraditório"</span></span>
<span id="cb24-15"><a href="#cb24-15"></a>    ),</span>
<span id="cb24-16"><a href="#cb24-16"></a>    <span class="at">destaque_texto =</span> <span class="fu">if_else</span>(</span>
<span id="cb24-17"><a href="#cb24-17"></a>      destaque <span class="sc">==</span> <span class="st">"Resultado esperado"</span>, <span class="fu">as.character</span>(resultados), destaque</span>
<span id="cb24-18"><a href="#cb24-18"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb24-19"><a href="#cb24-19"></a>  <span class="fu">filter</span>(destaque <span class="sc">!=</span> <span class="st">"Resultado esperado"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb24-20"><a href="#cb24-20"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> perc, <span class="at">y =</span> <span class="st">""</span>, <span class="at">color =</span> resultados)) <span class="sc">+</span></span>
<span id="cb24-21"><a href="#cb24-21"></a>  ggbeeswarm<span class="sc">::</span><span class="fu">geom_quasirandom</span>(</span>
<span id="cb24-22"><a href="#cb24-22"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb24-23"><a href="#cb24-23"></a>    <span class="at">alpha =</span> .<span class="dv">4</span>,</span>
<span id="cb24-24"><a href="#cb24-24"></a>    <span class="at">groupOnX=</span><span class="cn">FALSE</span></span>
<span id="cb24-25"><a href="#cb24-25"></a>  ) <span class="sc">+</span></span>
<span id="cb24-26"><a href="#cb24-26"></a>  ggforce<span class="sc">::</span><span class="fu">geom_mark_circle</span>(</span>
<span id="cb24-27"><a href="#cb24-27"></a>    <span class="at">colour =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb24-28"><a href="#cb24-28"></a>    <span class="at">expand =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">"mm"</span>),</span>
<span id="cb24-29"><a href="#cb24-29"></a>    <span class="at">con.cap =</span> <span class="fu">unit</span>(<span class="dv">0</span>, <span class="st">"mm"</span>),</span>
<span id="cb24-30"><a href="#cb24-30"></a>    <span class="at">con.colour =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb24-31"><a href="#cb24-31"></a>    <span class="at">label.fontsize =</span> <span class="dv">8</span>,</span>
<span id="cb24-32"><a href="#cb24-32"></a>    <span class="at">label.colour =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb24-33"><a href="#cb24-33"></a>    <span class="at">label.buffer =</span> <span class="fu">unit</span>(<span class="dv">10</span>, <span class="st">"mm"</span>),</span>
<span id="cb24-34"><a href="#cb24-34"></a>    <span class="at">label.fill =</span> <span class="st">"transparent"</span>,</span>
<span id="cb24-35"><a href="#cb24-35"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb24-36"><a href="#cb24-36"></a>    <span class="fu">aes</span>(</span>
<span id="cb24-37"><a href="#cb24-37"></a>      <span class="at">filter =</span> orgao_abrev <span class="sc">==</span> <span class="st">"CEASA-MG"</span> <span class="sc">&amp;</span></span>
<span id="cb24-38"><a href="#cb24-38"></a>        decisao <span class="sc">==</span> <span class="st">"Acesso Parcialmente Concedido"</span> <span class="sc">&amp;</span></span>
<span id="cb24-39"><a href="#cb24-39"></a>        resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>,</span>
<span id="cb24-40"><a href="#cb24-40"></a>      <span class="at">label =</span> <span class="st">"Cada ponto</span><span class="sc">\n</span><span class="st">é um órgão"</span></span>
<span id="cb24-41"><a href="#cb24-41"></a>  )) <span class="sc">+</span></span>
<span id="cb24-42"><a href="#cb24-42"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> <span class="fu">reorder</span>(decisao, <span class="sc">-</span>perc, sum), <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">scales =</span> <span class="st">"free_x"</span>) <span class="sc">+</span></span>
<span id="cb24-43"><a href="#cb24-43"></a>  hrbrthemes<span class="sc">::</span><span class="fu">scale_x_percent</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">55</span>)) <span class="sc">+</span></span>
<span id="cb24-44"><a href="#cb24-44"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(cores_classificacao)) <span class="sc">+</span></span>
<span id="cb24-45"><a href="#cb24-45"></a>  <span class="fu">theme</span>(</span>
<span id="cb24-46"><a href="#cb24-46"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>),</span>
<span id="cb24-47"><a href="#cb24-47"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>,</span>
<span id="cb24-48"><a href="#cb24-48"></a>    <span class="at">legend.justification =</span> <span class="st">"left"</span>,</span>
<span id="cb24-49"><a href="#cb24-49"></a>    <span class="at">legend.direction =</span> <span class="st">"horizontal"</span>,</span>
<span id="cb24-50"><a href="#cb24-50"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb24-51"><a href="#cb24-51"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>)</span>
<span id="cb24-52"><a href="#cb24-52"></a>  ) <span class="sc">+</span></span>
<span id="cb24-53"><a href="#cb24-53"></a>  <span class="fu">labs</span>(</span>
<span id="cb24-54"><a href="#cb24-54"></a>    <span class="at">title =</span> <span class="st">"Percentual de classificações contraditórias por órgão"</span>,</span>
<span id="cb24-55"><a href="#cb24-55"></a>    <span class="at">subtitle =</span> <span class="st">"Cada ponto representa um órgão"</span>,</span>
<span id="cb24-56"><a href="#cb24-56"></a>    <span class="at">color =</span> <span class="st">"Classificação (NLP/BERT):"</span>,</span>
<span id="cb24-57"><a href="#cb24-57"></a>    <span class="at">y =</span> <span class="st">"Decisão de Acesso (FalaBr)"</span>,</span>
<span id="cb24-58"><a href="#cb24-58"></a>    <span class="at">x =</span> <span class="st">"Percentual de decisões contraditórias com a classificação NLP/BERT"</span></span>
<span id="cb24-59"><a href="#cb24-59"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-24-1.png" class="img-fluid" width="816"></p>
</div>
</div>
</div>
</div>
</div>
</section><section id="órgãos-com-mais-de-20-de-classificações-contraditórias" class="level3"><h3 class="anchored" data-anchor-id="órgãos-com-mais-de-20-de-classificações-contraditórias">Órgãos com mais de 20% de classificações contraditórias</h3>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true" href="">Percentual (%)</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false" href="">Números absolutos</a></li>
</ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a>pedidos <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"n_orgao_decisao_resultados"</span>, orgao_abrev, decisao, resultados) <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3"></a>  <span class="fu">add_count</span>(<span class="at">name =</span> <span class="st">"n_orgao"</span>, orgao_abrev, <span class="at">wt =</span> n_orgao_decisao_resultados) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> n_orgao_decisao_resultados <span class="sc">/</span> n_orgao) <span class="sc">%&gt;%</span></span>
<span id="cb25-5"><a href="#cb25-5"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>, resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-6"><a href="#cb25-6"></a>  <span class="fu">filter</span>(perc <span class="sc">&gt;=</span> .<span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-7"><a href="#cb25-7"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> perc, <span class="at">y =</span> <span class="fu">reorder</span>(orgao_abrev, perc))) <span class="sc">+</span></span>
<span id="cb25-8"><a href="#cb25-8"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb25-9"><a href="#cb25-9"></a>    <span class="at">fill =</span> cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb25-10"><a href="#cb25-10"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb25-11"><a href="#cb25-11"></a>    <span class="at">size =</span> .<span class="dv">1</span>,</span>
<span id="cb25-12"><a href="#cb25-12"></a>    <span class="at">alpha =</span> .<span class="dv">7</span></span>
<span id="cb25-13"><a href="#cb25-13"></a>  ) <span class="sc">+</span></span>
<span id="cb25-14"><a href="#cb25-14"></a>  hrbrthemes<span class="sc">::</span><span class="fu">scale_x_percent</span>(</span>
<span id="cb25-15"><a href="#cb25-15"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb25-16"><a href="#cb25-16"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>)</span>
<span id="cb25-17"><a href="#cb25-17"></a>  ) <span class="sc">+</span></span>
<span id="cb25-18"><a href="#cb25-18"></a>  <span class="fu">labs</span>(</span>
<span id="cb25-19"><a href="#cb25-19"></a>    <span class="at">title =</span> <span class="st">"Percentual de classificações contraditórias por órgão (Acesso Concedido e Não Atendido)"</span>,</span>
<span id="cb25-20"><a href="#cb25-20"></a>    <span class="at">x =</span> <span class="st">"% de classificações contraditórias"</span>,</span>
<span id="cb25-21"><a href="#cb25-21"></a>    <span class="at">y =</span> <span class="st">"Órgão (sigla)"</span></span>
<span id="cb25-22"><a href="#cb25-22"></a>  ) <span class="sc">+</span></span>
<span id="cb25-23"><a href="#cb25-23"></a>  <span class="fu">theme</span>(</span>
<span id="cb25-24"><a href="#cb25-24"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb25-25"><a href="#cb25-25"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>)</span>
<span id="cb25-26"><a href="#cb25-26"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-25-1.png" class="img-fluid" width="960"></p>
</div>
</div>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a>pedidos <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="#cb26-2"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"n_orgao_decisao_resultados"</span>, orgao, decisao, resultados) <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="#cb26-3"></a>  <span class="fu">add_count</span>(<span class="at">name =</span> <span class="st">"n_orgao"</span>, orgao, <span class="at">wt =</span> n_orgao_decisao_resultados) <span class="sc">%&gt;%</span></span>
<span id="cb26-4"><a href="#cb26-4"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> n_orgao_decisao_resultados <span class="sc">/</span> n_orgao) <span class="sc">%&gt;%</span></span>
<span id="cb26-5"><a href="#cb26-5"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>, resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-6"><a href="#cb26-6"></a>  <span class="fu">filter</span>(perc <span class="sc">&gt;=</span> .<span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb26-7"><a href="#cb26-7"></a>  <span class="fu">mutate</span>(</span>
<span id="cb26-8"><a href="#cb26-8"></a>    <span class="at">orgao =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(orgao, <span class="st">"^EBSERH"</span>),</span>
<span id="cb26-9"><a href="#cb26-9"></a>                    <span class="fu">str_extract</span>(orgao, <span class="st">"[A-Z]+ . C*HU-UF</span><span class="sc">\\</span><span class="st">w+"</span>),</span>
<span id="cb26-10"><a href="#cb26-10"></a>                    <span class="fu">str_extract</span>(orgao, <span class="st">"[A-Z]+"</span>)),</span>
<span id="cb26-11"><a href="#cb26-11"></a>    <span class="at">orgao =</span> <span class="fu">if_else</span>(orgao <span class="sc">==</span> <span class="st">"A"</span>, <span class="st">"Autoridade Portuária"</span>, orgao),</span>
<span id="cb26-12"><a href="#cb26-12"></a>    <span class="at">orgao =</span> <span class="fu">reorder</span>(orgao, n_orgao_decisao_resultados)</span>
<span id="cb26-13"><a href="#cb26-13"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb26-14"><a href="#cb26-14"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> orgao, <span class="at">x =</span> n_orgao_decisao_resultados)) <span class="sc">+</span></span>
<span id="cb26-15"><a href="#cb26-15"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> cores_aep[[<span class="st">"laranja"</span>]], <span class="at">alpha =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb26-16"><a href="#cb26-16"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb26-17"><a href="#cb26-17"></a>    <span class="fu">aes</span>(<span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_orgao_decisao_resultados)),</span>
<span id="cb26-18"><a href="#cb26-18"></a>    <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">15</span>,</span>
<span id="cb26-19"><a href="#cb26-19"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]</span>
<span id="cb26-20"><a href="#cb26-20"></a>  ) <span class="sc">+</span></span>
<span id="cb26-21"><a href="#cb26-21"></a>  <span class="fu">labs</span>(</span>
<span id="cb26-22"><a href="#cb26-22"></a>    <span class="at">title =</span> <span class="st">"Quantidade de pedidos com classificação contraditória"</span>,</span>
<span id="cb26-23"><a href="#cb26-23"></a>    <span class="at">subtitle =</span> <span class="st">"Somente órgãos com taxa de classificação contraditória acima de 20%"</span>,</span>
<span id="cb26-24"><a href="#cb26-24"></a>    <span class="at">x =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb26-25"><a href="#cb26-25"></a>    <span class="at">y =</span> <span class="st">"Órgão (sigla)"</span></span>
<span id="cb26-26"><a href="#cb26-26"></a>  ) <span class="sc">+</span></span>
<span id="cb26-27"><a href="#cb26-27"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">810</span>)) <span class="sc">+</span></span>
<span id="cb26-28"><a href="#cb26-28"></a>  <span class="fu">theme</span>(</span>
<span id="cb26-29"><a href="#cb26-29"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb26-30"><a href="#cb26-30"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>)</span>
<span id="cb26-31"><a href="#cb26-31"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-26-1.png" class="img-fluid" width="960"></p>
</div>
</div>
</div>
</div>
</div>
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>pedidos_orgaos_counts <span class="ot">&lt;-</span> pedidos <span class="sc">%&gt;%</span></span>
<span id="cb27-2"><a href="#cb27-2"></a>  <span class="fu">filter</span>(orgao_abrev <span class="sc">!=</span> <span class="st">"MINFRA"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-3"><a href="#cb27-3"></a>  <span class="fu">count</span>(</span>
<span id="cb27-4"><a href="#cb27-4"></a>    orgao, orgao_abrev, decisao, resultados,</span>
<span id="cb27-5"><a href="#cb27-5"></a>    <span class="at">name =</span> <span class="st">"n_orgao_decisao_resultados"</span></span>
<span id="cb27-6"><a href="#cb27-6"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb27-7"><a href="#cb27-7"></a>  <span class="fu">add_count</span>(</span>
<span id="cb27-8"><a href="#cb27-8"></a>    orgao, orgao_abrev,</span>
<span id="cb27-9"><a href="#cb27-9"></a>    <span class="at">name =</span> <span class="st">"n_orgao"</span>,</span>
<span id="cb27-10"><a href="#cb27-10"></a>    <span class="at">wt =</span> n_orgao_decisao_resultados</span>
<span id="cb27-11"><a href="#cb27-11"></a>  )  <span class="sc">%&gt;%</span></span>
<span id="cb27-12"><a href="#cb27-12"></a>  <span class="fu">add_count</span>(</span>
<span id="cb27-13"><a href="#cb27-13"></a>    <span class="at">name =</span> <span class="st">"n_resultado_acesso_concedido"</span>,</span>
<span id="cb27-14"><a href="#cb27-14"></a>    orgao, orgao_abrev, decisao,</span>
<span id="cb27-15"><a href="#cb27-15"></a>    <span class="at">wt =</span> n_orgao_decisao_resultados</span>
<span id="cb27-16"><a href="#cb27-16"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb27-17"><a href="#cb27-17"></a>  <span class="fu">mutate</span>(<span class="at">resultados_wt =</span> <span class="fu">if_else</span>(</span>
<span id="cb27-18"><a href="#cb27-18"></a>     resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>, n_orgao_decisao_resultados, <span class="cn">NA_integer_</span></span>
<span id="cb27-19"><a href="#cb27-19"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb27-20"><a href="#cb27-20"></a>  <span class="fu">group_by</span>(orgao, orgao_abrev, decisao) <span class="sc">%&gt;%</span></span>
<span id="cb27-21"><a href="#cb27-21"></a>  <span class="fu">fill</span>(resultados_wt, <span class="at">.direction =</span> <span class="st">"updown"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb27-22"><a href="#cb27-22"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb27-23"><a href="#cb27-23"></a>  <span class="fu">mutate</span>(<span class="at">resultados_wt =</span> <span class="fu">replace_na</span>(resultados_wt, <span class="dv">0</span>))</span>
<span id="cb27-24"><a href="#cb27-24"></a></span>
<span id="cb27-25"><a href="#cb27-25"></a>total_acesso_concedido <span class="ot">&lt;-</span> <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span></span>
<span id="cb27-26"><a href="#cb27-26"></a>nao_atendidos <span class="ot">&lt;-</span> <span class="st">'Classificação contraditória'</span></span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section><section id="órgãos-agrupados-por-temas" class="level3"><h3 class="anchored" data-anchor-id="órgãos-agrupados-por-temas">Órgãos agrupados por temas</h3>
<div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist">
<li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true" href="">Pastas Ministeriais</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false" href="">Militares, PRF e PF</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-3-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-3" role="tab" aria-controls="tabset-7-3" aria-selected="false" href="">Bancos públicos e autoridades financeiras</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-4-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-4" role="tab" aria-controls="tabset-7-4" aria-selected="false" href="">Órgãos ambientais</a></li>
<li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-5-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-5" role="tab" aria-controls="tabset-7-5" aria-selected="false" href="">Top 20 | Acessos Concedidos</a></li>
</ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a></span>
<span id="cb28-2"><a href="#cb28-2"></a>pastas_ministeriais <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb28-3"><a href="#cb28-3"></a>  <span class="st">"PR"</span>,         <span class="co"># PR – Presidência da República</span></span>
<span id="cb28-4"><a href="#cb28-4"></a>  <span class="st">"SGPR"</span>,       <span class="co"># SGPR – Secretaria-Geral da Presidência da República</span></span>
<span id="cb28-5"><a href="#cb28-5"></a>  <span class="st">"SEGOV/PR"</span>,   <span class="co"># SEGOV/PR - Secretaria de Governo da Presidência da República</span></span>
<span id="cb28-6"><a href="#cb28-6"></a>  <span class="st">"VPR"</span>,        <span class="co"># VPR – Vice-Presidência da República</span></span>
<span id="cb28-7"><a href="#cb28-7"></a>  <span class="st">"GSI-PR"</span>,     <span class="co"># GSI-PR – Gabinete de Segurança Institucional da Presidência da República</span></span>
<span id="cb28-8"><a href="#cb28-8"></a>  <span class="st">"MAPA"</span>,       <span class="co"># MAPA – Ministério da Agricultura, Pecuária e Abastecimento</span></span>
<span id="cb28-9"><a href="#cb28-9"></a>  <span class="st">"MCIDADANIA"</span>, <span class="co"># MCIDADANIA - Ministério da Cidadania (Desenvolvimento Social e Esporte)</span></span>
<span id="cb28-10"><a href="#cb28-10"></a>  <span class="st">"MCOM"</span>,       <span class="co"># MCOM - Ministério das Comunicações</span></span>
<span id="cb28-11"><a href="#cb28-11"></a>  <span class="st">"MCTI"</span>,       <span class="co"># MCTI – Ministério da Ciência, Tecnologia, Inovações</span></span>
<span id="cb28-12"><a href="#cb28-12"></a>  <span class="st">"MD"</span>,         <span class="co"># MD – Ministério da Defesa</span></span>
<span id="cb28-13"><a href="#cb28-13"></a>  <span class="st">"MDR"</span>,        <span class="co"># MDR - Ministério do Desenvolvimento Regional</span></span>
<span id="cb28-14"><a href="#cb28-14"></a>  <span class="st">"ME"</span>,         <span class="co"># ME - Ministério da Economia</span></span>
<span id="cb28-15"><a href="#cb28-15"></a>  <span class="st">"MEC"</span>,        <span class="co"># MEC – Ministério da Educação</span></span>
<span id="cb28-16"><a href="#cb28-16"></a>  <span class="st">"MJSP"</span>,       <span class="co"># MJSP – Ministério da Justiça e Segurança Pública</span></span>
<span id="cb28-17"><a href="#cb28-17"></a>  <span class="st">"MMA"</span>,        <span class="co"># MMA – Ministério do Meio Ambiente</span></span>
<span id="cb28-18"><a href="#cb28-18"></a>  <span class="st">"MME"</span>,        <span class="co"># MME – Ministério de Minas e Energia</span></span>
<span id="cb28-19"><a href="#cb28-19"></a>  <span class="st">"MMFDH"</span>,      <span class="co"># MMFDH – Ministério da Mulher, da Família e dos Direitos Humanos</span></span>
<span id="cb28-20"><a href="#cb28-20"></a>  <span class="st">"MRE"</span>,        <span class="co"># MRE – Ministério das Relações Exteriores</span></span>
<span id="cb28-21"><a href="#cb28-21"></a>  <span class="st">"MS"</span>,         <span class="co"># MS – Ministério da Saúde</span></span>
<span id="cb28-22"><a href="#cb28-22"></a>  <span class="st">"MTur"</span>,        <span class="co"># MTur - Ministério do Turismo (Turismo e Cultura)</span></span>
<span id="cb28-23"><a href="#cb28-23"></a>  <span class="st">"CGU"</span></span>
<span id="cb28-24"><a href="#cb28-24"></a>)</span>
<span id="cb28-25"><a href="#cb28-25"></a></span>
<span id="cb28-26"><a href="#cb28-26"></a>pedidos_orgaos_counts <span class="sc">%&gt;%</span></span>
<span id="cb28-27"><a href="#cb28-27"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb28-28"><a href="#cb28-28"></a>  <span class="fu">filter</span>(orgao_abrev <span class="sc">%in%</span> pastas_ministeriais) <span class="sc">%&gt;%</span></span>
<span id="cb28-29"><a href="#cb28-29"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb28-30"><a href="#cb28-30"></a>    <span class="at">y =</span> n_orgao_decisao_resultados,</span>
<span id="cb28-31"><a href="#cb28-31"></a>    <span class="at">x =</span> <span class="fu">reorder</span>(orgao_abrev, resultados_wt)</span>
<span id="cb28-32"><a href="#cb28-32"></a>  )) <span class="sc">+</span></span>
<span id="cb28-33"><a href="#cb28-33"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> total_acesso_concedido)) <span class="sc">+</span></span>
<span id="cb28-34"><a href="#cb28-34"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb28-35"><a href="#cb28-35"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb28-36"><a href="#cb28-36"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> nao_atendidos)</span>
<span id="cb28-37"><a href="#cb28-37"></a>  ) <span class="sc">+</span></span>
<span id="cb28-38"><a href="#cb28-38"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb28-39"><a href="#cb28-39"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb28-40"><a href="#cb28-40"></a>    <span class="fu">aes</span>(<span class="at">color =</span> nao_atendidos, <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_orgao_decisao_resultados) <span class="sc">%&gt;%</span> <span class="fu">format</span>(<span class="at">justify =</span> <span class="st">"left"</span>)),</span>
<span id="cb28-41"><a href="#cb28-41"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb28-42"><a href="#cb28-42"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">4</span>,</span>
<span id="cb28-43"><a href="#cb28-43"></a>    <span class="at">hjust =</span> .<span class="dv">9</span></span>
<span id="cb28-44"><a href="#cb28-44"></a>  ) <span class="sc">+</span></span>
<span id="cb28-45"><a href="#cb28-45"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb28-46"><a href="#cb28-46"></a>    <span class="at">check_overlap =</span> <span class="cn">TRUE</span>,</span>
<span id="cb28-47"><a href="#cb28-47"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb28-48"><a href="#cb28-48"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb28-49"><a href="#cb28-49"></a>    <span class="fu">aes</span>(</span>
<span id="cb28-50"><a href="#cb28-50"></a>      <span class="at">y =</span> <span class="dv">820</span>,</span>
<span id="cb28-51"><a href="#cb28-51"></a>      <span class="at">x =</span> <span class="st">"MCIDADANIA"</span>,</span>
<span id="cb28-52"><a href="#cb28-52"></a>      <span class="at">label =</span> <span class="st">"Número total de</span><span class="sc">\n</span><span class="st">Acessos Concedidos</span><span class="sc">\n</span><span class="st">para este órgão"</span></span>
<span id="cb28-53"><a href="#cb28-53"></a>    )</span>
<span id="cb28-54"><a href="#cb28-54"></a>  )  <span class="sc">+</span></span>
<span id="cb28-55"><a href="#cb28-55"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb28-56"><a href="#cb28-56"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb28-57"><a href="#cb28-57"></a>    <span class="at">hjust =</span> .<span class="dv">3</span>,</span>
<span id="cb28-58"><a href="#cb28-58"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">2</span>,</span>
<span id="cb28-59"><a href="#cb28-59"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb28-60"><a href="#cb28-60"></a>    <span class="at">check_overlap =</span> T,</span>
<span id="cb28-61"><a href="#cb28-61"></a>    <span class="fu">aes</span>(</span>
<span id="cb28-62"><a href="#cb28-62"></a>      <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_resultado_acesso_concedido, <span class="at">trim =</span> F),</span>
<span id="cb28-63"><a href="#cb28-63"></a>      <span class="at">y =</span> n_resultado_acesso_concedido,</span>
<span id="cb28-64"><a href="#cb28-64"></a>      <span class="at">color =</span> total_acesso_concedido</span>
<span id="cb28-65"><a href="#cb28-65"></a>    )</span>
<span id="cb28-66"><a href="#cb28-66"></a>  ) <span class="sc">+</span></span>
<span id="cb28-67"><a href="#cb28-67"></a>  <span class="fu">geom_curve</span>(</span>
<span id="cb28-68"><a href="#cb28-68"></a>    <span class="fu">aes</span>(</span>
<span id="cb28-69"><a href="#cb28-69"></a>      <span class="at">x =</span> <span class="st">"MCIDADANIA"</span>,</span>
<span id="cb28-70"><a href="#cb28-70"></a>      <span class="at">xend =</span> <span class="st">"MCIDADANIA"</span>,</span>
<span id="cb28-71"><a href="#cb28-71"></a>      <span class="at">y =</span> <span class="dv">750</span>,</span>
<span id="cb28-72"><a href="#cb28-72"></a>      <span class="at">yend =</span> <span class="dv">510</span></span>
<span id="cb28-73"><a href="#cb28-73"></a>    ),</span>
<span id="cb28-74"><a href="#cb28-74"></a>    <span class="at">curvature =</span> .<span class="dv">3</span>,</span>
<span id="cb28-75"><a href="#cb28-75"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb28-76"><a href="#cb28-76"></a>    <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.01</span>, <span class="st">"npc"</span>))</span>
<span id="cb28-77"><a href="#cb28-77"></a>  ) <span class="sc">+</span></span>
<span id="cb28-78"><a href="#cb28-78"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb28-79"><a href="#cb28-79"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"marrom"</span>]], .<span class="dv">6</span>),</span>
<span id="cb28-80"><a href="#cb28-80"></a>    <span class="st">'Classificação contraditória'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb28-81"><a href="#cb28-81"></a>  )) <span class="sc">+</span></span>
<span id="cb28-82"><a href="#cb28-82"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb28-83"><a href="#cb28-83"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb28-84"><a href="#cb28-84"></a>    <span class="st">'Classificação contraditória'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb28-85"><a href="#cb28-85"></a>  )) <span class="sc">+</span></span>
<span id="cb28-86"><a href="#cb28-86"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb28-87"><a href="#cb28-87"></a>    <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">50</span>, <span class="dv">150</span>, <span class="dv">300</span>, <span class="dv">500</span>, <span class="dv">1000</span>, <span class="dv">1500</span>, <span class="dv">2000</span>, <span class="dv">4000</span>),</span>
<span id="cb28-88"><a href="#cb28-88"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"50"</span>, <span class="st">"150"</span>, <span class="st">"300"</span>, <span class="st">"500"</span>, <span class="st">"1k"</span>, <span class="st">"1,5k"</span>, <span class="st">"2k"</span>, <span class="st">"4k"</span>),</span>
<span id="cb28-89"><a href="#cb28-89"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2000</span>),</span>
<span id="cb28-90"><a href="#cb28-90"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb28-91"><a href="#cb28-91"></a>  ) <span class="sc">+</span></span>
<span id="cb28-92"><a href="#cb28-92"></a>  <span class="fu">theme</span>(</span>
<span id="cb28-93"><a href="#cb28-93"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb28-94"><a href="#cb28-94"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb28-95"><a href="#cb28-95"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">15</span>, .<span class="dv">95</span>),</span>
<span id="cb28-96"><a href="#cb28-96"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb28-97"><a href="#cb28-97"></a>  ) <span class="sc">+</span></span>
<span id="cb28-98"><a href="#cb28-98"></a>  <span class="fu">labs</span>(</span>
<span id="cb28-99"><a href="#cb28-99"></a>    <span class="at">title =</span> <span class="st">'Acessos concedidos classificados como "Não Atendido" pelo modelo NLP/BERT'</span>,</span>
<span id="cb28-100"><a href="#cb28-100"></a>    <span class="at">subtitle =</span> <span class="st">"Órgãos selecionados | Pastas ministeriais"</span>,</span>
<span id="cb28-101"><a href="#cb28-101"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb28-102"><a href="#cb28-102"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb28-103"><a href="#cb28-103"></a>    <span class="at">fill =</span> <span class="cn">NULL</span></span>
<span id="cb28-104"><a href="#cb28-104"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-28-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<ul>
<li>PR – Presidência da República</li>
<li>SGPR – Secretaria-Geral da Presidência da República</li>
<li>SEGOV/PR - Secretaria de Governo da Presidência da República</li>
<li>VPR – Vice-Presidência da República</li>
<li>GSI-PR – Gabinete de Segurança Institucional da Presidência da República</li>
<li>MAPA – Ministério da Agricultura, Pecuária e Abastecimento</li>
<li>MCIDADANIA - Ministério da Cidadania (Desenvolvimento Social e Esporte)</li>
<li>MCOM - Ministério das Comunicações</li>
<li>MCTI – Ministério da Ciência, Tecnologia, Inovações</li>
<li>MD – Ministério da Defesa</li>
<li>MDR - Ministério do Desenvolvimento Regional</li>
<li>ME - Ministério da Economia</li>
<li>MEC – Ministério da Educação</li>
<li>MJSP – Ministério da Justiça e Segurança Pública</li>
<li>MMA – Ministério do Meio Ambiente</li>
<li>MME – Ministério de Minas e Energia</li>
<li>MMFDH – Ministério da Mulher, da Família e dos Direitos Humanos</li>
<li>MRE – Ministério das Relações Exteriores</li>
<li>MS – Ministério da Saúde</li>
<li>MTur - Ministério do Turismo (Turismo e Cultura)</li>
<li>CGU - Controladoria Geral da união</li>
</ul>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a></span>
<span id="cb29-2"><a href="#cb29-2"></a>militares <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb29-3"><a href="#cb29-3"></a>  <span class="st">"CEX"</span>,    <span class="co"># CEX – Comando do Exército</span></span>
<span id="cb29-4"><a href="#cb29-4"></a>  <span class="st">"CMAR"</span>,   <span class="co"># CMAR – Comando da Marinha</span></span>
<span id="cb29-5"><a href="#cb29-5"></a>  <span class="st">"COMAER"</span>, <span class="co"># COMAER – Comando da Aeronáutica</span></span>
<span id="cb29-6"><a href="#cb29-6"></a>  <span class="st">"IMBEL"</span>,  <span class="co"># IMBEL – Indústria de Material Bélico do Brasil</span></span>
<span id="cb29-7"><a href="#cb29-7"></a>  <span class="st">"DPRF"</span>,   <span class="co"># DPRF – Departamento de Polícia Rodoviária Federal</span></span>
<span id="cb29-8"><a href="#cb29-8"></a>  <span class="st">"DPF"</span>,    <span class="co"># DPF – Departamento de Polícia Federal</span></span>
<span id="cb29-9"><a href="#cb29-9"></a>  <span class="st">"ESG"</span>,    <span class="co"># ESG – Escola Superior de Guerra</span></span>
<span id="cb29-10"><a href="#cb29-10"></a>  <span class="st">"HFA"</span>     <span class="co"># HFA – Hospital das Forças Armadas</span></span>
<span id="cb29-11"><a href="#cb29-11"></a>)</span>
<span id="cb29-12"><a href="#cb29-12"></a></span>
<span id="cb29-13"><a href="#cb29-13"></a>pedidos_orgaos_counts <span class="sc">%&gt;%</span></span>
<span id="cb29-14"><a href="#cb29-14"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-15"><a href="#cb29-15"></a>  <span class="fu">filter</span>(orgao_abrev <span class="sc">%in%</span> militares) <span class="sc">%&gt;%</span></span>
<span id="cb29-16"><a href="#cb29-16"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb29-17"><a href="#cb29-17"></a>    <span class="at">y =</span> n_orgao_decisao_resultados,</span>
<span id="cb29-18"><a href="#cb29-18"></a>    <span class="at">x =</span> <span class="fu">reorder</span>(orgao_abrev, resultados_wt)</span>
<span id="cb29-19"><a href="#cb29-19"></a>  )) <span class="sc">+</span></span>
<span id="cb29-20"><a href="#cb29-20"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> total_acesso_concedido)) <span class="sc">+</span></span>
<span id="cb29-21"><a href="#cb29-21"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb29-22"><a href="#cb29-22"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb29-23"><a href="#cb29-23"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> nao_atendidos)</span>
<span id="cb29-24"><a href="#cb29-24"></a>  ) <span class="sc">+</span></span>
<span id="cb29-25"><a href="#cb29-25"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb29-26"><a href="#cb29-26"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb29-27"><a href="#cb29-27"></a>    <span class="fu">aes</span>(<span class="at">color =</span> nao_atendidos, <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_orgao_decisao_resultados) <span class="sc">%&gt;%</span> <span class="fu">format</span>(<span class="at">justify =</span> <span class="st">"left"</span>)),</span>
<span id="cb29-28"><a href="#cb29-28"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb29-29"><a href="#cb29-29"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">4</span></span>
<span id="cb29-30"><a href="#cb29-30"></a>  ) <span class="sc">+</span></span>
<span id="cb29-31"><a href="#cb29-31"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb29-32"><a href="#cb29-32"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb29-33"><a href="#cb29-33"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">2</span>,</span>
<span id="cb29-34"><a href="#cb29-34"></a>    <span class="at">check_overlap =</span> T,</span>
<span id="cb29-35"><a href="#cb29-35"></a>    <span class="fu">aes</span>(</span>
<span id="cb29-36"><a href="#cb29-36"></a>      <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_resultado_acesso_concedido, <span class="at">trim =</span> F),</span>
<span id="cb29-37"><a href="#cb29-37"></a>      <span class="at">y =</span> n_resultado_acesso_concedido,</span>
<span id="cb29-38"><a href="#cb29-38"></a>      <span class="at">color =</span> total_acesso_concedido</span>
<span id="cb29-39"><a href="#cb29-39"></a>    )</span>
<span id="cb29-40"><a href="#cb29-40"></a>  ) <span class="sc">+</span></span>
<span id="cb29-41"><a href="#cb29-41"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb29-42"><a href="#cb29-42"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"marrom"</span>]], .<span class="dv">6</span>),</span>
<span id="cb29-43"><a href="#cb29-43"></a>    <span class="st">'Classificação contraditória'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb29-44"><a href="#cb29-44"></a>  )) <span class="sc">+</span></span>
<span id="cb29-45"><a href="#cb29-45"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb29-46"><a href="#cb29-46"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb29-47"><a href="#cb29-47"></a>    <span class="st">'Classificação contraditória'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb29-48"><a href="#cb29-48"></a>  )) <span class="sc">+</span></span>
<span id="cb29-49"><a href="#cb29-49"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb29-50"><a href="#cb29-50"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">400</span>),</span>
<span id="cb29-51"><a href="#cb29-51"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb29-52"><a href="#cb29-52"></a>  ) <span class="sc">+</span></span>
<span id="cb29-53"><a href="#cb29-53"></a>  <span class="fu">theme</span>(</span>
<span id="cb29-54"><a href="#cb29-54"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb29-55"><a href="#cb29-55"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(),</span>
<span id="cb29-56"><a href="#cb29-56"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">15</span>, .<span class="dv">95</span>),</span>
<span id="cb29-57"><a href="#cb29-57"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb29-58"><a href="#cb29-58"></a>  ) <span class="sc">+</span></span>
<span id="cb29-59"><a href="#cb29-59"></a>  <span class="fu">labs</span>(</span>
<span id="cb29-60"><a href="#cb29-60"></a>    <span class="at">title =</span> <span class="st">'Acessos concedidos classificados como "Não Atendido" pelo modelo NLP/BERT'</span>,</span>
<span id="cb29-61"><a href="#cb29-61"></a>    <span class="at">subtitle =</span> <span class="st">"Órgãos selecionados | Militares e Polícias"</span>,</span>
<span id="cb29-62"><a href="#cb29-62"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb29-63"><a href="#cb29-63"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb29-64"><a href="#cb29-64"></a>    <span class="at">fill =</span> <span class="cn">NULL</span></span>
<span id="cb29-65"><a href="#cb29-65"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-29-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<ul>
<li>CMAR - Comando da Marinha</li>
<li>COMAER - Comando da Aeronáutica</li>
<li>CEX - Comando do Exército</li>
<li>ESG – Escola Superior de Guerra</li>
<li>IMBEL – Indústria de Material Bélico do Brasil</li>
<li>DPRF – Departamento de Polícia Rodoviária Federal</li>
<li>DPF – Departamento de Polícia Federal</li>
<li>HFA – Hospital das Forças Armadas</li>
</ul>
</div>
<div id="tabset-7-3" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-3-tab">
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>autoridades_financ <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb30-2"><a href="#cb30-2"></a>  <span class="st">"BACEN"</span>,    <span class="co"># BACEN – Banco Central do Brasil</span></span>
<span id="cb30-3"><a href="#cb30-3"></a>  <span class="st">"BB"</span>,       <span class="co"># BB Tecnologia e Serviços</span></span>
<span id="cb30-4"><a href="#cb30-4"></a>  <span class="st">"BB-TEC"</span>,   <span class="co"># BB Tecnologia e Serviços</span></span>
<span id="cb30-5"><a href="#cb30-5"></a>  <span class="st">"BBTur V"</span>,  <span class="co"># BBTur Viagens e Turismo Ltda</span></span>
<span id="cb30-6"><a href="#cb30-6"></a>  <span class="st">"BNDES"</span>,    <span class="co"># BNDES – Banco Nacional de Desenvolvimento Econômico e Social</span></span>
<span id="cb30-7"><a href="#cb30-7"></a>  <span class="st">"CADE"</span>,     <span class="co"># CADE – Conselho Administrativo de Defesa Econômica</span></span>
<span id="cb30-8"><a href="#cb30-8"></a>  <span class="st">"CMB"</span>,      <span class="co"># CMB – Casa da Moeda do Brasil</span></span>
<span id="cb30-9"><a href="#cb30-9"></a>  <span class="st">"CVM"</span>,      <span class="co"># CVM – Comissão de Valores Mobiliários</span></span>
<span id="cb30-10"><a href="#cb30-10"></a>  <span class="st">"CEF"</span>       <span class="co"># CEF - Caixa Econômica Federal</span></span>
<span id="cb30-11"><a href="#cb30-11"></a>)</span>
<span id="cb30-12"><a href="#cb30-12"></a></span>
<span id="cb30-13"><a href="#cb30-13"></a>pedidos_orgaos_counts <span class="sc">%&gt;%</span></span>
<span id="cb30-14"><a href="#cb30-14"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb30-15"><a href="#cb30-15"></a>  <span class="fu">filter</span>(orgao_abrev <span class="sc">%in%</span> autoridades_financ) <span class="sc">%&gt;%</span></span>
<span id="cb30-16"><a href="#cb30-16"></a>  <span class="fu">add_row</span>(</span>
<span id="cb30-17"><a href="#cb30-17"></a>    <span class="at">orgao =</span> <span class="fu">rep</span>(<span class="st">"CEF - Caixa Econômica Federal"</span>, <span class="dv">3</span>),</span>
<span id="cb30-18"><a href="#cb30-18"></a>    <span class="at">orgao_abrev =</span> <span class="fu">rep</span>(<span class="st">"CEF"</span>, <span class="dv">3</span>),</span>
<span id="cb30-19"><a href="#cb30-19"></a>    <span class="at">decisao =</span> <span class="st">"Acesso Concedido"</span>,</span>
<span id="cb30-20"><a href="#cb30-20"></a>    <span class="at">resultados =</span> <span class="fu">c</span>(<span class="st">"Atendido"</span>, <span class="st">"Não Atendido"</span>, <span class="st">"Parcialmente Atendido"</span>),</span>
<span id="cb30-21"><a href="#cb30-21"></a>    <span class="at">n_orgao_decisao_resultados =</span> <span class="dv">0</span>,</span>
<span id="cb30-22"><a href="#cb30-22"></a>    <span class="at">n_resultado_acesso_concedido =</span> <span class="dv">0</span>,</span>
<span id="cb30-23"><a href="#cb30-23"></a>    <span class="at">resultados_wt =</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb30-24"><a href="#cb30-24"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb30-25"><a href="#cb30-25"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb30-26"><a href="#cb30-26"></a>    <span class="at">y =</span> n_orgao_decisao_resultados,</span>
<span id="cb30-27"><a href="#cb30-27"></a>    <span class="at">x =</span> <span class="fu">reorder</span>(orgao_abrev, resultados_wt, sum)</span>
<span id="cb30-28"><a href="#cb30-28"></a>  )) <span class="sc">+</span></span>
<span id="cb30-29"><a href="#cb30-29"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> total_acesso_concedido)) <span class="sc">+</span></span>
<span id="cb30-30"><a href="#cb30-30"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb30-31"><a href="#cb30-31"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb30-32"><a href="#cb30-32"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> nao_atendidos)</span>
<span id="cb30-33"><a href="#cb30-33"></a>  ) <span class="sc">+</span></span>
<span id="cb30-34"><a href="#cb30-34"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb30-35"><a href="#cb30-35"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb30-36"><a href="#cb30-36"></a>    <span class="fu">aes</span>(<span class="at">color =</span> nao_atendidos, <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_orgao_decisao_resultados) <span class="sc">%&gt;%</span> <span class="fu">format</span>(<span class="at">justify =</span> <span class="st">"left"</span>)),</span>
<span id="cb30-37"><a href="#cb30-37"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb30-38"><a href="#cb30-38"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">4</span></span>
<span id="cb30-39"><a href="#cb30-39"></a>  ) <span class="sc">+</span></span>
<span id="cb30-40"><a href="#cb30-40"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb30-41"><a href="#cb30-41"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb30-42"><a href="#cb30-42"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">2</span>,</span>
<span id="cb30-43"><a href="#cb30-43"></a>    <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">5</span>,</span>
<span id="cb30-44"><a href="#cb30-44"></a>    <span class="at">check_overlap =</span> T,</span>
<span id="cb30-45"><a href="#cb30-45"></a>    <span class="fu">aes</span>(</span>
<span id="cb30-46"><a href="#cb30-46"></a>      <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_resultado_acesso_concedido, <span class="at">trim =</span> F),</span>
<span id="cb30-47"><a href="#cb30-47"></a>      <span class="at">y =</span> n_resultado_acesso_concedido,</span>
<span id="cb30-48"><a href="#cb30-48"></a>      <span class="at">color =</span> total_acesso_concedido</span>
<span id="cb30-49"><a href="#cb30-49"></a>    )</span>
<span id="cb30-50"><a href="#cb30-50"></a>  ) <span class="sc">+</span></span>
<span id="cb30-51"><a href="#cb30-51"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb30-52"><a href="#cb30-52"></a>    <span class="at">check_overlap =</span> <span class="cn">TRUE</span>,</span>
<span id="cb30-53"><a href="#cb30-53"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb30-54"><a href="#cb30-54"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb30-55"><a href="#cb30-55"></a>    <span class="fu">aes</span>(</span>
<span id="cb30-56"><a href="#cb30-56"></a>      <span class="at">y =</span> <span class="dv">250</span>,</span>
<span id="cb30-57"><a href="#cb30-57"></a>      <span class="at">x =</span> <span class="st">"CEF"</span>,</span>
<span id="cb30-58"><a href="#cb30-58"></a>      <span class="at">label =</span> <span class="st">"CEF não divulga</span><span class="sc">\n</span><span class="st">nenhum pedido</span><span class="sc">\n</span><span class="st">de acesso a</span><span class="sc">\n</span><span class="st">informação"</span></span>
<span id="cb30-59"><a href="#cb30-59"></a>    )</span>
<span id="cb30-60"><a href="#cb30-60"></a>  ) <span class="sc">+</span></span>
<span id="cb30-61"><a href="#cb30-61"></a>  <span class="fu">geom_curve</span>(</span>
<span id="cb30-62"><a href="#cb30-62"></a>    <span class="at">curvature =</span> <span class="dv">0</span>,</span>
<span id="cb30-63"><a href="#cb30-63"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb30-64"><a href="#cb30-64"></a>    <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">"mm"</span>)),</span>
<span id="cb30-65"><a href="#cb30-65"></a>    <span class="fu">aes</span>(</span>
<span id="cb30-66"><a href="#cb30-66"></a>      <span class="at">x =</span> <span class="st">'CEF'</span>, <span class="at">xend =</span> <span class="st">"CEF"</span>,</span>
<span id="cb30-67"><a href="#cb30-67"></a>      <span class="at">y =</span> <span class="dv">145</span>, <span class="at">yend =</span> <span class="dv">50</span></span>
<span id="cb30-68"><a href="#cb30-68"></a>    )</span>
<span id="cb30-69"><a href="#cb30-69"></a>  ) <span class="sc">+</span></span>
<span id="cb30-70"><a href="#cb30-70"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb30-71"><a href="#cb30-71"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"marrom"</span>]], .<span class="dv">6</span>),</span>
<span id="cb30-72"><a href="#cb30-72"></a>    <span class="st">'Classificação contraditória'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb30-73"><a href="#cb30-73"></a>  )) <span class="sc">+</span></span>
<span id="cb30-74"><a href="#cb30-74"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb30-75"><a href="#cb30-75"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb30-76"><a href="#cb30-76"></a>    <span class="st">'Classificação contraditória'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb30-77"><a href="#cb30-77"></a>  )) <span class="sc">+</span></span>
<span id="cb30-78"><a href="#cb30-78"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb30-79"><a href="#cb30-79"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1100</span>),</span>
<span id="cb30-80"><a href="#cb30-80"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb30-81"><a href="#cb30-81"></a>  ) <span class="sc">+</span></span>
<span id="cb30-82"><a href="#cb30-82"></a>  <span class="fu">theme</span>(</span>
<span id="cb30-83"><a href="#cb30-83"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb30-84"><a href="#cb30-84"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(),</span>
<span id="cb30-85"><a href="#cb30-85"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">15</span>, .<span class="dv">9</span>),</span>
<span id="cb30-86"><a href="#cb30-86"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb30-87"><a href="#cb30-87"></a>  ) <span class="sc">+</span></span>
<span id="cb30-88"><a href="#cb30-88"></a>  <span class="fu">labs</span>(</span>
<span id="cb30-89"><a href="#cb30-89"></a>    <span class="at">title =</span> <span class="st">'Acessos concedidos classificados como "Não Atendido" pelo modelo NLP/BERT'</span>,</span>
<span id="cb30-90"><a href="#cb30-90"></a>    <span class="at">subtitle =</span> <span class="st">"Órgãos selecionados | Bancos públicos e autoridades financeiras"</span>,</span>
<span id="cb30-91"><a href="#cb30-91"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb30-92"><a href="#cb30-92"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb30-93"><a href="#cb30-93"></a>    <span class="at">fill =</span> <span class="cn">NULL</span></span>
<span id="cb30-94"><a href="#cb30-94"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-30-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<ul>
<li>BACEN – Banco Central do Brasil</li>
<li>BB Tecnologia e Serviços</li>
<li>BB Tecnologia e Serviços</li>
<li>BBTur Viagens e Turismo Ltda</li>
<li>BNDES – Banco Nacional de Desenvolvimento Econômico e Social</li>
<li>CADE – Conselho Administrativo de Defesa Econômica</li>
<li>CMB – Casa da Moeda do Brasil</li>
<li>CVM – Comissão de Valores Mobiliários</li>
<li>CEF - Caixa Econômica Federal</li>
</ul>
</div>
<div id="tabset-7-4" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-4-tab">
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>orgaos_ambientais <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb31-2"><a href="#cb31-2"></a>  <span class="st">"MMA"</span>,</span>
<span id="cb31-3"><a href="#cb31-3"></a>  <span class="st">"FUNAI"</span>,</span>
<span id="cb31-4"><a href="#cb31-4"></a>  <span class="st">"ICMBio"</span>,</span>
<span id="cb31-5"><a href="#cb31-5"></a>  <span class="st">"IBAMA"</span>,</span>
<span id="cb31-6"><a href="#cb31-6"></a>  <span class="st">"INCRA"</span>,</span>
<span id="cb31-7"><a href="#cb31-7"></a>  <span class="st">"FCP"</span>,</span>
<span id="cb31-8"><a href="#cb31-8"></a>  <span class="st">"INPE-MCT"</span>,</span>
<span id="cb31-9"><a href="#cb31-9"></a>  <span class="st">"INPA"</span></span>
<span id="cb31-10"><a href="#cb31-10"></a>)</span>
<span id="cb31-11"><a href="#cb31-11"></a></span>
<span id="cb31-12"><a href="#cb31-12"></a>pedidos_orgaos_counts <span class="sc">%&gt;%</span></span>
<span id="cb31-13"><a href="#cb31-13"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb31-14"><a href="#cb31-14"></a>  <span class="fu">filter</span>(orgao_abrev <span class="sc">%in%</span> orgaos_ambientais) <span class="sc">%&gt;%</span></span>
<span id="cb31-15"><a href="#cb31-15"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb31-16"><a href="#cb31-16"></a>    <span class="at">y =</span> n_orgao_decisao_resultados,</span>
<span id="cb31-17"><a href="#cb31-17"></a>    <span class="at">x =</span> <span class="fu">reorder</span>(orgao_abrev, resultados_wt)</span>
<span id="cb31-18"><a href="#cb31-18"></a>  )) <span class="sc">+</span></span>
<span id="cb31-19"><a href="#cb31-19"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> total_acesso_concedido)) <span class="sc">+</span></span>
<span id="cb31-20"><a href="#cb31-20"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb31-21"><a href="#cb31-21"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb31-22"><a href="#cb31-22"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> nao_atendidos)</span>
<span id="cb31-23"><a href="#cb31-23"></a>  ) <span class="sc">+</span></span>
<span id="cb31-24"><a href="#cb31-24"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb31-25"><a href="#cb31-25"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb31-26"><a href="#cb31-26"></a>    <span class="fu">aes</span>(<span class="at">color =</span> nao_atendidos, <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_orgao_decisao_resultados) <span class="sc">%&gt;%</span> <span class="fu">format</span>(<span class="at">justify =</span> <span class="st">"left"</span>)),</span>
<span id="cb31-27"><a href="#cb31-27"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb31-28"><a href="#cb31-28"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">4</span></span>
<span id="cb31-29"><a href="#cb31-29"></a>  ) <span class="sc">+</span></span>
<span id="cb31-30"><a href="#cb31-30"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb31-31"><a href="#cb31-31"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb31-32"><a href="#cb31-32"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">2</span>,</span>
<span id="cb31-33"><a href="#cb31-33"></a>    <span class="at">check_overlap =</span> T,</span>
<span id="cb31-34"><a href="#cb31-34"></a>    <span class="fu">aes</span>(</span>
<span id="cb31-35"><a href="#cb31-35"></a>      <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_resultado_acesso_concedido, <span class="at">trim =</span> F),</span>
<span id="cb31-36"><a href="#cb31-36"></a>      <span class="at">y =</span> n_resultado_acesso_concedido,</span>
<span id="cb31-37"><a href="#cb31-37"></a>      <span class="at">color =</span> total_acesso_concedido</span>
<span id="cb31-38"><a href="#cb31-38"></a>    )</span>
<span id="cb31-39"><a href="#cb31-39"></a>  ) <span class="sc">+</span></span>
<span id="cb31-40"><a href="#cb31-40"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb31-41"><a href="#cb31-41"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"marrom"</span>]], .<span class="dv">6</span>),</span>
<span id="cb31-42"><a href="#cb31-42"></a>    <span class="st">'Pedidos com decisão "Acesso Concedido" classificados como "Não Atendido" (BERT)'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb31-43"><a href="#cb31-43"></a>  )) <span class="sc">+</span></span>
<span id="cb31-44"><a href="#cb31-44"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb31-45"><a href="#cb31-45"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb31-46"><a href="#cb31-46"></a>    <span class="st">'Pedidos com decisão "Acesso Concedido" classificados como "Não Atendido" (BERT)'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb31-47"><a href="#cb31-47"></a>  )) <span class="sc">+</span></span>
<span id="cb31-48"><a href="#cb31-48"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb31-49"><a href="#cb31-49"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2300</span>),</span>
<span id="cb31-50"><a href="#cb31-50"></a>    <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">50</span>, <span class="dv">300</span>, <span class="dv">1000</span>, <span class="dv">1500</span>, <span class="dv">2000</span>),</span>
<span id="cb31-51"><a href="#cb31-51"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"0"</span>, <span class="st">"50"</span>, <span class="st">"300"</span>, <span class="st">"1k"</span>, <span class="st">"1,5k"</span>, <span class="st">"2k"</span>),</span>
<span id="cb31-52"><a href="#cb31-52"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb31-53"><a href="#cb31-53"></a>  ) <span class="sc">+</span></span>
<span id="cb31-54"><a href="#cb31-54"></a>  <span class="fu">theme</span>(</span>
<span id="cb31-55"><a href="#cb31-55"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb31-56"><a href="#cb31-56"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(),</span>
<span id="cb31-57"><a href="#cb31-57"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">15</span>, .<span class="dv">95</span>),</span>
<span id="cb31-58"><a href="#cb31-58"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb31-59"><a href="#cb31-59"></a>  ) <span class="sc">+</span></span>
<span id="cb31-60"><a href="#cb31-60"></a>  <span class="fu">labs</span>(</span>
<span id="cb31-61"><a href="#cb31-61"></a>    <span class="at">title =</span> <span class="st">'Acessos concedidos classificados como "Não Atendido" pelo modelo NLP/BERT'</span>,</span>
<span id="cb31-62"><a href="#cb31-62"></a>    <span class="at">subtitle =</span> <span class="st">"Órgãos selecionados | Ambientais"</span>,</span>
<span id="cb31-63"><a href="#cb31-63"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb31-64"><a href="#cb31-64"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb31-65"><a href="#cb31-65"></a>    <span class="at">fill =</span> <span class="cn">NULL</span></span>
<span id="cb31-66"><a href="#cb31-66"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-31-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<ul>
<li>MMA – Ministério do Meio Ambient</li>
<li>FUNAI – Fundação Nacional do Índio</li>
<li>IBAMA – Instituto Brasileiro do Meio Ambiente e dos Recursos Naturais Renováveis</li>
<li>ICMBio – Instituto Chico Mendes de Conservação da Biodiversidade</li>
<li>INCRA – Instituto Nacional de Colonização e Reforma Agrária</li>
<li>INPA – Instituto Nacional de Pesquisas da Amazônia</li>
<li>INPE-MCT – Instituto Nacional de Pesquisas Espaciais</li>
<li>FCP – Fundação Cultural Palmares</li>
</ul>
</div>
<div id="tabset-7-5" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-5-tab">
<div class="cell">
<details><summary>Código</summary><div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1"></a>pedidos_orgaos_counts <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="#cb32-2"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="#cb32-3"></a>  <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-4"><a href="#cb32-4"></a>  <span class="fu">group_by</span>(orgao, n_resultado_acesso_concedido) <span class="sc">%&gt;%</span></span>
<span id="cb32-5"><a href="#cb32-5"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb32-6"><a href="#cb32-6"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb32-7"><a href="#cb32-7"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> n_resultado_acesso_concedido, <span class="at">n =</span> <span class="dv">20</span>) <span class="sc">%&gt;%</span></span>
<span id="cb32-8"><a href="#cb32-8"></a>  <span class="fu">unnest</span>(data) <span class="sc">%&gt;%</span></span>
<span id="cb32-9"><a href="#cb32-9"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(orgao_abrev, resultados_wt))) <span class="sc">+</span></span>
<span id="cb32-10"><a href="#cb32-10"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> n_resultado_acesso_concedido, <span class="at">fill =</span> total_acesso_concedido)) <span class="sc">+</span></span>
<span id="cb32-11"><a href="#cb32-11"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> resultados_wt, <span class="at">fill =</span> nao_atendidos)) <span class="sc">+</span></span>
<span id="cb32-12"><a href="#cb32-12"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb32-13"><a href="#cb32-13"></a>    <span class="fu">aes</span>(</span>
<span id="cb32-14"><a href="#cb32-14"></a>      <span class="at">color =</span> nao_atendidos,</span>
<span id="cb32-15"><a href="#cb32-15"></a>      <span class="at">y =</span> n_orgao_decisao_resultados,</span>
<span id="cb32-16"><a href="#cb32-16"></a>      <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_orgao_decisao_resultados) <span class="sc">%&gt;%</span> <span class="fu">format</span>(<span class="at">justify =</span> <span class="st">"left"</span>)</span>
<span id="cb32-17"><a href="#cb32-17"></a>    ),</span>
<span id="cb32-18"><a href="#cb32-18"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb32-19"><a href="#cb32-19"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">4</span>,</span>
<span id="cb32-20"><a href="#cb32-20"></a>    <span class="at">hjust =</span> .<span class="dv">9</span></span>
<span id="cb32-21"><a href="#cb32-21"></a>  ) <span class="sc">+</span></span>
<span id="cb32-22"><a href="#cb32-22"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb32-23"><a href="#cb32-23"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb32-24"><a href="#cb32-24"></a>    <span class="at">hjust =</span> .<span class="dv">3</span>,</span>
<span id="cb32-25"><a href="#cb32-25"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">2</span>,</span>
<span id="cb32-26"><a href="#cb32-26"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb32-27"><a href="#cb32-27"></a>    <span class="at">check_overlap =</span> T,</span>
<span id="cb32-28"><a href="#cb32-28"></a>    <span class="fu">aes</span>(</span>
<span id="cb32-29"><a href="#cb32-29"></a>      <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_resultado_acesso_concedido, <span class="at">trim =</span> F),</span>
<span id="cb32-30"><a href="#cb32-30"></a>      <span class="at">y =</span> n_resultado_acesso_concedido,</span>
<span id="cb32-31"><a href="#cb32-31"></a>      <span class="at">color =</span> total_acesso_concedido</span>
<span id="cb32-32"><a href="#cb32-32"></a>    )</span>
<span id="cb32-33"><a href="#cb32-33"></a>  ) <span class="sc">+</span></span>
<span id="cb32-34"><a href="#cb32-34"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb32-35"><a href="#cb32-35"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"marrom"</span>]], .<span class="dv">6</span>),</span>
<span id="cb32-36"><a href="#cb32-36"></a>    <span class="st">'Pedidos com decisão "Acesso Concedido" classificados como "Não Atendido" (BERT)'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb32-37"><a href="#cb32-37"></a>  )) <span class="sc">+</span></span>
<span id="cb32-38"><a href="#cb32-38"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb32-39"><a href="#cb32-39"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb32-40"><a href="#cb32-40"></a>    <span class="st">'Pedidos com decisão "Acesso Concedido" classificados como "Não Atendido" (BERT)'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb32-41"><a href="#cb32-41"></a>  )) <span class="sc">+</span></span>
<span id="cb32-42"><a href="#cb32-42"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb32-43"><a href="#cb32-43"></a>    <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">250</span>, <span class="dv">500</span>, <span class="dv">1000</span>, <span class="dv">1500</span>, <span class="dv">2000</span>, <span class="dv">4000</span>),</span>
<span id="cb32-44"><a href="#cb32-44"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"250"</span>, <span class="st">"500"</span>, <span class="st">"1k"</span>, <span class="st">"1,5k"</span>, <span class="st">"2k"</span>, <span class="st">"4k"</span>),</span>
<span id="cb32-45"><a href="#cb32-45"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5000</span>),</span>
<span id="cb32-46"><a href="#cb32-46"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb32-47"><a href="#cb32-47"></a>  ) <span class="sc">+</span></span>
<span id="cb32-48"><a href="#cb32-48"></a>  <span class="fu">theme</span>(</span>
<span id="cb32-49"><a href="#cb32-49"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb32-50"><a href="#cb32-50"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb32-51"><a href="#cb32-51"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">35</span>, .<span class="dv">9</span>),</span>
<span id="cb32-52"><a href="#cb32-52"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb32-53"><a href="#cb32-53"></a>  ) <span class="sc">+</span></span>
<span id="cb32-54"><a href="#cb32-54"></a>  <span class="fu">labs</span>(</span>
<span id="cb32-55"><a href="#cb32-55"></a>    <span class="at">title =</span> <span class="st">'Acessos concedidos classificados como "Não Atendido" pelo modelo NLP/BERT'</span>,</span>
<span id="cb32-56"><a href="#cb32-56"></a>    <span class="at">subtitle =</span> <span class="st">"Órgãos selecionados | 20 primeiros órgãos em número de Acessos Concedido"</span>,</span>
<span id="cb32-57"><a href="#cb32-57"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb32-58"><a href="#cb32-58"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb32-59"><a href="#cb32-59"></a>    <span class="at">fill =</span> <span class="cn">NULL</span></span>
<span id="cb32-60"><a href="#cb32-60"></a>  )</span></code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<p><img src="04-atendimento-lai-vs-decisoes_files/figure-html/unnamed-chunk-32-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<ul>
<li>ANVISA – Agência Nacional de Vigilância Sanitária</li>
<li>FUNAI – Fundação Nacional do Índio</li>
<li>INEP – Instituto Nacional de Estudos e Pesquisas Educacionais Anísio Teixeira</li>
<li>MEC – Ministério da Educação</li>
<li>ME - Ministério da Economia</li>
<li>INSS – Instituto Nacional do Seguro Social</li>
<li>MS – Ministério da Saúde</li>
<li>MAPA – Ministério da Agricultura, Pecuária e Abastecimento</li>
<li>PETROBRAS – Petróleo Brasileiro S.A.</li>
<li>BACEN – Banco Central do Brasil</li>
<li>ANEEL – Agência Nacional de Energia Elétrica</li>
<li>SGPR – Secretaria-Geral da Presidência da República</li>
<li>CGU – Controladoria-Geral da União</li>
<li>DNIT – Departamento Nacional de Infraestrutura de Transportes</li>
<li>MCIDADANIA - Ministério da Cidadania (Desenvolvimento Social e Esporte)</li>
<li>SUSEP – Superintendência de Seguros Privados</li>
<li>MDR - Ministério do Desenvolvimento Regional</li>
<li>ANP – Agência Nacional do Petróleo, Gás Natural e Biocombustíveis</li>
<li>BNDES – Banco Nacional de Desenvolvimento Econômico e Social</li>
<li>INMETRO – Instituto Nacional de Metrologia, Qualidade e Tecnologia</li>
</ul>
</div>
</div>
</div>
<!-- -->

</section></section></main><!-- /main column --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } 
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copiada");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Código fonte</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb33" data-shortcodes="false"><pre class="sourceCode numberSource markdown number-lines code-with-copy"><code class="sourceCode markdown"><span id="cb33-1"><a href="#cb33-1"></a><span class="co">---</span></span>
<span id="cb33-2"><a href="#cb33-2"></a><span class="an">title:</span><span class="co"> "Atendimento da LAI - Órgãos do governo Federal"</span></span>
<span id="cb33-3"><a href="#cb33-3"></a><span class="an">lang:</span><span class="co"> pt-BR</span></span>
<span id="cb33-4"><a href="#cb33-4"></a><span class="an">format:</span></span>
<span id="cb33-5"><a href="#cb33-5"></a><span class="co">  html:</span></span>
<span id="cb33-6"><a href="#cb33-6"></a><span class="co">    html-math-method: katex</span></span>
<span id="cb33-7"><a href="#cb33-7"></a><span class="co">    css: style.css</span></span>
<span id="cb33-8"><a href="#cb33-8"></a><span class="co">    anchor-sections: true</span></span>
<span id="cb33-9"><a href="#cb33-9"></a><span class="co">    code-fold: true</span></span>
<span id="cb33-10"><a href="#cb33-10"></a><span class="co">    code-tools: true</span></span>
<span id="cb33-11"><a href="#cb33-11"></a><span class="co">    code-link: true</span></span>
<span id="cb33-12"><a href="#cb33-12"></a><span class="co">    code-line-numbers: true</span></span>
<span id="cb33-13"><a href="#cb33-13"></a><span class="co">    code-summary: "Código"</span></span>
<span id="cb33-14"><a href="#cb33-14"></a><span class="co">    toc: true</span></span>
<span id="cb33-15"><a href="#cb33-15"></a><span class="co">    toc-title: "Índice"</span></span>
<span id="cb33-16"><a href="#cb33-16"></a><span class="co">    toc-depth: 4</span></span>
<span id="cb33-17"><a href="#cb33-17"></a><span class="co">    toc-float: false</span></span>
<span id="cb33-18"><a href="#cb33-18"></a><span class="co">    toc-collapsed: false</span></span>
<span id="cb33-19"><a href="#cb33-19"></a><span class="co">    footnotes-hover: true</span></span>
<span id="cb33-20"><a href="#cb33-20"></a><span class="co">    smooth-scroll: true</span></span>
<span id="cb33-21"><a href="#cb33-21"></a><span class="co">    fig-width: 10</span></span>
<span id="cb33-22"><a href="#cb33-22"></a><span class="co">    fig-height: 7</span></span>
<span id="cb33-23"><a href="#cb33-23"></a><span class="co">    search: true</span></span>
<span id="cb33-24"><a href="#cb33-24"></a><span class="co">    theme:</span></span>
<span id="cb33-25"><a href="#cb33-25"></a><span class="co">          light: flatly</span></span>
<span id="cb33-26"><a href="#cb33-26"></a><span class="co">          dark: darkly</span></span>
<span id="cb33-27"><a href="#cb33-27"></a><span class="an">knitr:</span></span>
<span id="cb33-28"><a href="#cb33-28"></a><span class="co">  opts_chunk:</span></span>
<span id="cb33-29"><a href="#cb33-29"></a><span class="co">    echo: true</span></span>
<span id="cb33-30"><a href="#cb33-30"></a><span class="co">    collapse: true</span></span>
<span id="cb33-31"><a href="#cb33-31"></a><span class="co">    message: false</span></span>
<span id="cb33-32"><a href="#cb33-32"></a><span class="co">    warning: false</span></span>
<span id="cb33-33"><a href="#cb33-33"></a><span class="co">    comment: "#&gt;"</span></span>
<span id="cb33-34"><a href="#cb33-34"></a><span class="an">editor_options:</span></span>
<span id="cb33-35"><a href="#cb33-35"></a><span class="co">  chunk_output_type: console</span></span>
<span id="cb33-36"><a href="#cb33-36"></a><span class="an">execute:</span></span>
<span id="cb33-37"><a href="#cb33-37"></a><span class="co">  cache: false</span></span>
<span id="cb33-38"><a href="#cb33-38"></a><span class="co">---</span></span>
<span id="cb33-39"><a href="#cb33-39"></a></span>
<span id="cb33-42"><a href="#cb33-42"></a><span class="in">```{r}</span></span>
<span id="cb33-43"><a href="#cb33-43"></a><span class="co">#| label: setup</span></span>
<span id="cb33-44"><a href="#cb33-44"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb33-45"><a href="#cb33-45"></a><span class="fu">library</span>(glue)</span>
<span id="cb33-46"><a href="#cb33-46"></a><span class="fu">library</span>(here)</span>
<span id="cb33-47"><a href="#cb33-47"></a><span class="fu">library</span>(scales)</span>
<span id="cb33-48"><a href="#cb33-48"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb33-49"><a href="#cb33-49"></a><span class="fu">library</span>(gt)</span>
<span id="cb33-50"><a href="#cb33-50"></a><span class="fu">library</span>(patchwork)</span>
<span id="cb33-51"><a href="#cb33-51"></a><span class="fu">library</span>(googlesheets4)</span>
<span id="cb33-52"><a href="#cb33-52"></a><span class="fu">source</span>(<span class="fu">here</span>(<span class="st">"src/00-plot-aesthetics.R"</span>), <span class="at">encoding =</span> <span class="st">"utf-8"</span>)</span>
<span id="cb33-53"><a href="#cb33-53"></a><span class="st">`</span><span class="at">%notin%</span><span class="st">`</span> <span class="ot">&lt;-</span> <span class="cf">function</span>(x, y) <span class="sc">!</span>(x <span class="sc">%in%</span> y)</span>
<span id="cb33-54"><a href="#cb33-54"></a><span class="in">```</span></span>
<span id="cb33-55"><a href="#cb33-55"></a></span>
<span id="cb33-56"><a href="#cb33-56"></a><span class="fu">## Introdução</span></span>
<span id="cb33-57"><a href="#cb33-57"></a></span>
<span id="cb33-58"><a href="#cb33-58"></a>O objetivo desta análise é avaliar o cumprimento da <span class="co">[</span><span class="ot">Lei de Acesso a Informação (Lei n° 12.527)</span><span class="co">](http://www.planalto.gov.br/ccivil_03/_Ato2011-2014/2011/Lei/L12527.htm)</span> por parte do Poder Executivo Federal. Para isso, os pedidos e respostas de acesso a informação feitos aos órgãos do Poder Executivo Federal foram processados por um algoritmo de inteligência artificial capaz de analisar seus conteúdos e classificar as solicitações como "Atendido", "Não Atendido" ou "Parcialmente Atendido". As classificações resultantes de cada pedido foram confrontadas com a decisão de acesso a informação expedida pelos órgãos aos quais as solicitações foram enviadas.</span>
<span id="cb33-59"><a href="#cb33-59"></a></span>
<span id="cb33-60"><a href="#cb33-60"></a><span class="fu">## Metodologia</span></span>
<span id="cb33-61"><a href="#cb33-61"></a></span>
<span id="cb33-62"><a href="#cb33-62"></a><span class="fu">### Dados</span></span>
<span id="cb33-63"><a href="#cb33-63"></a></span>
<span id="cb33-64"><a href="#cb33-64"></a>A análise foi feita a partir <span class="co">[</span><span class="ot">da base de dados de pedidos e respostas realizados no Poder Executivo Federal</span><span class="co">](http://www.consultaesic.cgu.gov.br/busca/_layouts/15/DownloadPedidos/DownloadDados.aspx)</span>, disponível no FalaBr. O formato utilizado é o <span class="in">`CSV`</span>. Os dados vão de Janeiro de 2021 até agosto de 2022.</span>
<span id="cb33-65"><a href="#cb33-65"></a></span>
<span id="cb33-66"><a href="#cb33-66"></a><span class="at">&gt; Código para extrair os dados do FalaBr (</span><span class="co">[</span><span class="ot">link</span><span class="co">](src/01-download-base-cgu-filtrada.R)</span><span class="at">)</span></span>
<span id="cb33-67"><a href="#cb33-67"></a></span>
<span id="cb33-68"><a href="#cb33-68"></a>Foram selecionados para análise somente pedidos:</span>
<span id="cb33-69"><a href="#cb33-69"></a></span>
<span id="cb33-70"><a href="#cb33-70"></a><span class="ss">- </span>**Sem recursos**,</span>
<span id="cb33-71"><a href="#cb33-71"></a><span class="ss">- </span>**Sem arquivos anexos**,</span>
<span id="cb33-72"><a href="#cb33-72"></a><span class="ss">- </span>**Com decisões "Acesso Concedido", "Acesso Parcialmente Concedido", "Acesso Negado"**.</span>
<span id="cb33-73"><a href="#cb33-73"></a></span>
<span id="cb33-74"><a href="#cb33-74"></a>Os **pedidos sem recursos** não são um problema para a classificação do algorítmo BERT/NLP mas foram descartados por uma questão de simplicidade e para garantir que os pedidos analisados seriam somente aqueles considerados concluídos levando em conta os prazos legais de tramitação da LAI.</span>
<span id="cb33-75"><a href="#cb33-75"></a></span>
<span id="cb33-76"><a href="#cb33-76"></a>Os **pedidos com anexo** foram descartados pois, em sua versão atual, o algoritmo desenvolvido pelo AeP não é capaz de avaliar respostas atreladas a conteúdos de arquivos externos ao pedido (PDFs, XLS, ODS, etc.) e, portanto, **ele não serve para classificar pedidos que possuem anexos ou referências externas à resposta do pedido solicitado**.</span>
<span id="cb33-77"><a href="#cb33-77"></a></span>
<span id="cb33-78"><a href="#cb33-78"></a>Mas, como saber se os pedidos possuem anexos? A base de dados do FalaBr não possui uma informação (uma coluna na tabela) que indique a presença ou a ausência de anexos no pedido de acesso a informação. Os anexos dos pedidos só estão acessíveis por meio da página de <span class="co">[</span><span class="ot">"Buscas de pedidos e respostas"</span><span class="co">](http://www.consultaesic.cgu.gov.br/busca/SitePages/Principal.aspx)</span>, onde só é possível consultar os pedidos individualmente em uma página HTML específica.</span>
<span id="cb33-79"><a href="#cb33-79"></a></span>
<span id="cb33-80"><a href="#cb33-80"></a>A solução encontrada para saber se um pedido tinha ou unão um anexo foi varrer milhares de páginas de pedidos em busca das URLs que contém os anexos. Este processo foi documentado <span class="co">[</span><span class="ot">neste link</span><span class="co">](..src/10-coletando-url-anexos.R)</span> e uma base de dados auxiliar foi criada com as URLs de anexos com um *id* único e número de protocolo para cada pedido.</span>
<span id="cb33-81"><a href="#cb33-81"></a></span>
<span id="cb33-82"><a href="#cb33-82"></a><span class="at">&gt; Por uma questão de tempo de processamento foram coletados os anexos referentes aos anos de 2021 e 2022.</span></span>
<span id="cb33-83"><a href="#cb33-83"></a></span>
<span id="cb33-84"><a href="#cb33-84"></a>Por fim, foram filtrados somente os **pedidos com decisões "Acesso Concedido", "Acesso Parcialmente Concedido" e "Acesso Negado"**, pois o modelo NLP/BERT não foi treinado para interpretar pedidos classificados como "Não se trata de solicitação de informação", "Pergunta duplicada/repetida", "Órgão não tem competência para responder sobre o assunto" ou "Informação inexistente".</span>
<span id="cb33-85"><a href="#cb33-85"></a></span>
<span id="cb33-86"><a href="#cb33-86"></a><span class="at">&gt; Processamento da base de dados para análise (</span><span class="co">[</span><span class="ot">link</span><span class="co">](../src/09-pedidos-classificados.R)</span><span class="at">)</span></span>
<span id="cb33-87"><a href="#cb33-87"></a></span>
<span id="cb33-90"><a href="#cb33-90"></a><span class="in">```{r}</span></span>
<span id="cb33-91"><a href="#cb33-91"></a><span class="co"># label: base-pedidos</span></span>
<span id="cb33-92"><a href="#cb33-92"></a></span>
<span id="cb33-93"><a href="#cb33-93"></a><span class="co"># base de dados de pedidos</span></span>
<span id="cb33-94"><a href="#cb33-94"></a>pedidos <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="fu">here</span>(<span class="st">"data/pedidos-classificados.rds"</span>))</span>
<span id="cb33-95"><a href="#cb33-95"></a><span class="in">```</span></span>
<span id="cb33-96"><a href="#cb33-96"></a></span>
<span id="cb33-99"><a href="#cb33-99"></a><span class="in">```{r}</span></span>
<span id="cb33-100"><a href="#cb33-100"></a><span class="co">#| fig-width: 7</span></span>
<span id="cb33-101"><a href="#cb33-101"></a><span class="co">#| fig-height: 4</span></span>
<span id="cb33-102"><a href="#cb33-102"></a></span>
<span id="cb33-103"><a href="#cb33-103"></a><span class="co"># Decisões que deverão ser escolhidas para análise</span></span>
<span id="cb33-104"><a href="#cb33-104"></a>decisoes_validas <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb33-105"><a href="#cb33-105"></a>  <span class="st">"Acesso Concedido"</span>,</span>
<span id="cb33-106"><a href="#cb33-106"></a>  <span class="st">"Acesso Parcialmente Concedido"</span>,</span>
<span id="cb33-107"><a href="#cb33-107"></a>  <span class="st">"Acesso Negado"</span></span>
<span id="cb33-108"><a href="#cb33-108"></a>)</span>
<span id="cb33-109"><a href="#cb33-109"></a></span>
<span id="cb33-110"><a href="#cb33-110"></a>pedidos_count_validos <span class="ot">&lt;-</span> pedidos <span class="sc">%&gt;%</span></span>
<span id="cb33-111"><a href="#cb33-111"></a>  <span class="fu">count</span>(motivo_pedido_nao_valido) <span class="sc">%&gt;%</span></span>
<span id="cb33-112"><a href="#cb33-112"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-113"><a href="#cb33-113"></a>    <span class="at">perc =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n),</span>
<span id="cb33-114"><a href="#cb33-114"></a>    <span class="at">pos =</span> <span class="fu">rev</span>(<span class="fu">cumsum</span>(perc) <span class="sc">-</span> <span class="fl">0.6</span> <span class="sc">*</span> perc),</span>
<span id="cb33-115"><a href="#cb33-115"></a>    <span class="at">motivo_pedido_nao_valido =</span> <span class="fu">reorder</span>(motivo_pedido_nao_valido, perc)</span>
<span id="cb33-116"><a href="#cb33-116"></a>  )</span>
<span id="cb33-117"><a href="#cb33-117"></a></span>
<span id="cb33-118"><a href="#cb33-118"></a>pedidos_count_validos <span class="sc">%&gt;%</span></span>
<span id="cb33-119"><a href="#cb33-119"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> motivo_pedido_nao_valido, <span class="at">y =</span> n, <span class="at">fill =</span> motivo_pedido_nao_valido)) <span class="sc">+</span></span>
<span id="cb33-120"><a href="#cb33-120"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]) <span class="sc">+</span></span>
<span id="cb33-121"><a href="#cb33-121"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-122"><a href="#cb33-122"></a>    <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">5</span>,</span>
<span id="cb33-123"><a href="#cb33-123"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb33-124"><a href="#cb33-124"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-125"><a href="#cb33-125"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb33-126"><a href="#cb33-126"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">str_glue</span>(<span class="st">"{number(n)}</span><span class="sc">\n</span><span class="st">({percent(perc, decimal.mark = ',', accuracy = .1)})"</span>))</span>
<span id="cb33-127"><a href="#cb33-127"></a>  ) <span class="sc">+</span></span>
<span id="cb33-128"><a href="#cb33-128"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb33-129"><a href="#cb33-129"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span> , <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">5.5e4</span>), <span class="at">labels =</span> number) <span class="sc">+</span></span>
<span id="cb33-130"><a href="#cb33-130"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-131"><a href="#cb33-131"></a>    <span class="st">"Pedido válido"</span> <span class="ot">=</span> cores_tb[[<span class="st">"azul"</span>]],</span>
<span id="cb33-132"><a href="#cb33-132"></a>    <span class="st">"Pedido com anexo</span><span class="sc">\n</span><span class="st">(Pedido descartado)"</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb33-133"><a href="#cb33-133"></a>    <span class="st">"Decisão (FalaBr/CGU) inválida</span><span class="sc">\n</span><span class="st">(Pedido descartado)"</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"rosa"</span>]], .<span class="dv">6</span>),</span>
<span id="cb33-134"><a href="#cb33-134"></a>    <span class="st">"Pedidos com recursos</span><span class="sc">\n</span><span class="st">(Pedido descartado)"</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"rosa"</span>]], .<span class="dv">3</span>)</span>
<span id="cb33-135"><a href="#cb33-135"></a>  )) <span class="sc">+</span></span>
<span id="cb33-136"><a href="#cb33-136"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-137"><a href="#cb33-137"></a>    <span class="at">title =</span> <span class="fu">str_glue</span>(</span>
<span id="cb33-138"><a href="#cb33-138"></a>      <span class="st">"Foram processados {number(sum(pedidos_count_validos$n))} pedidos, "</span>,</span>
<span id="cb33-139"><a href="#cb33-139"></a>      <span class="st">"dos quais {number(pedidos_count_validos$n[3])}"</span>,</span>
<span id="cb33-140"><a href="#cb33-140"></a>      <span class="st">"</span><span class="sc">\n</span><span class="st">({percent(pedidos_count_validos$perc[3], decimal.mark = ',', accuracy = .1)})"</span>,</span>
<span id="cb33-141"><a href="#cb33-141"></a>      <span class="st">" são considerados válidos para análise"</span></span>
<span id="cb33-142"><a href="#cb33-142"></a>    ),</span>
<span id="cb33-143"><a href="#cb33-143"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb33-144"><a href="#cb33-144"></a>    <span class="at">x =</span> <span class="st">"Pedidos selecionados e descartados"</span></span>
<span id="cb33-145"><a href="#cb33-145"></a>  ) <span class="sc">+</span></span>
<span id="cb33-146"><a href="#cb33-146"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-147"><a href="#cb33-147"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb33-148"><a href="#cb33-148"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb33-149"><a href="#cb33-149"></a>  )</span>
<span id="cb33-150"><a href="#cb33-150"></a><span class="in">```</span></span>
<span id="cb33-151"><a href="#cb33-151"></a></span>
<span id="cb33-152"><a href="#cb33-152"></a>Recorte da base de dados:</span>
<span id="cb33-153"><a href="#cb33-153"></a></span>
<span id="cb33-154"><a href="#cb33-154"></a><span class="ss">- </span>**Sem recursos**</span>
<span id="cb33-155"><a href="#cb33-155"></a><span class="ss">- </span>**Sem arquivos anexos**</span>
<span id="cb33-156"><a href="#cb33-156"></a><span class="ss">- </span>**Com decisões "Acesso Concedido", "Acesso Parcialmente Concedido", "Acesso Negado"**</span>
<span id="cb33-157"><a href="#cb33-157"></a></span>
<span id="cb33-160"><a href="#cb33-160"></a><span class="in">```{r}</span></span>
<span id="cb33-161"><a href="#cb33-161"></a>pedidos <span class="ot">&lt;-</span> pedidos <span class="sc">%&gt;%</span></span>
<span id="cb33-162"><a href="#cb33-162"></a>  <span class="fu">filter</span>(motivo_pedido_nao_valido <span class="sc">==</span> <span class="st">"Pedido válido"</span>)</span>
<span id="cb33-163"><a href="#cb33-163"></a><span class="in">```</span></span>
<span id="cb33-164"><a href="#cb33-164"></a></span>
<span id="cb33-165"><a href="#cb33-165"></a><span class="at">&gt; Código que faz o tratamento da base de dados de pedidos utilizada neste relatório (</span><span class="co">[</span><span class="ot">link</span><span class="co">](src/02-pedidos-classificados.R)</span><span class="at">)</span></span>
<span id="cb33-166"><a href="#cb33-166"></a></span>
<span id="cb33-167"><a href="#cb33-167"></a><span class="fu">### Classificação de pedidos com Inteligência Artificial</span></span>
<span id="cb33-168"><a href="#cb33-168"></a></span>
<span id="cb33-169"><a href="#cb33-169"></a>Os pedidos selecionados foram classificados como "Atendido", "Não Atendido" e "Parcialmente Atendido" por meio do <span class="co">[</span><span class="ot">modelo BERT/NLP</span><span class="co">](https://huggingface.co/neuralmind/bert-large-portuguese-cased)</span>.</span>
<span id="cb33-170"><a href="#cb33-170"></a></span>
<span id="cb33-171"><a href="#cb33-171"></a><span class="ss">- </span>Uma breve explicação sobre como utilizamos o algoritmo de Machine Learning (BERT/NLP) para classificar os pedidos de acesso a informação. (<span class="co">[</span><span class="ot">link</span><span class="co">](https://achadosepedidos.org.br/na-midia/achados-e-pedidos-usa-inteligencia-artificial-para-classificar-atendimento-a-pedidos)</span>)</span>
<span id="cb33-172"><a href="#cb33-172"></a><span class="ss">- </span>Código que utiliza o modelo BERT para classificar pedidos como "Atendido", "Não Atendido" e "Parcialmente Atendido" (<span class="co">[</span><span class="ot">link</span><span class="co">](https://colab.research.google.com/drive/1BpahuNidPR6RhIYjrk06vThO3Fz4xA-Z?usp=sharing)</span>)</span>
<span id="cb33-173"><a href="#cb33-173"></a><span class="ss">- </span>O repositório com o modelo BERT treinado para classificação de pedidos de acesso a informação (<span class="co">[</span><span class="ot">link</span><span class="co">](https://huggingface.co/tbrasil/classificador_de_atendimento_3_classes_v1.1?text=I+like+you.+I+love+you)</span>)</span>
<span id="cb33-174"><a href="#cb33-174"></a><span class="ss">- </span>Repositório deste relatório (<span class="co">[</span><span class="ot">link</span><span class="co">](https://github.com/Transparencia-Brasil/monitoramento-lai)</span>)</span>
<span id="cb33-175"><a href="#cb33-175"></a></span>
<span id="cb33-176"><a href="#cb33-176"></a>::: {.panel-tabset}</span>
<span id="cb33-177"><a href="#cb33-177"></a></span>
<span id="cb33-178"><a href="#cb33-178"></a><span class="fu">#### Total</span></span>
<span id="cb33-179"><a href="#cb33-179"></a></span>
<span id="cb33-182"><a href="#cb33-182"></a><span class="in">```{r}</span></span>
<span id="cb33-183"><a href="#cb33-183"></a><span class="co">#| fig-width: 7.2</span></span>
<span id="cb33-184"><a href="#cb33-184"></a><span class="co">#| fig-height: 4.8</span></span>
<span id="cb33-185"><a href="#cb33-185"></a></span>
<span id="cb33-186"><a href="#cb33-186"></a>pedidos <span class="sc">%&gt;%</span></span>
<span id="cb33-187"><a href="#cb33-187"></a>  <span class="fu">count</span>(resultados) <span class="sc">%&gt;%</span></span>
<span id="cb33-188"><a href="#cb33-188"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-189"><a href="#cb33-189"></a>    <span class="at">resultados =</span> <span class="fu">reorder</span>(resultados, n),</span>
<span id="cb33-190"><a href="#cb33-190"></a>    <span class="at">perc =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)</span>
<span id="cb33-191"><a href="#cb33-191"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-192"><a href="#cb33-192"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> resultados, <span class="at">y =</span> n, <span class="at">fill =</span> resultados)) <span class="sc">+</span></span>
<span id="cb33-193"><a href="#cb33-193"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]) <span class="sc">+</span></span>
<span id="cb33-194"><a href="#cb33-194"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-195"><a href="#cb33-195"></a>    <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">3</span>,</span>
<span id="cb33-196"><a href="#cb33-196"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-197"><a href="#cb33-197"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb33-198"><a href="#cb33-198"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">str_glue</span>(<span class="st">"{number(n)}</span><span class="sc">\n</span><span class="st">({percent(perc, decimal = ',', accuracy = .1)})"</span>))</span>
<span id="cb33-199"><a href="#cb33-199"></a>  ) <span class="sc">+</span></span>
<span id="cb33-200"><a href="#cb33-200"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb33-201"><a href="#cb33-201"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">labels =</span> number, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">3.5e4</span>)) <span class="sc">+</span></span>
<span id="cb33-202"><a href="#cb33-202"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cores_classificacao) <span class="sc">+</span></span>
<span id="cb33-203"><a href="#cb33-203"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-204"><a href="#cb33-204"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb33-205"><a href="#cb33-205"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb33-206"><a href="#cb33-206"></a>  ) <span class="sc">+</span></span>
<span id="cb33-207"><a href="#cb33-207"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-208"><a href="#cb33-208"></a>    <span class="at">title =</span> <span class="st">"Quantidade de pedidos com classificações BERT/NLP"</span>,</span>
<span id="cb33-209"><a href="#cb33-209"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedido"</span>,</span>
<span id="cb33-210"><a href="#cb33-210"></a>    <span class="at">x =</span> <span class="st">"Classificações BERT/NLP"</span></span>
<span id="cb33-211"><a href="#cb33-211"></a>  )</span>
<span id="cb33-212"><a href="#cb33-212"></a><span class="in">```</span></span>
<span id="cb33-213"><a href="#cb33-213"></a></span>
<span id="cb33-214"><a href="#cb33-214"></a><span class="fu">#### Percentual (%)</span></span>
<span id="cb33-215"><a href="#cb33-215"></a></span>
<span id="cb33-218"><a href="#cb33-218"></a><span class="in">```{r}</span></span>
<span id="cb33-219"><a href="#cb33-219"></a><span class="co">#| fig-width: 7</span></span>
<span id="cb33-220"><a href="#cb33-220"></a><span class="co">#| fig-height: 5</span></span>
<span id="cb33-221"><a href="#cb33-221"></a></span>
<span id="cb33-222"><a href="#cb33-222"></a>pedidos <span class="sc">%&gt;%</span></span>
<span id="cb33-223"><a href="#cb33-223"></a>  <span class="fu">filter</span>(motivo_pedido_nao_valido <span class="sc">==</span> <span class="st">"Pedido válido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-224"><a href="#cb33-224"></a>  <span class="fu">count</span>(resultados) <span class="sc">%&gt;%</span></span>
<span id="cb33-225"><a href="#cb33-225"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-226"><a href="#cb33-226"></a>    <span class="at">resultados =</span> <span class="fu">reorder</span>(resultados, n),</span>
<span id="cb33-227"><a href="#cb33-227"></a>    <span class="at">perc =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n),</span>
<span id="cb33-228"><a href="#cb33-228"></a>    <span class="at">pos =</span> <span class="fu">cumsum</span>(perc) <span class="sc">-</span> <span class="fl">0.5</span> <span class="sc">*</span> perc</span>
<span id="cb33-229"><a href="#cb33-229"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-230"><a href="#cb33-230"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> perc, <span class="at">fill =</span> resultados)) <span class="sc">+</span></span>
<span id="cb33-231"><a href="#cb33-231"></a>  <span class="fu">geom_bar</span>(</span>
<span id="cb33-232"><a href="#cb33-232"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-233"><a href="#cb33-233"></a>    <span class="at">width =</span> <span class="dv">1</span>,</span>
<span id="cb33-234"><a href="#cb33-234"></a>    <span class="at">stat =</span> <span class="st">"identity"</span></span>
<span id="cb33-235"><a href="#cb33-235"></a>  ) <span class="sc">+</span></span>
<span id="cb33-236"><a href="#cb33-236"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb33-237"><a href="#cb33-237"></a>    <span class="fu">aes</span>(<span class="at">y =</span> pos, <span class="at">label =</span> <span class="fu">str_glue</span>(<span class="st">"{number(n)}</span><span class="sc">\n</span><span class="st">{percent(perc, decimal = ',', accuracy = .1)}"</span>))</span>
<span id="cb33-238"><a href="#cb33-238"></a>  ) <span class="sc">+</span></span>
<span id="cb33-239"><a href="#cb33-239"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb33-240"><a href="#cb33-240"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cores_classificacao) <span class="sc">+</span></span>
<span id="cb33-241"><a href="#cb33-241"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-242"><a href="#cb33-242"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-243"><a href="#cb33-243"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-244"><a href="#cb33-244"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-245"><a href="#cb33-245"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb33-246"><a href="#cb33-246"></a>  ) <span class="sc">+</span></span>
<span id="cb33-247"><a href="#cb33-247"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-248"><a href="#cb33-248"></a>    <span class="at">title =</span> <span class="st">"Percentual de pedidos com classificações BERT/NLP"</span>,</span>
<span id="cb33-249"><a href="#cb33-249"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb33-250"><a href="#cb33-250"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb33-251"><a href="#cb33-251"></a>    <span class="at">fill =</span> <span class="st">"Classificação BERT/NLP"</span></span>
<span id="cb33-252"><a href="#cb33-252"></a>  )</span>
<span id="cb33-253"><a href="#cb33-253"></a><span class="in">```</span></span>
<span id="cb33-254"><a href="#cb33-254"></a></span>
<span id="cb33-255"><a href="#cb33-255"></a>:::</span>
<span id="cb33-256"><a href="#cb33-256"></a></span>
<span id="cb33-257"><a href="#cb33-257"></a><span class="fu">### Decisão sobre acesso a informação do Governo Federal</span></span>
<span id="cb33-258"><a href="#cb33-258"></a></span>
<span id="cb33-259"><a href="#cb33-259"></a>Após recebimento e análise da solicitação de acesso a informação os órgãos do Poder Executivo Federal podem emitir 6 decisões diferentes. A tabela abaixo mostra as decisões possíveis e a classificação de atendimento (BERT/NLP) correspondente.</span>
<span id="cb33-260"><a href="#cb33-260"></a></span>
<span id="cb33-263"><a href="#cb33-263"></a><span class="in">```{r}</span></span>
<span id="cb33-264"><a href="#cb33-264"></a><span class="co">#| label: tbl-atendimento-classificacao</span></span>
<span id="cb33-265"><a href="#cb33-265"></a><span class="co">#| tbl-cap: "tabela de correspond~encia entre classificações (NLP/BERT) e decisões (FalaBr/CGU)"</span></span>
<span id="cb33-266"><a href="#cb33-266"></a></span>
<span id="cb33-267"><a href="#cb33-267"></a><span class="fu">tibble</span>(<span class="at">decisao =</span> <span class="fu">c</span>(</span>
<span id="cb33-268"><a href="#cb33-268"></a>  <span class="st">"Acesso Concedido"</span>,</span>
<span id="cb33-269"><a href="#cb33-269"></a>  <span class="st">"Acesso Parcialmente Concedido"</span>,</span>
<span id="cb33-270"><a href="#cb33-270"></a>  <span class="st">"Acesso Negado"</span>,</span>
<span id="cb33-271"><a href="#cb33-271"></a>  <span class="st">"Não se trata de solicitação de informação"</span>,</span>
<span id="cb33-272"><a href="#cb33-272"></a>  <span class="st">"Informação Inexistente"</span>,</span>
<span id="cb33-273"><a href="#cb33-273"></a>  <span class="st">"Órgão não tem competência para responder sobre o assunto"</span>,</span>
<span id="cb33-274"><a href="#cb33-274"></a>  <span class="st">"Pergunta Duplicada/Repetida"</span></span>
<span id="cb33-275"><a href="#cb33-275"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb33-276"><a href="#cb33-276"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-277"><a href="#cb33-277"></a>    <span class="at">classif =</span> <span class="fu">case_when</span>(</span>
<span id="cb33-278"><a href="#cb33-278"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span> <span class="sc">~</span> <span class="st">"Atendido"</span>,</span>
<span id="cb33-279"><a href="#cb33-279"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Parcialmente Concedido"</span> <span class="sc">~</span> <span class="st">"Parcialmente Atendido"</span>,</span>
<span id="cb33-280"><a href="#cb33-280"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Negado"</span> <span class="sc">~</span> <span class="st">"Não Atendido"</span>,</span>
<span id="cb33-281"><a href="#cb33-281"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Decisão Inválida"</span></span>
<span id="cb33-282"><a href="#cb33-282"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb33-283"><a href="#cb33-283"></a>  <span class="fu">gt</span>() <span class="sc">%&gt;%</span></span>
<span id="cb33-284"><a href="#cb33-284"></a>  <span class="fu">cols_label</span>(</span>
<span id="cb33-285"><a href="#cb33-285"></a>    <span class="at">decisao =</span> <span class="fu">md</span>(<span class="st">"**Decisão (FalaBr/CGU)**"</span>),</span>
<span id="cb33-286"><a href="#cb33-286"></a>    <span class="at">classif =</span> <span class="fu">md</span>(<span class="st">"**Classificação correspondente (BERT/NLP)**"</span>)</span>
<span id="cb33-287"><a href="#cb33-287"></a>  )</span>
<span id="cb33-288"><a href="#cb33-288"></a><span class="in">```</span></span>
<span id="cb33-289"><a href="#cb33-289"></a></span>
<span id="cb33-290"><a href="#cb33-290"></a>A distribuição das decisões para pedidos válidos mostram que a maior parte dos pedidos são classificados com Acesso Concedido:</span>
<span id="cb33-291"><a href="#cb33-291"></a></span>
<span id="cb33-292"><a href="#cb33-292"></a>::: {.panel-tabset}</span>
<span id="cb33-293"><a href="#cb33-293"></a></span>
<span id="cb33-294"><a href="#cb33-294"></a><span class="fu">#### Total</span></span>
<span id="cb33-295"><a href="#cb33-295"></a></span>
<span id="cb33-298"><a href="#cb33-298"></a><span class="in">```{r}</span></span>
<span id="cb33-299"><a href="#cb33-299"></a><span class="co">#| fig-width: 7.2</span></span>
<span id="cb33-300"><a href="#cb33-300"></a><span class="co">#| fig-height: 4.8</span></span>
<span id="cb33-301"><a href="#cb33-301"></a></span>
<span id="cb33-302"><a href="#cb33-302"></a>pedidos <span class="sc">%&gt;%</span></span>
<span id="cb33-303"><a href="#cb33-303"></a>  <span class="fu">filter</span>(motivo_pedido_nao_valido <span class="sc">==</span> <span class="st">"Pedido válido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-304"><a href="#cb33-304"></a>  <span class="fu">count</span>(decisao) <span class="sc">%&gt;%</span></span>
<span id="cb33-305"><a href="#cb33-305"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-306"><a href="#cb33-306"></a>    <span class="at">perc =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n),</span>
<span id="cb33-307"><a href="#cb33-307"></a>    <span class="at">decisao =</span> <span class="fu">reorder</span>(decisao, n)</span>
<span id="cb33-308"><a href="#cb33-308"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-309"><a href="#cb33-309"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> decisao, <span class="at">y =</span> n, <span class="at">fill =</span> decisao)) <span class="sc">+</span></span>
<span id="cb33-310"><a href="#cb33-310"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb33-311"><a href="#cb33-311"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-312"><a href="#cb33-312"></a>    <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">3</span>,</span>
<span id="cb33-313"><a href="#cb33-313"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb33-314"><a href="#cb33-314"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-315"><a href="#cb33-315"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb33-316"><a href="#cb33-316"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">str_glue</span>(<span class="st">"{number(n)}</span><span class="sc">\n</span><span class="st">({percent(perc, accuracy = .1, decimal.mark = ',')})"</span>))</span>
<span id="cb33-317"><a href="#cb33-317"></a>  ) <span class="sc">+</span></span>
<span id="cb33-318"><a href="#cb33-318"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb33-319"><a href="#cb33-319"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span> ,<span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">4.5e4</span>), <span class="at">labels =</span> number) <span class="sc">+</span></span>
<span id="cb33-320"><a href="#cb33-320"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cores_decisao) <span class="sc">+</span></span>
<span id="cb33-321"><a href="#cb33-321"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-322"><a href="#cb33-322"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb33-323"><a href="#cb33-323"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb33-324"><a href="#cb33-324"></a>  ) <span class="sc">+</span></span>
<span id="cb33-325"><a href="#cb33-325"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-326"><a href="#cb33-326"></a>    <span class="at">title =</span> <span class="st">"Quantidade de pedidos por decisão (FalaBr/CGU)"</span>,</span>
<span id="cb33-327"><a href="#cb33-327"></a>    <span class="at">x =</span> <span class="st">"Decisão (FalaBr/CGU)"</span>,</span>
<span id="cb33-328"><a href="#cb33-328"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span></span>
<span id="cb33-329"><a href="#cb33-329"></a>  )</span>
<span id="cb33-330"><a href="#cb33-330"></a><span class="in">```</span></span>
<span id="cb33-331"><a href="#cb33-331"></a></span>
<span id="cb33-332"><a href="#cb33-332"></a><span class="fu">#### Percentual (%)</span></span>
<span id="cb33-333"><a href="#cb33-333"></a></span>
<span id="cb33-336"><a href="#cb33-336"></a><span class="in">```{r}</span></span>
<span id="cb33-337"><a href="#cb33-337"></a><span class="co">#| fig-width: 7</span></span>
<span id="cb33-338"><a href="#cb33-338"></a><span class="co">#| fig-height: 5</span></span>
<span id="cb33-339"><a href="#cb33-339"></a></span>
<span id="cb33-340"><a href="#cb33-340"></a>pedidos <span class="sc">%&gt;%</span></span>
<span id="cb33-341"><a href="#cb33-341"></a>  <span class="fu">filter</span>(motivo_pedido_nao_valido <span class="sc">==</span> <span class="st">"Pedido válido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-342"><a href="#cb33-342"></a>  <span class="fu">count</span>(decisao) <span class="sc">%&gt;%</span></span>
<span id="cb33-343"><a href="#cb33-343"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-344"><a href="#cb33-344"></a>    <span class="at">resultados =</span> <span class="fu">reorder</span>(decisao, n),</span>
<span id="cb33-345"><a href="#cb33-345"></a>    <span class="at">perc =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n),</span>
<span id="cb33-346"><a href="#cb33-346"></a>    <span class="at">pos =</span> <span class="fu">cumsum</span>(perc) <span class="sc">-</span> <span class="fl">0.5</span> <span class="sc">*</span> perc</span>
<span id="cb33-347"><a href="#cb33-347"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-348"><a href="#cb33-348"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">y =</span> perc, <span class="at">fill =</span> resultados)) <span class="sc">+</span></span>
<span id="cb33-349"><a href="#cb33-349"></a>  <span class="fu">geom_bar</span>(</span>
<span id="cb33-350"><a href="#cb33-350"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-351"><a href="#cb33-351"></a>    <span class="at">width =</span> <span class="dv">1</span>,</span>
<span id="cb33-352"><a href="#cb33-352"></a>    <span class="at">stat =</span> <span class="st">"identity"</span></span>
<span id="cb33-353"><a href="#cb33-353"></a>  ) <span class="sc">+</span></span>
<span id="cb33-354"><a href="#cb33-354"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb33-355"><a href="#cb33-355"></a>    <span class="fu">aes</span>(<span class="at">y =</span> pos, <span class="at">label =</span> <span class="fu">str_glue</span>(<span class="st">"{number(n)}</span><span class="sc">\n</span><span class="st">{percent(perc, decimal = ',', accuracy = .1)}"</span>))</span>
<span id="cb33-356"><a href="#cb33-356"></a>  ) <span class="sc">+</span></span>
<span id="cb33-357"><a href="#cb33-357"></a>  <span class="fu">coord_polar</span>(<span class="at">theta =</span> <span class="st">"y"</span>) <span class="sc">+</span></span>
<span id="cb33-358"><a href="#cb33-358"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cores_decisao[<span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">3</span>,<span class="dv">4</span>)], <span class="at">drop =</span> <span class="cn">TRUE</span>) <span class="sc">+</span></span>
<span id="cb33-359"><a href="#cb33-359"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-360"><a href="#cb33-360"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-361"><a href="#cb33-361"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-362"><a href="#cb33-362"></a>    <span class="at">axis.text =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-363"><a href="#cb33-363"></a>    <span class="at">panel.grid =</span> <span class="fu">element_blank</span>()</span>
<span id="cb33-364"><a href="#cb33-364"></a>  ) <span class="sc">+</span></span>
<span id="cb33-365"><a href="#cb33-365"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-366"><a href="#cb33-366"></a>    <span class="at">title =</span> <span class="st">"Percentual de pedidos por decisão (FalaBr/CGU)"</span>,</span>
<span id="cb33-367"><a href="#cb33-367"></a>    <span class="at">y =</span> <span class="cn">NULL</span>,</span>
<span id="cb33-368"><a href="#cb33-368"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb33-369"><a href="#cb33-369"></a>    <span class="at">fill =</span> <span class="st">"Decisão (FalaBr/CGU)"</span></span>
<span id="cb33-370"><a href="#cb33-370"></a>  )</span>
<span id="cb33-371"><a href="#cb33-371"></a><span class="in">```</span></span>
<span id="cb33-372"><a href="#cb33-372"></a></span>
<span id="cb33-373"><a href="#cb33-373"></a>:::</span>
<span id="cb33-374"><a href="#cb33-374"></a></span>
<span id="cb33-375"><a href="#cb33-375"></a><span class="fu">## Cruzamento de decisões (FalaBr/CGU) com classificações de atendimento (BERT/NLP)</span></span>
<span id="cb33-376"><a href="#cb33-376"></a></span>
<span id="cb33-379"><a href="#cb33-379"></a><span class="in">```{r}</span></span>
<span id="cb33-380"><a href="#cb33-380"></a>pedidos_counts <span class="ot">&lt;-</span> pedidos <span class="sc">%&gt;%</span></span>
<span id="cb33-381"><a href="#cb33-381"></a>  <span class="fu">filter</span>(pedido_valido) <span class="sc">%&gt;%</span></span>
<span id="cb33-382"><a href="#cb33-382"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(decisao)) <span class="sc">%&gt;%</span></span>
<span id="cb33-383"><a href="#cb33-383"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"n_decisao_resultado"</span>, decisao, resultados) <span class="sc">%&gt;%</span></span>
<span id="cb33-384"><a href="#cb33-384"></a>  <span class="fu">add_count</span>(resultados, <span class="at">name =</span> <span class="st">"n_resultados"</span>, <span class="at">wt =</span> n_decisao_resultado) <span class="sc">%&gt;%</span></span>
<span id="cb33-385"><a href="#cb33-385"></a>  <span class="fu">add_count</span>(decisao, <span class="at">name =</span> <span class="st">"n_decisao"</span>, <span class="at">wt =</span> n_decisao_resultado) <span class="sc">%&gt;%</span></span>
<span id="cb33-386"><a href="#cb33-386"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-387"><a href="#cb33-387"></a>    <span class="at">resultados =</span> <span class="fu">ordered</span>(resultados, <span class="at">levels =</span> ord_classificacao),</span>
<span id="cb33-388"><a href="#cb33-388"></a>    <span class="at">perc =</span> n_decisao_resultado <span class="sc">/</span> n_decisao</span>
<span id="cb33-389"><a href="#cb33-389"></a>  )</span>
<span id="cb33-390"><a href="#cb33-390"></a></span>
<span id="cb33-391"><a href="#cb33-391"></a>pedidos_counts_comparativo <span class="ot">&lt;-</span> pedidos_counts <span class="sc">%&gt;%</span></span>
<span id="cb33-392"><a href="#cb33-392"></a>  <span class="fu">distinct</span>(<span class="at">atend =</span> decisao, <span class="at">n =</span> n_decisao) <span class="sc">%&gt;%</span></span>
<span id="cb33-393"><a href="#cb33-393"></a>  <span class="fu">filter</span>(atend <span class="sc">%in%</span> <span class="fu">c</span>(</span>
<span id="cb33-394"><a href="#cb33-394"></a>    <span class="st">"Acesso Concedido"</span>,</span>
<span id="cb33-395"><a href="#cb33-395"></a>    <span class="st">"Acesso Negado"</span>,</span>
<span id="cb33-396"><a href="#cb33-396"></a>    <span class="st">"Acesso Parcialmente Concedido"</span></span>
<span id="cb33-397"><a href="#cb33-397"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb33-398"><a href="#cb33-398"></a>  <span class="fu">mutate</span>(<span class="at">atend =</span> <span class="fu">str_glue</span>(<span class="st">"{atend} (FalaBr/CGU)"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb33-399"><a href="#cb33-399"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb33-400"><a href="#cb33-400"></a>    pedidos_counts <span class="sc">%&gt;%</span></span>
<span id="cb33-401"><a href="#cb33-401"></a>      <span class="fu">distinct</span>(<span class="at">atend =</span> resultados, <span class="at">n =</span> n_resultados) <span class="sc">%&gt;%</span></span>
<span id="cb33-402"><a href="#cb33-402"></a>      <span class="fu">mutate</span>(<span class="at">atend =</span> <span class="fu">str_glue</span>(<span class="st">"{atend} (BERT/NLP)"</span>))</span>
<span id="cb33-403"><a href="#cb33-403"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-404"><a href="#cb33-404"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-405"><a href="#cb33-405"></a>    <span class="at">atend =</span> <span class="fu">ordered</span>(atend, <span class="fu">c</span>(</span>
<span id="cb33-406"><a href="#cb33-406"></a>      <span class="st">"Atendido (BERT/NLP)"</span>,</span>
<span id="cb33-407"><a href="#cb33-407"></a>      <span class="st">"Acesso Concedido (FalaBr/CGU)"</span>,</span>
<span id="cb33-408"><a href="#cb33-408"></a>      <span class="st">"Não Atendido (BERT/NLP)"</span>,</span>
<span id="cb33-409"><a href="#cb33-409"></a>      <span class="st">"Acesso Negado (FalaBr/CGU)"</span>,</span>
<span id="cb33-410"><a href="#cb33-410"></a>      <span class="st">"Parcialmente Atendido (BERT/NLP)"</span>,</span>
<span id="cb33-411"><a href="#cb33-411"></a>      <span class="st">"Acesso Parcialmente Concedido (FalaBr/CGU)"</span></span>
<span id="cb33-412"><a href="#cb33-412"></a>  ))) <span class="sc">%&gt;%</span></span>
<span id="cb33-413"><a href="#cb33-413"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-414"><a href="#cb33-414"></a>    <span class="at">atend2 =</span> <span class="fu">case_when</span>(</span>
<span id="cb33-415"><a href="#cb33-415"></a>      atend <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Atendido (BERT/NLP)"</span>, <span class="st">"Acesso Concedido (FalaBr/CGU)"</span>) <span class="sc">~</span> <span class="st">"Atendido (BERT/NLP) e Acesso Concedido (FalaBr/CGU)"</span>,</span>
<span id="cb33-416"><a href="#cb33-416"></a>      atend <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Não Atendido (BERT/NLP)"</span>, <span class="st">"Acesso Negado (FalaBr/CGU)"</span>) <span class="sc">~</span> <span class="st">"Não Atendido (BERT/NLP) e Acesso Negado (FalaBr/CGU)"</span>,</span>
<span id="cb33-417"><a href="#cb33-417"></a>      atend <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"Parcialmente Atendido (BERT/NLP)"</span>, <span class="st">"Acesso Parcialmente Concedido (FalaBr/CGU)"</span>) <span class="sc">~</span> <span class="st">"Parcialmente Atendido (BERT/NLP) e Acesso Parcialmente Concedido (FalaBr/CGU)"</span></span>
<span id="cb33-418"><a href="#cb33-418"></a>    )</span>
<span id="cb33-419"><a href="#cb33-419"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-420"><a href="#cb33-420"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-421"><a href="#cb33-421"></a>    <span class="at">origem =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(atend, <span class="st">"FalaBr"</span>), <span class="st">"FalaBr"</span>, <span class="st">"BERT/NLP"</span>)</span>
<span id="cb33-422"><a href="#cb33-422"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-423"><a href="#cb33-423"></a>  <span class="fu">group_by</span>(origem) <span class="sc">%&gt;%</span></span>
<span id="cb33-424"><a href="#cb33-424"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> n <span class="sc">/</span> <span class="fu">sum</span>(n)) <span class="sc">%&gt;%</span></span>
<span id="cb33-425"><a href="#cb33-425"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb33-426"><a href="#cb33-426"></a><span class="in">```</span></span>
<span id="cb33-427"><a href="#cb33-427"></a></span>
<span id="cb33-428"><a href="#cb33-428"></a>No comparativo entre as decisões (FalaBr/CGU) e as classificações por algorítmo (BERT/NLP), observa-se que enquanto o governo Federal alegou conceder acesso para <span class="in">`r percent(pedidos_counts_comparativo$perc[1], accuracy = 1.0, decimal_mark = ",")`</span> a classificação feita por algorítmo foi menor, de <span class="in">`r percent(pedidos_counts_comparativo$perc[4], accuracy = 1.0, decimal_mark = ",")`</span>.</span>
<span id="cb33-429"><a href="#cb33-429"></a></span>
<span id="cb33-430"><a href="#cb33-430"></a>O algoritmo BERT/NLP considerou como "Não Atendida" <span class="in">`r percent(pedidos_counts_comparativo$perc[5], accuracy = 1.0, decimal_mark = ",")`</span> dos pedidos, contra <span class="in">`r percent(pedidos_counts_comparativo$perc[2], accuracy = 1.0, decimal_mark = ",")`</span> de decisões de "Acesso Negado" registradas no FalaBr/CGU.</span>
<span id="cb33-431"><a href="#cb33-431"></a></span>
<span id="cb33-432"><a href="#cb33-432"></a>A comparação entre pedidos onde a informação foi parcialmente concedida/atendida, o algorítmo BERT/NLP classificou como "Parcialmente Atendido" <span class="in">`r percent(pedidos_counts_comparativo$perc[6], accuracy = 1.0, decimal_mark = ",")`</span> dos pedidos. Já o governo Federal expediu decisões de "Acesso Parcialmente Concedido" para <span class="in">`r percent(pedidos_counts_comparativo$perc[3], accuracy = 1.0, decimal_mark = ",")`</span> de pedidos.</span>
<span id="cb33-433"><a href="#cb33-433"></a></span>
<span id="cb33-436"><a href="#cb33-436"></a><span class="in">```{r}</span></span>
<span id="cb33-437"><a href="#cb33-437"></a><span class="co">#| fig-height: 6.5</span></span>
<span id="cb33-438"><a href="#cb33-438"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb33-439"><a href="#cb33-439"></a></span>
<span id="cb33-440"><a href="#cb33-440"></a>pedidos_counts_comparativo <span class="sc">%&gt;%</span></span>
<span id="cb33-441"><a href="#cb33-441"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> n, <span class="at">x =</span> atend, <span class="at">fill =</span> atend)) <span class="sc">+</span></span>
<span id="cb33-442"><a href="#cb33-442"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb33-443"><a href="#cb33-443"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]) <span class="sc">+</span></span>
<span id="cb33-444"><a href="#cb33-444"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-445"><a href="#cb33-445"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb33-446"><a href="#cb33-446"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb33-447"><a href="#cb33-447"></a>    <span class="at">nudge_y =</span> <span class="dv">800</span>,</span>
<span id="cb33-448"><a href="#cb33-448"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-449"><a href="#cb33-449"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb33-450"><a href="#cb33-450"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">str_glue</span>(<span class="st">"{number(n)}</span><span class="sc">\n</span><span class="st">({percent(perc, decimal.mark = ',')})"</span>))</span>
<span id="cb33-451"><a href="#cb33-451"></a>  ) <span class="sc">+</span></span>
<span id="cb33-452"><a href="#cb33-452"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> atend2, <span class="at">scales =</span> <span class="st">"free_y"</span>, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb33-453"><a href="#cb33-453"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">4.6e4</span>), <span class="at">labels =</span> number) <span class="sc">+</span></span>
<span id="cb33-454"><a href="#cb33-454"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-455"><a href="#cb33-455"></a>    <span class="st">"Atendido (BERT/NLP)"</span> <span class="ot">=</span> cores_tb[[<span class="st">"azul"</span>]],</span>
<span id="cb33-456"><a href="#cb33-456"></a>    <span class="st">"Acesso Concedido (FalaBr/CGU)"</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_tb[[<span class="st">"azul"</span>]], .<span class="dv">6</span>),</span>
<span id="cb33-457"><a href="#cb33-457"></a>    <span class="st">"Não Atendido (BERT/NLP)"</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb33-458"><a href="#cb33-458"></a>    <span class="st">"Acesso Negado (FalaBr/CGU)"</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"rosa"</span>]], .<span class="dv">6</span>),</span>
<span id="cb33-459"><a href="#cb33-459"></a>    <span class="st">"Parcialmente Atendido (BERT/NLP)"</span> <span class="ot">=</span> cores_aep[[<span class="st">"laranja"</span>]],</span>
<span id="cb33-460"><a href="#cb33-460"></a>    <span class="st">"Acesso Parcialmente Concedido (FalaBr/CGU)"</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"laranja"</span>]], .<span class="dv">6</span>)</span>
<span id="cb33-461"><a href="#cb33-461"></a>  )) <span class="sc">+</span></span>
<span id="cb33-462"><a href="#cb33-462"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-463"><a href="#cb33-463"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-464"><a href="#cb33-464"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb33-465"><a href="#cb33-465"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb33-466"><a href="#cb33-466"></a>  ) <span class="sc">+</span></span>
<span id="cb33-467"><a href="#cb33-467"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-468"><a href="#cb33-468"></a>    <span class="at">title =</span> <span class="st">"Comparativo entre decisões e classificações correspondentes"</span>,</span>
<span id="cb33-469"><a href="#cb33-469"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb33-470"><a href="#cb33-470"></a>    <span class="at">x =</span> <span class="cn">NULL</span></span>
<span id="cb33-471"><a href="#cb33-471"></a>  )</span>
<span id="cb33-472"><a href="#cb33-472"></a><span class="in">```</span></span>
<span id="cb33-473"><a href="#cb33-473"></a></span>
<span id="cb33-474"><a href="#cb33-474"></a>Ao confrontar as decisões, observamos que o algoritmo (BERT/NLP) classificou como "Não Atendido" <span class="in">`r number(pedidos_counts$n_decisao_resultado[2])`</span> pedidos em que os órgãos alegaram "Acesso Concedido". Isso significa que o Poder Executivo Federal não atendeu <span class="in">`r percent(pedidos_counts$perc[2], accuracy = 1.0, decimal_mark = ",")`</span> do total de pedidos que classificou como "Acesso Concedido".</span>
<span id="cb33-475"><a href="#cb33-475"></a></span>
<span id="cb33-476"><a href="#cb33-476"></a>::: {.panel-tabset}</span>
<span id="cb33-477"><a href="#cb33-477"></a></span>
<span id="cb33-478"><a href="#cb33-478"></a><span class="fu">### Classificação BERT/NLP X Decisão (Abs.)</span></span>
<span id="cb33-479"><a href="#cb33-479"></a></span>
<span id="cb33-482"><a href="#cb33-482"></a><span class="in">```{r}</span></span>
<span id="cb33-483"><a href="#cb33-483"></a><span class="co">#| label: plot-classificacao-bert-nlp-decisao-abs-reduzido</span></span>
<span id="cb33-484"><a href="#cb33-484"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb33-485"><a href="#cb33-485"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb33-486"><a href="#cb33-486"></a></span>
<span id="cb33-487"><a href="#cb33-487"></a>pedidos_counts <span class="sc">%&gt;%</span></span>
<span id="cb33-488"><a href="#cb33-488"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-489"><a href="#cb33-489"></a>    <span class="at">perc =</span> n_decisao_resultado <span class="sc">/</span> n_decisao,</span>
<span id="cb33-490"><a href="#cb33-490"></a>    <span class="at">destaque =</span> <span class="fu">case_when</span>(</span>
<span id="cb33-491"><a href="#cb33-491"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-492"><a href="#cb33-492"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Parcialmente Concedido"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Parcialmente Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-493"><a href="#cb33-493"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Negado"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-494"><a href="#cb33-494"></a>      decisao <span class="sc">==</span> <span class="st">"Informação Inexistente"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-495"><a href="#cb33-495"></a>      decisao <span class="sc">==</span> <span class="st">"Não se trata de solicitação de informação"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-496"><a href="#cb33-496"></a>      decisao <span class="sc">==</span> <span class="st">"Órgão não tem competência para responder sobre o assunto"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-497"><a href="#cb33-497"></a>      decisao <span class="sc">==</span> <span class="st">"Pergunta Duplicada/Repetida"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-498"><a href="#cb33-498"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Resultado contraditório"</span></span>
<span id="cb33-499"><a href="#cb33-499"></a>    ),</span>
<span id="cb33-500"><a href="#cb33-500"></a>    <span class="at">destaque_texto =</span> <span class="fu">if_else</span>(</span>
<span id="cb33-501"><a href="#cb33-501"></a>      destaque <span class="sc">==</span> <span class="st">"Resultado esperado"</span>, <span class="fu">as.character</span>(resultados), destaque</span>
<span id="cb33-502"><a href="#cb33-502"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb33-503"><a href="#cb33-503"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> resultados, <span class="at">y =</span> n_decisao_resultado, <span class="at">fill =</span> resultados)) <span class="sc">+</span></span>
<span id="cb33-504"><a href="#cb33-504"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb33-505"><a href="#cb33-505"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-506"><a href="#cb33-506"></a>    <span class="fu">aes</span>(<span class="at">alpha =</span> destaque)</span>
<span id="cb33-507"><a href="#cb33-507"></a>  ) <span class="sc">+</span></span>
<span id="cb33-508"><a href="#cb33-508"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb33-509"><a href="#cb33-509"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(destaque <span class="sc">==</span> <span class="st">"Resultado esperado"</span>),</span>
<span id="cb33-510"><a href="#cb33-510"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-511"><a href="#cb33-511"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb33-512"><a href="#cb33-512"></a>  ) <span class="sc">+</span></span>
<span id="cb33-513"><a href="#cb33-513"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-514"><a href="#cb33-514"></a>    <span class="fu">aes</span>(</span>
<span id="cb33-515"><a href="#cb33-515"></a>      <span class="at">label =</span> <span class="fu">str_glue</span>(<span class="st">"{number(n_decisao_resultado)}</span><span class="sc">\n</span><span class="st">({percent(perc, decimal.mark = ',', accuracy = 0.1)})"</span>),</span>
<span id="cb33-516"><a href="#cb33-516"></a>      <span class="at">color =</span> destaque_texto</span>
<span id="cb33-517"><a href="#cb33-517"></a>    ),</span>
<span id="cb33-518"><a href="#cb33-518"></a>    <span class="at">hjust =</span> <span class="sc">-</span><span class="fl">0.2</span>,</span>
<span id="cb33-519"><a href="#cb33-519"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb33-520"><a href="#cb33-520"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb33-521"><a href="#cb33-521"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span></span>
<span id="cb33-522"><a href="#cb33-522"></a>  ) <span class="sc">+</span></span>
<span id="cb33-523"><a href="#cb33-523"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-524"><a href="#cb33-524"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>),</span>
<span id="cb33-525"><a href="#cb33-525"></a>    <span class="at">check_overlap =</span> <span class="cn">TRUE</span>,</span>
<span id="cb33-526"><a href="#cb33-526"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb33-527"><a href="#cb33-527"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb33-528"><a href="#cb33-528"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-529"><a href="#cb33-529"></a>    <span class="fu">aes</span>(</span>
<span id="cb33-530"><a href="#cb33-530"></a>      <span class="at">y =</span> <span class="fl">1.5e4</span>,</span>
<span id="cb33-531"><a href="#cb33-531"></a>      <span class="at">x =</span> <span class="st">"Não Atendido"</span>,</span>
<span id="cb33-532"><a href="#cb33-532"></a>      <span class="at">label =</span> <span class="st">"As barras em destaques representam</span><span class="sc">\n</span><span class="st">os resultados esperados para cada decisão"</span></span>
<span id="cb33-533"><a href="#cb33-533"></a>    )</span>
<span id="cb33-534"><a href="#cb33-534"></a>  ) <span class="sc">+</span></span>
<span id="cb33-535"><a href="#cb33-535"></a>  <span class="fu">geom_curve</span>(</span>
<span id="cb33-536"><a href="#cb33-536"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>),</span>
<span id="cb33-537"><a href="#cb33-537"></a>    <span class="fu">aes</span>(<span class="at">y =</span> <span class="fl">1.48e4</span>, <span class="at">yend =</span> <span class="fl">1.35e4</span>, <span class="at">x =</span> <span class="st">"Não Atendido"</span>, <span class="at">xend =</span> <span class="st">"Atendido"</span>),</span>
<span id="cb33-538"><a href="#cb33-538"></a>    <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">"mm"</span>)),</span>
<span id="cb33-539"><a href="#cb33-539"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-540"><a href="#cb33-540"></a>    <span class="at">curvature =</span> <span class="fl">0.5</span></span>
<span id="cb33-541"><a href="#cb33-541"></a>  ) <span class="sc">+</span></span>
<span id="cb33-542"><a href="#cb33-542"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb33-543"><a href="#cb33-543"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cores_classificacao) <span class="sc">+</span></span>
<span id="cb33-544"><a href="#cb33-544"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb33-545"><a href="#cb33-545"></a>    <span class="at">labels =</span> scales<span class="sc">::</span>number,</span>
<span id="cb33-546"><a href="#cb33-546"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb33-547"><a href="#cb33-547"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">25e3</span>, <span class="fl">5e3</span>),</span>
<span id="cb33-548"><a href="#cb33-548"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">3e4</span>)</span>
<span id="cb33-549"><a href="#cb33-549"></a>  ) <span class="sc">+</span></span>
<span id="cb33-550"><a href="#cb33-550"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-551"><a href="#cb33-551"></a>    <span class="st">"Atendido"</span> <span class="ot">=</span> cores_tb[[<span class="st">"azul"</span>]],</span>
<span id="cb33-552"><a href="#cb33-552"></a>    <span class="st">"Parcialmente Atendido"</span> <span class="ot">=</span> cores_aep[[<span class="st">"laranja"</span>]],</span>
<span id="cb33-553"><a href="#cb33-553"></a>    <span class="st">"Não Atendido"</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb33-554"><a href="#cb33-554"></a>    <span class="st">"Resultado contraditório"</span> <span class="ot">=</span> cores_aep[[<span class="st">"cinza"</span>]]</span>
<span id="cb33-555"><a href="#cb33-555"></a>  )) <span class="sc">+</span></span>
<span id="cb33-556"><a href="#cb33-556"></a>  <span class="fu">scale_alpha_discrete</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb33-557"><a href="#cb33-557"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> <span class="fu">str_glue</span>(<span class="st">"Decisão do órgão: {decisao}"</span>), <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb33-558"><a href="#cb33-558"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-559"><a href="#cb33-559"></a>    <span class="at">title =</span> <span class="st">"Classificação de atendimento (NLP-BERT) X Decisão do órgão"</span>,</span>
<span id="cb33-560"><a href="#cb33-560"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb33-561"><a href="#cb33-561"></a>    <span class="at">x =</span> <span class="st">"Classificação NLP-BERT"</span></span>
<span id="cb33-562"><a href="#cb33-562"></a>  ) <span class="sc">+</span></span>
<span id="cb33-563"><a href="#cb33-563"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-564"><a href="#cb33-564"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>),</span>
<span id="cb33-565"><a href="#cb33-565"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>),</span>
<span id="cb33-566"><a href="#cb33-566"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb33-567"><a href="#cb33-567"></a>  )</span>
<span id="cb33-568"><a href="#cb33-568"></a><span class="in">```</span></span>
<span id="cb33-569"><a href="#cb33-569"></a></span>
<span id="cb33-570"><a href="#cb33-570"></a><span class="fu">### Classificação contraditória</span></span>
<span id="cb33-571"><a href="#cb33-571"></a></span>
<span id="cb33-572"><a href="#cb33-572"></a><span class="at">&gt; Uma classificação contraditória é quando o algoritmo classifica um pedido com "Acesso Concedido" (FalaBr) como "Não Atendido" (BERT).</span></span>
<span id="cb33-573"><a href="#cb33-573"></a></span>
<span id="cb33-576"><a href="#cb33-576"></a><span class="in">```{r}</span></span>
<span id="cb33-577"><a href="#cb33-577"></a><span class="co">#| fig-width: 7.2</span></span>
<span id="cb33-578"><a href="#cb33-578"></a><span class="co">#| fig-height: 4.8</span></span>
<span id="cb33-579"><a href="#cb33-579"></a></span>
<span id="cb33-580"><a href="#cb33-580"></a>pedidos_counts <span class="sc">%&gt;%</span></span>
<span id="cb33-581"><a href="#cb33-581"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-582"><a href="#cb33-582"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> resultados, <span class="at">y =</span> n_decisao_resultado, <span class="at">fill =</span> resultados)) <span class="sc">+</span></span>
<span id="cb33-583"><a href="#cb33-583"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> F, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]) <span class="sc">+</span></span>
<span id="cb33-584"><a href="#cb33-584"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-585"><a href="#cb33-585"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">str_glue</span>(</span>
<span id="cb33-586"><a href="#cb33-586"></a>      <span class="st">"{number(n_decisao_resultado)}</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb33-587"><a href="#cb33-587"></a>      <span class="st">"({percent(perc, accuracy = 0.1, decimal.mark = ',')})"</span></span>
<span id="cb33-588"><a href="#cb33-588"></a>    )),</span>
<span id="cb33-589"><a href="#cb33-589"></a>    <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">3</span>,</span>
<span id="cb33-590"><a href="#cb33-590"></a>    <span class="at">size =</span> <span class="fl">2.8</span>,</span>
<span id="cb33-591"><a href="#cb33-591"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,<span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]</span>
<span id="cb33-592"><a href="#cb33-592"></a>  ) <span class="sc">+</span></span>
<span id="cb33-593"><a href="#cb33-593"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb33-594"><a href="#cb33-594"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cores_classificacao) <span class="sc">+</span></span>
<span id="cb33-595"><a href="#cb33-595"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb33-596"><a href="#cb33-596"></a>    <span class="at">labels =</span> scales<span class="sc">::</span>number,</span>
<span id="cb33-597"><a href="#cb33-597"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb33-598"><a href="#cb33-598"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, <span class="fl">25e3</span>, <span class="fl">5e3</span>),</span>
<span id="cb33-599"><a href="#cb33-599"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">3.1e4</span>)</span>
<span id="cb33-600"><a href="#cb33-600"></a>  ) <span class="sc">+</span></span>
<span id="cb33-601"><a href="#cb33-601"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-602"><a href="#cb33-602"></a>    <span class="at">check_overlap =</span> <span class="cn">TRUE</span>,</span>
<span id="cb33-603"><a href="#cb33-603"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb33-604"><a href="#cb33-604"></a>    <span class="at">size =</span> <span class="fl">2.5</span>,</span>
<span id="cb33-605"><a href="#cb33-605"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-606"><a href="#cb33-606"></a>    <span class="fu">aes</span>(</span>
<span id="cb33-607"><a href="#cb33-607"></a>      <span class="at">y =</span> <span class="fl">1.5e4</span>,</span>
<span id="cb33-608"><a href="#cb33-608"></a>      <span class="at">x =</span> <span class="st">"Não Atendido"</span>,</span>
<span id="cb33-609"><a href="#cb33-609"></a>      <span class="at">label =</span> <span class="st">"A decisão do órgão</span><span class="sc">\n</span><span class="st">contradiz</span><span class="sc">\n</span><span class="st">a classificação</span><span class="sc">\n</span><span class="st">do modelo BERT"</span></span>
<span id="cb33-610"><a href="#cb33-610"></a>    )</span>
<span id="cb33-611"><a href="#cb33-611"></a>  ) <span class="sc">+</span></span>
<span id="cb33-612"><a href="#cb33-612"></a>  <span class="fu">geom_curve</span>(</span>
<span id="cb33-613"><a href="#cb33-613"></a>    <span class="fu">aes</span>(<span class="at">y =</span> <span class="fl">1.49e4</span>, <span class="at">yend =</span> <span class="fl">1.1e4</span>, <span class="at">x =</span> <span class="st">"Não Atendido"</span>, <span class="at">xend =</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb33-614"><a href="#cb33-614"></a>    <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="dv">3</span>, <span class="st">"mm"</span>)),</span>
<span id="cb33-615"><a href="#cb33-615"></a>    <span class="at">curvature =</span> .<span class="dv">1</span>,</span>
<span id="cb33-616"><a href="#cb33-616"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]</span>
<span id="cb33-617"><a href="#cb33-617"></a>  ) <span class="sc">+</span></span>
<span id="cb33-618"><a href="#cb33-618"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> <span class="fu">str_glue</span>(<span class="st">"Decisão do órgão (FalaBr/CGU): {decisao}"</span>), <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb33-619"><a href="#cb33-619"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-620"><a href="#cb33-620"></a>    <span class="at">title =</span> <span class="st">"Classificação (BERT/NLP) vs. Decisão do órgão (FalaBr/CGU)"</span>,</span>
<span id="cb33-621"><a href="#cb33-621"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb33-622"><a href="#cb33-622"></a>    <span class="at">x =</span> <span class="st">"Classificação (BERT/NLP)"</span></span>
<span id="cb33-623"><a href="#cb33-623"></a>  ) <span class="sc">+</span></span>
<span id="cb33-624"><a href="#cb33-624"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-625"><a href="#cb33-625"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="dv">0</span>, <span class="at">size =</span> <span class="dv">12</span>),</span>
<span id="cb33-626"><a href="#cb33-626"></a>    <span class="at">axis.title.x =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> .<span class="dv">5</span>),</span>
<span id="cb33-627"><a href="#cb33-627"></a>    <span class="at">axis.title.y =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> .<span class="dv">5</span>),</span>
<span id="cb33-628"><a href="#cb33-628"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-629"><a href="#cb33-629"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>)</span>
<span id="cb33-630"><a href="#cb33-630"></a>  )</span>
<span id="cb33-631"><a href="#cb33-631"></a><span class="in">```</span></span>
<span id="cb33-632"><a href="#cb33-632"></a></span>
<span id="cb33-633"><a href="#cb33-633"></a><span class="fu">### Classificação BERT/NLP X Decisão (%)</span></span>
<span id="cb33-634"><a href="#cb33-634"></a></span>
<span id="cb33-635"><a href="#cb33-635"></a>Uma classificação contraditória é quando o algoritmo classifica um pedido com "Acesso Concedido" (FalaBr/CGU) como "Não Atendido" (BERT/NLP).</span>
<span id="cb33-636"><a href="#cb33-636"></a></span>
<span id="cb33-639"><a href="#cb33-639"></a><span class="in">```{r}</span></span>
<span id="cb33-640"><a href="#cb33-640"></a><span class="co">#| label: plot-classificacao-contraditoria-reduzido</span></span>
<span id="cb33-641"><a href="#cb33-641"></a><span class="co">#| fig-height: 7</span></span>
<span id="cb33-642"><a href="#cb33-642"></a></span>
<span id="cb33-643"><a href="#cb33-643"></a>cores_classificacao2 <span class="ot">&lt;-</span> cores_classificacao</span>
<span id="cb33-644"><a href="#cb33-644"></a><span class="fu">names</span>(cores_classificacao2) <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="st">"Classificação BERT/NLP:"</span>, <span class="fu">names</span>(cores_classificacao))</span>
<span id="cb33-645"><a href="#cb33-645"></a></span>
<span id="cb33-646"><a href="#cb33-646"></a>pedidos_counts <span class="sc">%&gt;%</span></span>
<span id="cb33-647"><a href="#cb33-647"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-648"><a href="#cb33-648"></a>    <span class="at">resultados =</span> <span class="fu">str_glue</span>(<span class="st">"Classificação BERT/NLP: {resultados}"</span>)</span>
<span id="cb33-649"><a href="#cb33-649"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-650"><a href="#cb33-650"></a>  <span class="fu">mutate</span>(<span class="at">decisao =</span> tidytext<span class="sc">::</span><span class="fu">reorder_within</span>(</span>
<span id="cb33-651"><a href="#cb33-651"></a>    <span class="at">x =</span> decisao,</span>
<span id="cb33-652"><a href="#cb33-652"></a>    <span class="at">by =</span> perc,</span>
<span id="cb33-653"><a href="#cb33-653"></a>    <span class="at">within =</span> resultados,</span>
<span id="cb33-654"><a href="#cb33-654"></a>    <span class="at">fun =</span> sum</span>
<span id="cb33-655"><a href="#cb33-655"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb33-656"><a href="#cb33-656"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> decisao, <span class="at">y =</span> perc, <span class="at">fill =</span> resultados)) <span class="sc">+</span></span>
<span id="cb33-657"><a href="#cb33-657"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb33-658"><a href="#cb33-658"></a>    <span class="at">position =</span> <span class="st">"dodge"</span>,</span>
<span id="cb33-659"><a href="#cb33-659"></a>    <span class="at">show.legend =</span> F,</span>
<span id="cb33-660"><a href="#cb33-660"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-661"><a href="#cb33-661"></a>    <span class="at">alpha =</span> .<span class="dv">6</span></span>
<span id="cb33-662"><a href="#cb33-662"></a>  ) <span class="sc">+</span></span>
<span id="cb33-663"><a href="#cb33-663"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb33-664"><a href="#cb33-664"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido___Classificação BERT/NLP: Não Atendido"</span>),</span>
<span id="cb33-665"><a href="#cb33-665"></a>    <span class="at">position =</span> <span class="st">"dodge"</span>,</span>
<span id="cb33-666"><a href="#cb33-666"></a>    <span class="at">show.legend =</span> F,</span>
<span id="cb33-667"><a href="#cb33-667"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]</span>
<span id="cb33-668"><a href="#cb33-668"></a>  ) <span class="sc">+</span></span>
<span id="cb33-669"><a href="#cb33-669"></a>  tidytext<span class="sc">::</span><span class="fu">scale_x_reordered</span>() <span class="sc">+</span></span>
<span id="cb33-670"><a href="#cb33-670"></a>  hrbrthemes<span class="sc">::</span><span class="fu">scale_y_percent</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)) <span class="sc">+</span></span>
<span id="cb33-671"><a href="#cb33-671"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cores_classificacao2) <span class="sc">+</span></span>
<span id="cb33-672"><a href="#cb33-672"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb33-673"><a href="#cb33-673"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-674"><a href="#cb33-674"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb33-675"><a href="#cb33-675"></a>    <span class="at">fontface =</span> <span class="st">"bold"</span>,</span>
<span id="cb33-676"><a href="#cb33-676"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-677"><a href="#cb33-677"></a>    <span class="fu">aes</span>(<span class="at">label =</span> <span class="fu">percent</span>(perc, <span class="at">accuracy =</span> <span class="fl">0.1</span>, <span class="at">big.mark =</span> <span class="st">"."</span>, <span class="at">decimal.mark =</span> <span class="st">","</span>)),</span>
<span id="cb33-678"><a href="#cb33-678"></a>    <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">15</span></span>
<span id="cb33-679"><a href="#cb33-679"></a>  ) <span class="sc">+</span></span>
<span id="cb33-680"><a href="#cb33-680"></a>  <span class="fu">facet_wrap</span>(resultados <span class="sc">~</span> ., <span class="at">scales =</span> <span class="st">"free_y"</span>, <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb33-681"><a href="#cb33-681"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-682"><a href="#cb33-682"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-683"><a href="#cb33-683"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>),</span>
<span id="cb33-684"><a href="#cb33-684"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>)</span>
<span id="cb33-685"><a href="#cb33-685"></a>  ) <span class="sc">+</span></span>
<span id="cb33-686"><a href="#cb33-686"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-687"><a href="#cb33-687"></a>    <span class="at">title =</span> <span class="st">"Classificação de atendimento (NLP-BERT) X</span><span class="sc">\n</span><span class="st">Decisão do órgão"</span>,</span>
<span id="cb33-688"><a href="#cb33-688"></a>    <span class="at">y =</span> <span class="st">"% de pedidos"</span>,</span>
<span id="cb33-689"><a href="#cb33-689"></a>    <span class="at">x =</span> <span class="st">"Decisão do órgão no (FlaBr)"</span></span>
<span id="cb33-690"><a href="#cb33-690"></a>  )</span>
<span id="cb33-691"><a href="#cb33-691"></a><span class="in">```</span></span>
<span id="cb33-692"><a href="#cb33-692"></a></span>
<span id="cb33-693"><a href="#cb33-693"></a><span class="fu">### Classificação BERT/NLP X Decisão (% acum.)</span></span>
<span id="cb33-694"><a href="#cb33-694"></a></span>
<span id="cb33-697"><a href="#cb33-697"></a><span class="in">```{r}</span></span>
<span id="cb33-698"><a href="#cb33-698"></a><span class="co">#| label: plot-classificacao-bert-nlp-decisao-reduzido</span></span>
<span id="cb33-699"><a href="#cb33-699"></a><span class="co">#| fig-height: 6</span></span>
<span id="cb33-700"><a href="#cb33-700"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb33-701"><a href="#cb33-701"></a></span>
<span id="cb33-702"><a href="#cb33-702"></a>pedidos_counts <span class="sc">%&gt;%</span></span>
<span id="cb33-703"><a href="#cb33-703"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-704"><a href="#cb33-704"></a>    <span class="at">destaque =</span> <span class="fu">case_when</span>(</span>
<span id="cb33-705"><a href="#cb33-705"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-706"><a href="#cb33-706"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Parcialmente Concedido"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Parcialmente Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-707"><a href="#cb33-707"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Negado"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-708"><a href="#cb33-708"></a>      decisao <span class="sc">==</span> <span class="st">"Informação Inexistente"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-709"><a href="#cb33-709"></a>      decisao <span class="sc">==</span> <span class="st">"Não se trata de solicitação de informação"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-710"><a href="#cb33-710"></a>      decisao <span class="sc">==</span> <span class="st">"Órgão não tem competência para responder sobre o assunto"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-711"><a href="#cb33-711"></a>      decisao <span class="sc">==</span> <span class="st">"Pergunta Duplicada/Repetida"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-712"><a href="#cb33-712"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Resultado contraditório"</span></span>
<span id="cb33-713"><a href="#cb33-713"></a>    ),</span>
<span id="cb33-714"><a href="#cb33-714"></a>    <span class="at">destaque_texto =</span> <span class="fu">if_else</span>(</span>
<span id="cb33-715"><a href="#cb33-715"></a>      destaque <span class="sc">==</span> <span class="st">"Resultado esperado"</span>, <span class="fu">as.character</span>(resultados), destaque</span>
<span id="cb33-716"><a href="#cb33-716"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb33-717"><a href="#cb33-717"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb33-718"><a href="#cb33-718"></a>    <span class="at">x =</span> <span class="st">""</span>,</span>
<span id="cb33-719"><a href="#cb33-719"></a>    <span class="at">y =</span> perc,</span>
<span id="cb33-720"><a href="#cb33-720"></a>    <span class="at">fill =</span> <span class="fu">fct_rev</span>(resultados),</span>
<span id="cb33-721"><a href="#cb33-721"></a>    <span class="at">group =</span> <span class="fu">fct_rev</span>(resultados)</span>
<span id="cb33-722"><a href="#cb33-722"></a>  )) <span class="sc">+</span></span>
<span id="cb33-723"><a href="#cb33-723"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> T, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="fu">aes</span>(<span class="at">alpha =</span> destaque)) <span class="sc">+</span></span>
<span id="cb33-724"><a href="#cb33-724"></a>  <span class="fu">geom_label</span>(</span>
<span id="cb33-725"><a href="#cb33-725"></a>    <span class="at">position =</span> <span class="fu">position_stack</span>(<span class="at">vjust =</span> .<span class="dv">5</span>),</span>
<span id="cb33-726"><a href="#cb33-726"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-727"><a href="#cb33-727"></a>    <span class="fu">aes</span>(</span>
<span id="cb33-728"><a href="#cb33-728"></a>      <span class="at">label =</span> <span class="fu">percent</span>(perc, <span class="at">accuracy =</span> <span class="fl">0.1</span>, <span class="at">decimal.mark =</span> <span class="st">","</span>),</span>
<span id="cb33-729"><a href="#cb33-729"></a>      <span class="at">color =</span> destaque,</span>
<span id="cb33-730"><a href="#cb33-730"></a>      <span class="at">alpha =</span> destaque</span>
<span id="cb33-731"><a href="#cb33-731"></a>  )) <span class="sc">+</span></span>
<span id="cb33-732"><a href="#cb33-732"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb33-733"><a href="#cb33-733"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-734"><a href="#cb33-734"></a>    <span class="st">"Resultado esperado"</span> <span class="ot">=</span> <span class="st">"black"</span>,</span>
<span id="cb33-735"><a href="#cb33-735"></a>    <span class="st">"Resultado contraditório"</span> <span class="ot">=</span> <span class="st">"gray20"</span></span>
<span id="cb33-736"><a href="#cb33-736"></a>  ), <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb33-737"><a href="#cb33-737"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> cores_classificacao) <span class="sc">+</span></span>
<span id="cb33-738"><a href="#cb33-738"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">labels =</span> scales<span class="sc">::</span>percent, <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="fl">1.02</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb33-739"><a href="#cb33-739"></a>  <span class="fu">scale_alpha_discrete</span>(<span class="at">range =</span> <span class="fu">c</span>(<span class="fl">0.4</span>, <span class="dv">1</span>), <span class="at">guide =</span> <span class="st">"none"</span>) <span class="sc">+</span></span>
<span id="cb33-740"><a href="#cb33-740"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> <span class="fu">reorder</span>(decisao, <span class="sc">-</span>perc, sum), <span class="at">ncol =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb33-741"><a href="#cb33-741"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-742"><a href="#cb33-742"></a>    <span class="at">title =</span> <span class="st">"Classificação de atendimento (BERT/NLP) X Decisão do órgão (FalaBr/CGU)"</span>,</span>
<span id="cb33-743"><a href="#cb33-743"></a>    <span class="at">subtitle =</span> <span class="st">"As barras em destaques representam os resultados esperados para cada decisão"</span>,</span>
<span id="cb33-744"><a href="#cb33-744"></a>    <span class="at">x =</span> <span class="st">"Decisões do órgão (FalaBr/CGU)"</span>,</span>
<span id="cb33-745"><a href="#cb33-745"></a>    <span class="at">y =</span> <span class="st">"% de pedidos"</span>,</span>
<span id="cb33-746"><a href="#cb33-746"></a>    <span class="at">fill =</span> <span class="st">"Classificação BERT/NLP:"</span></span>
<span id="cb33-747"><a href="#cb33-747"></a>  ) <span class="sc">+</span></span>
<span id="cb33-748"><a href="#cb33-748"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-749"><a href="#cb33-749"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">face =</span> <span class="st">"bold"</span>, <span class="at">hjust =</span> <span class="dv">0</span>),</span>
<span id="cb33-750"><a href="#cb33-750"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-751"><a href="#cb33-751"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>,</span>
<span id="cb33-752"><a href="#cb33-752"></a>    <span class="at">legend.direction =</span> <span class="st">"horizontal"</span>,</span>
<span id="cb33-753"><a href="#cb33-753"></a>    <span class="at">legend.justification =</span> <span class="st">"left"</span></span>
<span id="cb33-754"><a href="#cb33-754"></a>  )</span>
<span id="cb33-755"><a href="#cb33-755"></a><span class="in">```</span></span>
<span id="cb33-756"><a href="#cb33-756"></a></span>
<span id="cb33-757"><a href="#cb33-757"></a>:::</span>
<span id="cb33-758"><a href="#cb33-758"></a></span>
<span id="cb33-759"><a href="#cb33-759"></a>**Destaques**</span>
<span id="cb33-760"><a href="#cb33-760"></a></span>
<span id="cb33-761"><a href="#cb33-761"></a><span class="ss">- </span>Uma classificação contraditória é quando a decisão de acesso emitida pelo órgão não corresponde à classificação de atendimento do algoritmo BERT/NLP definida pela @tbl-atendimento-classificacao</span>
<span id="cb33-762"><a href="#cb33-762"></a></span>
<span id="cb33-763"><a href="#cb33-763"></a><span class="ss">- </span>A classificação contraditória mais relevante é quando o algoritmo BERT/NLP classifica como "Não Atendido" uma solicitação onde o órgão alegou conceder acesso. São 8.045 pedidos que se enquadram nessa classificação contraditória e esses pedidos representam 20,1% dos acessos concedidos.</span>
<span id="cb33-764"><a href="#cb33-764"></a></span>
<span id="cb33-765"><a href="#cb33-765"></a><span class="ss">- </span>O algoritmo de classificação (BERT/NLP) capta uma taxa de não atendimento maior do que as apresentadas pelas decisões (FalaBr/CGU). Os resultados apontam para uma subnotificação do não atendimento de pedidos LAI pelo governo Federal.</span>
<span id="cb33-766"><a href="#cb33-766"></a></span>
<span id="cb33-767"><a href="#cb33-767"></a><span class="fu">## Análise qualitativa</span></span>
<span id="cb33-768"><a href="#cb33-768"></a></span>
<span id="cb33-769"><a href="#cb33-769"></a>A fim de entender as razões para uma taxa de não atendimento tão alta em casos classificados como "Acesso concedido", foi realizada uma análise qualitativa em uma amostra de 100 pedidos. Os pedidos foram lidos pela equipe da TB e a classificação de cada um foi avaliada.</span>
<span id="cb33-770"><a href="#cb33-770"></a></span>
<span id="cb33-771"><a href="#cb33-771"></a><span class="at">&gt; As amostras de pedidos selecionadas para análise humana estão disponíveis </span><span class="co">[</span><span class="ot">nesta planilha</span><span class="co">](https://docs.google.com/spreadsheets/d/1gLRXoeQ7OZUL3Fq78KNcZiUcsTbUPVKPFge4OXTrKQ4/edit#gid=447338924)</span></span>
<span id="cb33-772"><a href="#cb33-772"></a></span>
<span id="cb33-773"><a href="#cb33-773"></a></span>
<span id="cb33-774"><a href="#cb33-774"></a><span class="fu">### Resultados</span></span>
<span id="cb33-775"><a href="#cb33-775"></a></span>
<span id="cb33-776"><a href="#cb33-776"></a><span class="fu">#### Amostras analisadas</span></span>
<span id="cb33-777"><a href="#cb33-777"></a></span>
<span id="cb33-778"><a href="#cb33-778"></a><span class="at">&gt; **Dos 100 pedidos avaliados, 54 deles realmente não tiveram sua solicitação atendida, apesar de o órgão considerar o acesso como concedido** - esses são casos onde a classificação NLP está correta.</span></span>
<span id="cb33-779"><a href="#cb33-779"></a></span>
<span id="cb33-782"><a href="#cb33-782"></a><span class="in">```{r}</span></span>
<span id="cb33-783"><a href="#cb33-783"></a><span class="co">#| label: plot-resultado-amostra</span></span>
<span id="cb33-784"><a href="#cb33-784"></a><span class="co">#| fig-width: 7.2</span></span>
<span id="cb33-785"><a href="#cb33-785"></a><span class="co">#| fig-height: 4.8</span></span>
<span id="cb33-786"><a href="#cb33-786"></a></span>
<span id="cb33-787"><a href="#cb33-787"></a>read_amostra <span class="ot">&lt;-</span> <span class="cf">function</span>(aba) <span class="fu">read_sheet</span>(<span class="at">ss =</span> <span class="st">"1gLRXoeQ7OZUL3Fq78KNcZiUcsTbUPVKPFge4OXTrKQ4"</span>, <span class="at">sheet =</span> aba)</span>
<span id="cb33-788"><a href="#cb33-788"></a></span>
<span id="cb33-789"><a href="#cb33-789"></a><span class="co"># pegar dados da planilha</span></span>
<span id="cb33-790"><a href="#cb33-790"></a>quali <span class="ot">&lt;-</span> <span class="fu">read_amostra</span>(<span class="st">"DECISAO: Acesso Concedido | CLASSIFICAÇÃO: Não Atendido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-791"><a href="#cb33-791"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(<span class="st">`</span><span class="at">Classificação NLP está correta?</span><span class="st">`</span>))</span>
<span id="cb33-792"><a href="#cb33-792"></a></span>
<span id="cb33-793"><a href="#cb33-793"></a>quali <span class="sc">%&gt;%</span></span>
<span id="cb33-794"><a href="#cb33-794"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Classificação NLP está correta?</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-795"><a href="#cb33-795"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb33-796"><a href="#cb33-796"></a>    <span class="at">x =</span> <span class="st">`</span><span class="at">Classificação NLP está correta?</span><span class="st">`</span>,</span>
<span id="cb33-797"><a href="#cb33-797"></a>    <span class="at">y =</span> n,</span>
<span id="cb33-798"><a href="#cb33-798"></a>    <span class="at">fill =</span> <span class="st">`</span><span class="at">Classificação NLP está correta?</span><span class="st">`</span></span>
<span id="cb33-799"><a href="#cb33-799"></a>  )) <span class="sc">+</span></span>
<span id="cb33-800"><a href="#cb33-800"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> <span class="cn">FALSE</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]) <span class="sc">+</span></span>
<span id="cb33-801"><a href="#cb33-801"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n), <span class="at">vjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]) <span class="sc">+</span></span>
<span id="cb33-802"><a href="#cb33-802"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">65</span>), <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)) <span class="sc">+</span></span>
<span id="cb33-803"><a href="#cb33-803"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-804"><a href="#cb33-804"></a>    <span class="st">"Sim"</span> <span class="ot">=</span> cores_tb[[<span class="st">"azul"</span>]],</span>
<span id="cb33-805"><a href="#cb33-805"></a>    <span class="st">"Não"</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb33-806"><a href="#cb33-806"></a>    <span class="st">"Ambíguo"</span> <span class="ot">=</span> cores_aep[[<span class="st">"laranja"</span>]]</span>
<span id="cb33-807"><a href="#cb33-807"></a>  )) <span class="sc">+</span></span>
<span id="cb33-808"><a href="#cb33-808"></a>  <span class="fu">theme</span>(<span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()) <span class="sc">+</span></span>
<span id="cb33-809"><a href="#cb33-809"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-810"><a href="#cb33-810"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos</span><span class="sc">\n</span><span class="st">analisados"</span>,</span>
<span id="cb33-811"><a href="#cb33-811"></a>    <span class="at">x =</span> <span class="st">"A classificação (BERT/NLP) foi correta?"</span>,</span>
<span id="cb33-812"><a href="#cb33-812"></a>    <span class="at">title =</span> <span class="st">"Resultados das análises qualitativas"</span>,</span>
<span id="cb33-813"><a href="#cb33-813"></a>    <span class="at">Subtitle =</span> <span class="st">"Amostra aleatória de 100 pedidos"</span></span>
<span id="cb33-814"><a href="#cb33-814"></a>  )</span>
<span id="cb33-815"><a href="#cb33-815"></a><span class="in">```</span></span>
<span id="cb33-816"><a href="#cb33-816"></a></span>
<span id="cb33-817"><a href="#cb33-817"></a>Ainda considerando a amostra de 100 pedidos, foram analisados os 36 casos onde o algoritmo NLP classificou incorretamente o atendimento. As **justificativas das contrariedades* foram classificados em 4 categorias:</span>
<span id="cb33-818"><a href="#cb33-818"></a></span>
<span id="cb33-819"><a href="#cb33-819"></a><span class="ss">1. </span>**Erro de classificação**: quando o algoritmo realmente classifica errado o atendimento ao pedido. O acesso foi, de fato, concedido pelo órgão e o algoritmo NLP/BERT classificou o pedido como "Não atendido".</span>
<span id="cb33-820"><a href="#cb33-820"></a><span class="ss">2. </span>**Link externo**: a resposta foi concedida ao solicitante por meio de uma URL externa, a qual o algoritmo não possui acesso direto e, portanto, não é capaz de avaliar a resposta.</span>
<span id="cb33-821"><a href="#cb33-821"></a><span class="ss">3. </span>**Por e-mail**: a resposta foi concedida mas o conteúdo solicitado foi enviado diretamente ao e-mail do solicitante. Este é outro caso onde o algorítmo não é capaz de avaliar a resposta por não possuir acesso ao conteúdo enviado externamente.</span>
<span id="cb33-822"><a href="#cb33-822"></a><span class="ss">4. </span>**Retirar pessoalmente**: o órgão concedeu acesso ao usuário, porém o conteúdo solicitado só é possível de ser acessado pessoalmente pelo solicitante no endereço indicado pelo órgão.</span>
<span id="cb33-823"><a href="#cb33-823"></a></span>
<span id="cb33-824"><a href="#cb33-824"></a><span class="fu">#### Classificações (NLP/BERT) erradas</span></span>
<span id="cb33-825"><a href="#cb33-825"></a></span>
<span id="cb33-826"><a href="#cb33-826"></a><span class="at">&gt; Os casos 2., 3., e 4. são semelhantes ao casos onde os pedidos possuem anexo. O algoritmo não possui acesso ao conteúdo e, portanto, não pode avaliar o teor da resposta por completo.</span></span>
<span id="cb33-827"><a href="#cb33-827"></a></span>
<span id="cb33-830"><a href="#cb33-830"></a><span class="in">```{r}</span></span>
<span id="cb33-831"><a href="#cb33-831"></a><span class="co">#| fig-width: 7.2</span></span>
<span id="cb33-832"><a href="#cb33-832"></a><span class="co">#| fig-height: 4.8</span></span>
<span id="cb33-833"><a href="#cb33-833"></a></span>
<span id="cb33-834"><a href="#cb33-834"></a>quali <span class="sc">%&gt;%</span></span>
<span id="cb33-835"><a href="#cb33-835"></a>  <span class="fu">filter</span>(<span class="st">`</span><span class="at">Classificação NLP está correta?</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Não"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-836"><a href="#cb33-836"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-837"><a href="#cb33-837"></a>  <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">reorder</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, n)) <span class="sc">%&gt;%</span></span>
<span id="cb33-838"><a href="#cb33-838"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="at">y =</span> n, <span class="at">fill =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb33-839"><a href="#cb33-839"></a>  <span class="fu">geom_col</span>(<span class="at">show.legend =</span> F, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]) <span class="sc">+</span></span>
<span id="cb33-840"><a href="#cb33-840"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n), <span class="at">hjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]) <span class="sc">+</span></span>
<span id="cb33-841"><a href="#cb33-841"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb33-842"><a href="#cb33-842"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-843"><a href="#cb33-843"></a>    <span class="fu">rev</span>(<span class="fu">colorRampPalette</span>(<span class="fu">c</span>(cores_aep[[<span class="st">"rosa"</span>]], <span class="st">"white"</span>))(<span class="dv">5</span>)[<span class="dv">1</span><span class="sc">:</span><span class="dv">4</span>])</span>
<span id="cb33-844"><a href="#cb33-844"></a>  )) <span class="sc">+</span></span>
<span id="cb33-845"><a href="#cb33-845"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">17</span>)) <span class="sc">+</span></span>
<span id="cb33-846"><a href="#cb33-846"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-847"><a href="#cb33-847"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-848"><a href="#cb33-848"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>)</span>
<span id="cb33-849"><a href="#cb33-849"></a>  ) <span class="sc">+</span></span>
<span id="cb33-850"><a href="#cb33-850"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-851"><a href="#cb33-851"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb33-852"><a href="#cb33-852"></a>    <span class="at">title =</span> <span class="st">"Justificativas das classificações contraditórias"</span>,</span>
<span id="cb33-853"><a href="#cb33-853"></a>    <span class="at">x =</span> <span class="cn">NULL</span></span>
<span id="cb33-854"><a href="#cb33-854"></a>  )</span>
<span id="cb33-855"><a href="#cb33-855"></a><span class="in">```</span></span>
<span id="cb33-856"><a href="#cb33-856"></a></span>
<span id="cb33-857"><a href="#cb33-857"></a><span class="fu">#### Amostras de órgãos selecionados</span></span>
<span id="cb33-858"><a href="#cb33-858"></a></span>
<span id="cb33-859"><a href="#cb33-859"></a>Selecionamos amostras de órgãos específicos com alta classificações (BERT/NLP) contraditórias com a decisão de acesso expedida pelos órgãos. Os órgãos analisados foram:</span>
<span id="cb33-860"><a href="#cb33-860"></a></span>
<span id="cb33-861"><a href="#cb33-861"></a><span class="ss">- </span>ANVISA: que concedeu acesso a 4.735 pedidos, dos quais 860 (<span class="in">`r percent(860/4735, decimal.mark = ",", accuracy = 0.1)`</span>) foram classificados como Não Atendido pelo algoritmo BERT/NLP</span>
<span id="cb33-862"><a href="#cb33-862"></a><span class="ss">- </span>INSS: que concedeu acesso a 1.679 pedidos,</span>
<span id="cb33-863"><a href="#cb33-863"></a> dos quais 745 foram classificados como Não Atendido pelo algoritmo BERT/NLP (<span class="in">`r percent(745/1679, decimal.mark = ",", accuracy = 0.1)`</span>)</span>
<span id="cb33-864"><a href="#cb33-864"></a><span class="ss">- </span>SGPR: que concedeu acesso a 714 pedidos, dos quais 451 foram classificados como Não Atendido pelo algoritmo BERT/NLP (<span class="in">`r percent(451/714, decimal.mark = ",", accuracy = 0.1)`</span>)</span>
<span id="cb33-865"><a href="#cb33-865"></a></span>
<span id="cb33-866"><a href="#cb33-866"></a>::: {.panel-tabset}</span>
<span id="cb33-867"><a href="#cb33-867"></a></span>
<span id="cb33-868"><a href="#cb33-868"></a><span class="fu">#### INSS</span></span>
<span id="cb33-869"><a href="#cb33-869"></a></span>
<span id="cb33-870"><a href="#cb33-870"></a><span class="at">&gt; **INSS**: Foi constatado uma alta incidência de não atendimento de solicitações por parte do INSS, sob justificativas de que informações pessoais não podem ser oferecidas sem a devida confirmação de identidade do requerente - os pedidos normalmente versam sobre informações de prazos/recebimento de aposentadoria e serviços de seguridade social. Em outros casos o INSS orienta ao requerente a busca pela informação por outros meios que não o FalaBr, pois não se trata de pedido de acesso a informação com base na LAI - apesar de a orientação ser um procedimento correto, o acesso ao pedido não deve ser considerado concedido, pois o órgão não possui competencia para atender tal solicitação via FalaBr.</span></span>
<span id="cb33-871"><a href="#cb33-871"></a></span>
<span id="cb33-872"><a href="#cb33-872"></a><span class="ss">- </span>INSS – Instituto Nacional do Seguro Social</span>
<span id="cb33-873"><a href="#cb33-873"></a><span class="ss">- </span>Amostra: 20 de 745 pedidos com classificação contraditória</span>
<span id="cb33-874"><a href="#cb33-874"></a></span>
<span id="cb33-877"><a href="#cb33-877"></a><span class="in">```{r}</span></span>
<span id="cb33-878"><a href="#cb33-878"></a><span class="co">#| fig-width: 7.2</span></span>
<span id="cb33-879"><a href="#cb33-879"></a><span class="co">#| fig-height: 4.8</span></span>
<span id="cb33-880"><a href="#cb33-880"></a></span>
<span id="cb33-881"><a href="#cb33-881"></a><span class="fu">read_amostra</span>(<span class="at">aba =</span> <span class="st">"INSS"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-882"><a href="#cb33-882"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-883"><a href="#cb33-883"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-884"><a href="#cb33-884"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">" </span><span class="sc">\\</span><span class="st">("</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">("</span>),</span>
<span id="cb33-885"><a href="#cb33-885"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">"T"</span>, <span class="st">"T</span><span class="sc">\n</span><span class="st">"</span>),</span>
<span id="cb33-886"><a href="#cb33-886"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">reorder</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, n)</span>
<span id="cb33-887"><a href="#cb33-887"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-888"><a href="#cb33-888"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="at">x =</span> n, <span class="at">fill =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb33-889"><a href="#cb33-889"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb33-890"><a href="#cb33-890"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n), <span class="at">hjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb33-891"><a href="#cb33-891"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb33-892"><a href="#cb33-892"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-893"><a href="#cb33-893"></a>    cores_aep[[<span class="st">"laranja"</span>]],</span>
<span id="cb33-894"><a href="#cb33-894"></a>    cores_tb[[<span class="st">"azul"</span>]]</span>
<span id="cb33-895"><a href="#cb33-895"></a>  )) <span class="sc">+</span></span>
<span id="cb33-896"><a href="#cb33-896"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-897"><a href="#cb33-897"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>),</span>
<span id="cb33-898"><a href="#cb33-898"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb33-899"><a href="#cb33-899"></a>  ) <span class="sc">+</span></span>
<span id="cb33-900"><a href="#cb33-900"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-901"><a href="#cb33-901"></a>    <span class="at">title =</span> <span class="st">"Amostra de 20 pedidos da INSS"</span>,</span>
<span id="cb33-902"><a href="#cb33-902"></a>    <span class="at">subtitle =</span> <span class="st">"INSS – Instituto Nacional do Seguro Social"</span>,</span>
<span id="cb33-903"><a href="#cb33-903"></a>    <span class="at">x =</span> <span class="st">"Quantidade de pedidos analisados"</span>,</span>
<span id="cb33-904"><a href="#cb33-904"></a>    <span class="at">y =</span> <span class="st">"Justificativa da contrariedade"</span></span>
<span id="cb33-905"><a href="#cb33-905"></a>  )</span>
<span id="cb33-906"><a href="#cb33-906"></a><span class="in">```</span></span>
<span id="cb33-907"><a href="#cb33-907"></a></span>
<span id="cb33-908"><a href="#cb33-908"></a></span>
<span id="cb33-909"><a href="#cb33-909"></a><span class="fu">#### SGPR</span></span>
<span id="cb33-910"><a href="#cb33-910"></a></span>
<span id="cb33-911"><a href="#cb33-911"></a><span class="at">&gt; **SGPR**: Após o presidente da República declarar - em março de 2021 - que possuía provas sobre fraudes nas eleições de 2018 a SGPR recebeu ao menos 400 solicitações de envios - com base na LAI - das supostas provas existentes. Apesar de alegar não dispor das tais provas citadas pelo presidente, a SGPR alega que o acesso às mais de 400 solicitações foram concedidos. **O Algoritmo BERT/NLP constatou corretamente o não atendimento de todas as solicitações.**</span></span>
<span id="cb33-912"><a href="#cb33-912"></a></span>
<span id="cb33-913"><a href="#cb33-913"></a><span class="ss">- </span>SGPR – Secretaria-Geral da Presidência da República</span>
<span id="cb33-914"><a href="#cb33-914"></a><span class="ss">- </span>Foram analisados todos os 460 pedidos com classificação contraditória que o órgão possui</span>
<span id="cb33-915"><a href="#cb33-915"></a><span class="ss">  - </span>371 pedidos possuem o mesmo tema (fraudes nas eleições) e foram filtrados com regex</span>
<span id="cb33-916"><a href="#cb33-916"></a><span class="ss">  - </span>89 pedidos restantes</span>
<span id="cb33-917"><a href="#cb33-917"></a></span>
<span id="cb33-920"><a href="#cb33-920"></a><span class="in">```{r}</span></span>
<span id="cb33-921"><a href="#cb33-921"></a><span class="co">#| fig-width: 7.2</span></span>
<span id="cb33-922"><a href="#cb33-922"></a><span class="co">#| fig-height: 4.8</span></span>
<span id="cb33-923"><a href="#cb33-923"></a></span>
<span id="cb33-924"><a href="#cb33-924"></a><span class="fu">read_amostra</span>(<span class="at">aba =</span> <span class="st">"SGPR - DEMAIS"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-925"><a href="#cb33-925"></a>  <span class="fu">bind_rows</span>(</span>
<span id="cb33-926"><a href="#cb33-926"></a>    <span class="fu">read_amostra</span>(<span class="at">aba =</span> <span class="st">"SGPR - FRAUDE ELEIÇÕES"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-927"><a href="#cb33-927"></a>      <span class="fu">filter</span>(<span class="st">`</span><span class="at">Decisão do órgão</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-928"><a href="#cb33-928"></a>      <span class="fu">filter</span>(<span class="st">`</span><span class="at">Classificação Modelo NLP</span><span class="st">`</span> <span class="sc">==</span> <span class="st">"Não Atendido"</span>)</span>
<span id="cb33-929"><a href="#cb33-929"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-930"><a href="#cb33-930"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-931"><a href="#cb33-931"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-932"><a href="#cb33-932"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">" </span><span class="sc">\\</span><span class="st">("</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">("</span>),</span>
<span id="cb33-933"><a href="#cb33-933"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">"T"</span>, <span class="st">"T</span><span class="sc">\n</span><span class="st">"</span>),</span>
<span id="cb33-934"><a href="#cb33-934"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">reorder</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, n)</span>
<span id="cb33-935"><a href="#cb33-935"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-936"><a href="#cb33-936"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="at">x =</span> n, <span class="at">fill =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb33-937"><a href="#cb33-937"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb33-938"><a href="#cb33-938"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n), <span class="at">hjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb33-939"><a href="#cb33-939"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">400</span>)) <span class="sc">+</span></span>
<span id="cb33-940"><a href="#cb33-940"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-941"><a href="#cb33-941"></a>    cores_tb[[<span class="st">"cinza_escuro"</span>]],</span>
<span id="cb33-942"><a href="#cb33-942"></a>    cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb33-943"><a href="#cb33-943"></a>    cores_aep[[<span class="st">'rosa'</span>]],</span>
<span id="cb33-944"><a href="#cb33-944"></a>    cores_aep[[<span class="st">"laranja"</span>]],</span>
<span id="cb33-945"><a href="#cb33-945"></a>    <span class="fu">alpha</span>(cores_tb[[<span class="st">"azul"</span>]], .<span class="dv">6</span>),</span>
<span id="cb33-946"><a href="#cb33-946"></a>    cores_tb[[<span class="st">"azul"</span>]]</span>
<span id="cb33-947"><a href="#cb33-947"></a>  )) <span class="sc">+</span></span>
<span id="cb33-948"><a href="#cb33-948"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-949"><a href="#cb33-949"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>),</span>
<span id="cb33-950"><a href="#cb33-950"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>()</span>
<span id="cb33-951"><a href="#cb33-951"></a>  ) <span class="sc">+</span></span>
<span id="cb33-952"><a href="#cb33-952"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-953"><a href="#cb33-953"></a>    <span class="at">title =</span> <span class="st">"Amostra de 20 pedidos da SGPR"</span>,</span>
<span id="cb33-954"><a href="#cb33-954"></a>    <span class="at">subtitle =</span> <span class="st">"SGPR – Secretaria-Geral da Presidência da República"</span>,</span>
<span id="cb33-955"><a href="#cb33-955"></a>    <span class="at">x =</span> <span class="st">"Quantidade de pedidos analisados"</span>,</span>
<span id="cb33-956"><a href="#cb33-956"></a>    <span class="at">y =</span> <span class="st">"Justificativa da contrariedade"</span></span>
<span id="cb33-957"><a href="#cb33-957"></a>  )</span>
<span id="cb33-958"><a href="#cb33-958"></a><span class="in">```</span></span>
<span id="cb33-959"><a href="#cb33-959"></a></span>
<span id="cb33-960"><a href="#cb33-960"></a><span class="fu">#### PETROBRÁS</span></span>
<span id="cb33-961"><a href="#cb33-961"></a></span>
<span id="cb33-964"><a href="#cb33-964"></a><span class="in">```{r}</span></span>
<span id="cb33-965"><a href="#cb33-965"></a><span class="co">#| fig-width: 7.2</span></span>
<span id="cb33-966"><a href="#cb33-966"></a><span class="co">#| fig-height: 4.8</span></span>
<span id="cb33-967"><a href="#cb33-967"></a></span>
<span id="cb33-968"><a href="#cb33-968"></a><span class="fu">read_amostra</span>(<span class="at">aba =</span> <span class="st">"PETROBRAS"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-969"><a href="#cb33-969"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-970"><a href="#cb33-970"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-971"><a href="#cb33-971"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">" </span><span class="sc">\\</span><span class="st">("</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">("</span>),</span>
<span id="cb33-972"><a href="#cb33-972"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">"T"</span>, <span class="st">"T</span><span class="sc">\n</span><span class="st">"</span>),</span>
<span id="cb33-973"><a href="#cb33-973"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">reorder</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, n)</span>
<span id="cb33-974"><a href="#cb33-974"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-975"><a href="#cb33-975"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="at">x =</span> n, <span class="at">fill =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb33-976"><a href="#cb33-976"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb33-977"><a href="#cb33-977"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n), <span class="at">hjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb33-978"><a href="#cb33-978"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">15</span>)) <span class="sc">+</span></span>
<span id="cb33-979"><a href="#cb33-979"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-980"><a href="#cb33-980"></a>    cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb33-981"><a href="#cb33-981"></a>    cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb33-982"><a href="#cb33-982"></a>    cores_aep[[<span class="st">"laranja"</span>]],</span>
<span id="cb33-983"><a href="#cb33-983"></a>    cores_tb[[<span class="st">"azul"</span>]]</span>
<span id="cb33-984"><a href="#cb33-984"></a>  )) <span class="sc">+</span></span>
<span id="cb33-985"><a href="#cb33-985"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-986"><a href="#cb33-986"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-987"><a href="#cb33-987"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>)</span>
<span id="cb33-988"><a href="#cb33-988"></a>  ) <span class="sc">+</span></span>
<span id="cb33-989"><a href="#cb33-989"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-990"><a href="#cb33-990"></a>    <span class="at">title =</span> <span class="st">"Amostra de 20 pedidos da PETROBRÁS"</span>,</span>
<span id="cb33-991"><a href="#cb33-991"></a>    <span class="at">subtitle =</span> <span class="st">"PETROBRAS – Petróleo Brasileiro S.A."</span>,</span>
<span id="cb33-992"><a href="#cb33-992"></a>    <span class="at">x =</span> <span class="st">"Quantidade de pedidos analisados"</span>,</span>
<span id="cb33-993"><a href="#cb33-993"></a>    <span class="at">y =</span> <span class="st">"Justificativa da contrariedade"</span></span>
<span id="cb33-994"><a href="#cb33-994"></a>  )</span>
<span id="cb33-995"><a href="#cb33-995"></a><span class="in">```</span></span>
<span id="cb33-996"><a href="#cb33-996"></a></span>
<span id="cb33-997"><a href="#cb33-997"></a><span class="fu">#### CEX</span></span>
<span id="cb33-998"><a href="#cb33-998"></a></span>
<span id="cb33-1001"><a href="#cb33-1001"></a><span class="in">```{r}</span></span>
<span id="cb33-1002"><a href="#cb33-1002"></a><span class="co">#| fig-width: 7.2</span></span>
<span id="cb33-1003"><a href="#cb33-1003"></a><span class="co">#| fig-height: 4.8</span></span>
<span id="cb33-1004"><a href="#cb33-1004"></a></span>
<span id="cb33-1005"><a href="#cb33-1005"></a><span class="fu">read_amostra</span>(<span class="at">aba =</span> <span class="st">"CEX"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1006"><a href="#cb33-1006"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1007"><a href="#cb33-1007"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-1008"><a href="#cb33-1008"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">" </span><span class="sc">\\</span><span class="st">("</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">("</span>),</span>
<span id="cb33-1009"><a href="#cb33-1009"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">"T"</span>, <span class="st">"T</span><span class="sc">\n</span><span class="st">"</span>),</span>
<span id="cb33-1010"><a href="#cb33-1010"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">reorder</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, n)</span>
<span id="cb33-1011"><a href="#cb33-1011"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-1012"><a href="#cb33-1012"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="at">x =</span> n, <span class="at">fill =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb33-1013"><a href="#cb33-1013"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb33-1014"><a href="#cb33-1014"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n), <span class="at">hjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb33-1015"><a href="#cb33-1015"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">15</span>)) <span class="sc">+</span></span>
<span id="cb33-1016"><a href="#cb33-1016"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-1017"><a href="#cb33-1017"></a>    cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb33-1018"><a href="#cb33-1018"></a>    cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb33-1019"><a href="#cb33-1019"></a>    cores_aep[[<span class="st">"laranja"</span>]],</span>
<span id="cb33-1020"><a href="#cb33-1020"></a>    cores_tb[[<span class="st">"azul"</span>]]</span>
<span id="cb33-1021"><a href="#cb33-1021"></a>  )) <span class="sc">+</span></span>
<span id="cb33-1022"><a href="#cb33-1022"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-1023"><a href="#cb33-1023"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-1024"><a href="#cb33-1024"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>)</span>
<span id="cb33-1025"><a href="#cb33-1025"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1026"><a href="#cb33-1026"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-1027"><a href="#cb33-1027"></a>    <span class="at">title =</span> <span class="st">"Amostra de 20 pedidos da CEX"</span>,</span>
<span id="cb33-1028"><a href="#cb33-1028"></a>    <span class="at">subtitle =</span> <span class="st">"CEX - Comando do Exército"</span>,</span>
<span id="cb33-1029"><a href="#cb33-1029"></a>    <span class="at">x =</span> <span class="st">"Quantidade de pedidos analisados"</span>,</span>
<span id="cb33-1030"><a href="#cb33-1030"></a>    <span class="at">y =</span> <span class="st">"Justificativa da contrariedade"</span></span>
<span id="cb33-1031"><a href="#cb33-1031"></a>  )</span>
<span id="cb33-1032"><a href="#cb33-1032"></a><span class="in">```</span></span>
<span id="cb33-1033"><a href="#cb33-1033"></a></span>
<span id="cb33-1034"><a href="#cb33-1034"></a></span>
<span id="cb33-1035"><a href="#cb33-1035"></a><span class="fu">#### ANVISA</span></span>
<span id="cb33-1036"><a href="#cb33-1036"></a></span>
<span id="cb33-1037"><a href="#cb33-1037"></a><span class="at">&gt; A **ANVISA** considera como "Acesso concedido" casos onde a informação só pode ser obtida por meio de consulta às Agências Sanitárias municipais ou locais. Também foram observados casos onde a informação não pode ser concedida sem a devida comprovação de identidade.</span></span>
<span id="cb33-1038"><a href="#cb33-1038"></a></span>
<span id="cb33-1039"><a href="#cb33-1039"></a><span class="ss">- </span>ANVISA – Agência Nacional de Vigilância Sanitária</span>
<span id="cb33-1040"><a href="#cb33-1040"></a><span class="ss">- </span>Amostra: 20 de 860 pedidos com classificação contraditória</span>
<span id="cb33-1041"><a href="#cb33-1041"></a></span>
<span id="cb33-1044"><a href="#cb33-1044"></a><span class="in">```{r}</span></span>
<span id="cb33-1045"><a href="#cb33-1045"></a><span class="co">#| fig-width: 7.2</span></span>
<span id="cb33-1046"><a href="#cb33-1046"></a><span class="co">#| fig-height: 4.8</span></span>
<span id="cb33-1047"><a href="#cb33-1047"></a></span>
<span id="cb33-1048"><a href="#cb33-1048"></a><span class="fu">read_amostra</span>(<span class="at">aba =</span> <span class="st">"ANVISA"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1049"><a href="#cb33-1049"></a>  <span class="fu">count</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1050"><a href="#cb33-1050"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-1051"><a href="#cb33-1051"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">" </span><span class="sc">\\</span><span class="st">("</span>, <span class="st">"</span><span class="sc">\n</span><span class="st">("</span>),</span>
<span id="cb33-1052"><a href="#cb33-1052"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_replace_all</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="st">"T"</span>, <span class="st">"T</span><span class="sc">\n</span><span class="st">"</span>),</span>
<span id="cb33-1053"><a href="#cb33-1053"></a>    <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">reorder</span>(<span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, n)</span>
<span id="cb33-1054"><a href="#cb33-1054"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-1055"><a href="#cb33-1055"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>, <span class="at">x =</span> n, <span class="at">fill =</span> <span class="st">`</span><span class="at">Meio de atendimento</span><span class="st">`</span>)) <span class="sc">+</span></span>
<span id="cb33-1056"><a href="#cb33-1056"></a>  <span class="fu">geom_col</span>(<span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">show.legend =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb33-1057"><a href="#cb33-1057"></a>  <span class="fu">geom_text</span>(<span class="fu">aes</span>(<span class="at">label =</span> n), <span class="at">hjust =</span> <span class="sc">-</span><span class="dv">1</span>, <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]], <span class="at">fontface =</span> <span class="st">"bold"</span>) <span class="sc">+</span></span>
<span id="cb33-1058"><a href="#cb33-1058"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">15</span>)) <span class="sc">+</span></span>
<span id="cb33-1059"><a href="#cb33-1059"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-1060"><a href="#cb33-1060"></a>    cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb33-1061"><a href="#cb33-1061"></a>    cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb33-1062"><a href="#cb33-1062"></a>    cores_aep[[<span class="st">"laranja"</span>]],</span>
<span id="cb33-1063"><a href="#cb33-1063"></a>    cores_tb[[<span class="st">"azul"</span>]]</span>
<span id="cb33-1064"><a href="#cb33-1064"></a>  )) <span class="sc">+</span></span>
<span id="cb33-1065"><a href="#cb33-1065"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-1066"><a href="#cb33-1066"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-1067"><a href="#cb33-1067"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>)</span>
<span id="cb33-1068"><a href="#cb33-1068"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1069"><a href="#cb33-1069"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-1070"><a href="#cb33-1070"></a>    <span class="at">title =</span> <span class="st">"Amostra de 20 pedidos da ANVISA"</span>,</span>
<span id="cb33-1071"><a href="#cb33-1071"></a>    <span class="at">subtitle =</span> <span class="st">"ANVISA – Agência Nacional de Vigilância Sanitária"</span>,</span>
<span id="cb33-1072"><a href="#cb33-1072"></a>    <span class="at">x =</span> <span class="st">"Quantidade de pedidos analisados"</span>,</span>
<span id="cb33-1073"><a href="#cb33-1073"></a>    <span class="at">y =</span> <span class="st">"Justificativa da contrariedade"</span></span>
<span id="cb33-1074"><a href="#cb33-1074"></a>  )</span>
<span id="cb33-1075"><a href="#cb33-1075"></a><span class="in">```</span></span>
<span id="cb33-1076"><a href="#cb33-1076"></a></span>
<span id="cb33-1077"><a href="#cb33-1077"></a></span>
<span id="cb33-1078"><a href="#cb33-1078"></a>:::</span>
<span id="cb33-1079"><a href="#cb33-1079"></a></span>
<span id="cb33-1080"><a href="#cb33-1080"></a>**Destaques**</span>
<span id="cb33-1081"><a href="#cb33-1081"></a></span>
<span id="cb33-1082"><a href="#cb33-1082"></a><span class="ss">- </span>Análise qualitativa geral</span>
<span id="cb33-1083"><a href="#cb33-1083"></a><span class="ss">  - </span>**A equipe da TB leu e avaliou 100 pedidos LAI, verificando se a classificação do algoritmo (BERT/NLP) realmente correspondia com a realidade.**</span>
<span id="cb33-1084"><a href="#cb33-1084"></a><span class="ss">  - </span>Dos 100 pedidos avaliados, **54 deles realmente não tiveram sua solicitação atendida, apesar de o órgão considerar o acesso como concedido** - esses são casos onde a classificação NLP está correta.</span>
<span id="cb33-1085"><a href="#cb33-1085"></a><span class="ss">  - </span>os **motivos de erro de classificação do algoritmo (BERT/NLP)** variaram em 4 tipos diferentes: **(i)** *erro de classificação*, **(ii)** conteúdo disponibilizado via *link/url externo*, **(iii)** conteúdo disponibilizado *por e-mail*, **(iv)** conteúdo disponibilizado por *meio presencial*. Os casos iii, iii e iv são semelhantes ao casos onde os pedidos possuem anexo. O algoritmo não possui acesso ao conteúdo e, portanto, não pode avaliar o teor da resposta por completo.</span>
<span id="cb33-1086"><a href="#cb33-1086"></a></span>
<span id="cb33-1087"><a href="#cb33-1087"></a><span class="fu">## Não atendimento da LAI pelos órgãos</span></span>
<span id="cb33-1088"><a href="#cb33-1088"></a></span>
<span id="cb33-1089"><a href="#cb33-1089"></a><span class="fu">### Taxa de classificações contraditórias</span></span>
<span id="cb33-1090"><a href="#cb33-1090"></a></span>
<span id="cb33-1091"><a href="#cb33-1091"></a>::: {.panel-tabset}</span>
<span id="cb33-1092"><a href="#cb33-1092"></a></span>
<span id="cb33-1093"><a href="#cb33-1093"></a><span class="fu">#### Distribuição</span></span>
<span id="cb33-1094"><a href="#cb33-1094"></a></span>
<span id="cb33-1097"><a href="#cb33-1097"></a><span class="in">```{r}</span></span>
<span id="cb33-1098"><a href="#cb33-1098"></a><span class="co">#| fig-height: 5.5</span></span>
<span id="cb33-1099"><a href="#cb33-1099"></a><span class="co">#| fig-width: 8</span></span>
<span id="cb33-1100"><a href="#cb33-1100"></a></span>
<span id="cb33-1101"><a href="#cb33-1101"></a>pedidos <span class="sc">%&gt;%</span></span>
<span id="cb33-1102"><a href="#cb33-1102"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"n_orgao_decisao_resultados"</span>, orgao, decisao, resultados) <span class="sc">%&gt;%</span></span>
<span id="cb33-1103"><a href="#cb33-1103"></a>  <span class="fu">add_count</span>(<span class="at">name =</span> <span class="st">"n_orgao"</span>, orgao, <span class="at">wt =</span> n_orgao_decisao_resultados) <span class="sc">%&gt;%</span></span>
<span id="cb33-1104"><a href="#cb33-1104"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> n_orgao_decisao_resultados <span class="sc">/</span> n_orgao) <span class="sc">%&gt;%</span></span>
<span id="cb33-1105"><a href="#cb33-1105"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>, resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1106"><a href="#cb33-1106"></a>  <span class="fu">mutate</span>(<span class="at">cutoff =</span> <span class="fu">if_else</span>(perc <span class="sc">&gt;=</span> .<span class="dv">2</span>, <span class="st">"Acima de 20%"</span>, <span class="st">"Normal"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb33-1107"><a href="#cb33-1107"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> perc)) <span class="sc">+</span></span>
<span id="cb33-1108"><a href="#cb33-1108"></a>  <span class="fu">geom_histogram</span>(</span>
<span id="cb33-1109"><a href="#cb33-1109"></a>    <span class="fu">aes</span>(<span class="at">alpha =</span> cutoff),</span>
<span id="cb33-1110"><a href="#cb33-1110"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb33-1111"><a href="#cb33-1111"></a>    <span class="at">fill =</span> cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb33-1112"><a href="#cb33-1112"></a>    <span class="at">bins =</span> <span class="dv">60</span></span>
<span id="cb33-1113"><a href="#cb33-1113"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1114"><a href="#cb33-1114"></a>  <span class="fu">geom_vline</span>(</span>
<span id="cb33-1115"><a href="#cb33-1115"></a>    <span class="fu">aes</span>(<span class="at">xintercept =</span> <span class="fu">mean</span>(perc)),</span>
<span id="cb33-1116"><a href="#cb33-1116"></a>    <span class="at">color =</span> <span class="st">"black"</span>,</span>
<span id="cb33-1117"><a href="#cb33-1117"></a>    <span class="at">lty =</span> <span class="st">"dashed"</span>,</span>
<span id="cb33-1118"><a href="#cb33-1118"></a>    <span class="at">size =</span> <span class="dv">2</span></span>
<span id="cb33-1119"><a href="#cb33-1119"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1120"><a href="#cb33-1120"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-1121"><a href="#cb33-1121"></a>    <span class="fu">aes</span>(</span>
<span id="cb33-1122"><a href="#cb33-1122"></a>      <span class="at">label =</span> <span class="fu">str_glue</span>(</span>
<span id="cb33-1123"><a href="#cb33-1123"></a>        <span class="st">"Em média, cada órgão teve</span><span class="sc">\n</span><span class="st">"</span>,</span>
<span id="cb33-1124"><a href="#cb33-1124"></a>        <span class="st">"{round(mean(perc)*100, 1)}% de pedidos com decisão </span><span class="sc">\"</span><span class="st">Acesso Concedido</span><span class="sc">\"</span><span class="st">"</span>,</span>
<span id="cb33-1125"><a href="#cb33-1125"></a>        <span class="st">"</span><span class="sc">\n</span><span class="st">foram classificados como </span><span class="sc">\"</span><span class="st">Não Atendido</span><span class="sc">\"</span><span class="st">"</span></span>
<span id="cb33-1126"><a href="#cb33-1126"></a>      ),</span>
<span id="cb33-1127"><a href="#cb33-1127"></a>      <span class="at">x =</span> .<span class="dv">21</span>,</span>
<span id="cb33-1128"><a href="#cb33-1128"></a>      <span class="at">y =</span> <span class="dv">15</span></span>
<span id="cb33-1129"><a href="#cb33-1129"></a>    ),</span>
<span id="cb33-1130"><a href="#cb33-1130"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb33-1131"><a href="#cb33-1131"></a>    <span class="at">hjust =</span> <span class="dv">0</span>,</span>
<span id="cb33-1132"><a href="#cb33-1132"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-1133"><a href="#cb33-1133"></a>    <span class="at">check_overlap =</span> T</span>
<span id="cb33-1134"><a href="#cb33-1134"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1135"><a href="#cb33-1135"></a>  <span class="fu">geom_curve</span>(</span>
<span id="cb33-1136"><a href="#cb33-1136"></a>    <span class="fu">aes</span>(</span>
<span id="cb33-1137"><a href="#cb33-1137"></a>      <span class="at">x =</span> .<span class="dv">205</span>, <span class="at">xend =</span> <span class="fu">mean</span>(perc)<span class="sc">+</span>.<span class="dv">01</span>,</span>
<span id="cb33-1138"><a href="#cb33-1138"></a>      <span class="at">y =</span> <span class="dv">15</span>, <span class="at">yend =</span> <span class="dv">17</span></span>
<span id="cb33-1139"><a href="#cb33-1139"></a>    ),</span>
<span id="cb33-1140"><a href="#cb33-1140"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-1141"><a href="#cb33-1141"></a>    <span class="at">curvature =</span> .<span class="dv">3</span>,</span>
<span id="cb33-1142"><a href="#cb33-1142"></a>    <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.02</span>, <span class="st">"npc"</span>))</span>
<span id="cb33-1143"><a href="#cb33-1143"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1144"><a href="#cb33-1144"></a>  <span class="fu">scale_alpha_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="fl">0.3</span>)) <span class="sc">+</span></span>
<span id="cb33-1145"><a href="#cb33-1145"></a>  hrbrthemes<span class="sc">::</span><span class="fu">scale_x_percent</span>(</span>
<span id="cb33-1146"><a href="#cb33-1146"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>),</span>
<span id="cb33-1147"><a href="#cb33-1147"></a>    <span class="at">breaks =</span> <span class="fu">seq</span>(<span class="dv">0</span>, .<span class="dv">6</span>, <span class="at">by =</span> .<span class="dv">05</span>)</span>
<span id="cb33-1148"><a href="#cb33-1148"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1149"><a href="#cb33-1149"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb33-1150"><a href="#cb33-1150"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">27</span>),</span>
<span id="cb33-1151"><a href="#cb33-1151"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb33-1152"><a href="#cb33-1152"></a>    <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">10</span>, <span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">25</span>)</span>
<span id="cb33-1153"><a href="#cb33-1153"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1154"><a href="#cb33-1154"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-1155"><a href="#cb33-1155"></a>    <span class="at">axis.ticks.x =</span> <span class="fu">element_line</span>(),</span>
<span id="cb33-1156"><a href="#cb33-1156"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-1157"><a href="#cb33-1157"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(<span class="fl">0.9</span>, <span class="fl">0.9</span>)</span>
<span id="cb33-1158"><a href="#cb33-1158"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1159"><a href="#cb33-1159"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-1160"><a href="#cb33-1160"></a>    <span class="at">x =</span> <span class="st">'% de pedidos com "Acesso Concedido" classificados como "Não Atendido"'</span>,</span>
<span id="cb33-1161"><a href="#cb33-1161"></a>    <span class="at">y =</span> <span class="st">"Número de órgãos do governo Federal"</span>,</span>
<span id="cb33-1162"><a href="#cb33-1162"></a>    <span class="at">title =</span> <span class="st">"Distribuição do % de classificações contraditóras"</span>,</span>
<span id="cb33-1163"><a href="#cb33-1163"></a>    <span class="at">alpha =</span> <span class="st">"% de classificações</span><span class="sc">\n</span><span class="st">contraditórias"</span></span>
<span id="cb33-1164"><a href="#cb33-1164"></a>  )</span>
<span id="cb33-1165"><a href="#cb33-1165"></a><span class="in">```</span></span>
<span id="cb33-1166"><a href="#cb33-1166"></a></span>
<span id="cb33-1167"><a href="#cb33-1167"></a><span class="fu">#### Dispersão</span></span>
<span id="cb33-1168"><a href="#cb33-1168"></a></span>
<span id="cb33-1171"><a href="#cb33-1171"></a><span class="in">```{r}</span></span>
<span id="cb33-1172"><a href="#cb33-1172"></a><span class="co">#| fig-height: 11</span></span>
<span id="cb33-1173"><a href="#cb33-1173"></a><span class="co">#| fig-width: 8.5</span></span>
<span id="cb33-1174"><a href="#cb33-1174"></a></span>
<span id="cb33-1175"><a href="#cb33-1175"></a>pedidos <span class="sc">%&gt;%</span></span>
<span id="cb33-1176"><a href="#cb33-1176"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"n_orgao_decisao_resultados"</span>, orgao_abrev, decisao, resultados) <span class="sc">%&gt;%</span></span>
<span id="cb33-1177"><a href="#cb33-1177"></a>  <span class="fu">add_count</span>(<span class="at">name =</span> <span class="st">"n_orgao"</span>, orgao_abrev, <span class="at">wt =</span> n_orgao_decisao_resultados) <span class="sc">%&gt;%</span></span>
<span id="cb33-1178"><a href="#cb33-1178"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> n_orgao_decisao_resultados <span class="sc">/</span> n_orgao) <span class="sc">%&gt;%</span></span>
<span id="cb33-1179"><a href="#cb33-1179"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-1180"><a href="#cb33-1180"></a>    <span class="at">destaque =</span> <span class="fu">case_when</span>(</span>
<span id="cb33-1181"><a href="#cb33-1181"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-1182"><a href="#cb33-1182"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Parcialmente Concedido"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Parcialmente Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-1183"><a href="#cb33-1183"></a>      decisao <span class="sc">==</span> <span class="st">"Acesso Negado"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-1184"><a href="#cb33-1184"></a>      decisao <span class="sc">==</span> <span class="st">"Informação Inexistente"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-1185"><a href="#cb33-1185"></a>      decisao <span class="sc">==</span> <span class="st">"Não se trata de solicitação de informação"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-1186"><a href="#cb33-1186"></a>      decisao <span class="sc">==</span> <span class="st">"Órgão não tem competência para responder sobre o assunto"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-1187"><a href="#cb33-1187"></a>      decisao <span class="sc">==</span> <span class="st">"Pergunta Duplicada/Repetida"</span> <span class="sc">&amp;</span> resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span> <span class="sc">~</span> <span class="st">"Resultado esperado"</span>,</span>
<span id="cb33-1188"><a href="#cb33-1188"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Resultado contraditório"</span></span>
<span id="cb33-1189"><a href="#cb33-1189"></a>    ),</span>
<span id="cb33-1190"><a href="#cb33-1190"></a>    <span class="at">destaque_texto =</span> <span class="fu">if_else</span>(</span>
<span id="cb33-1191"><a href="#cb33-1191"></a>      destaque <span class="sc">==</span> <span class="st">"Resultado esperado"</span>, <span class="fu">as.character</span>(resultados), destaque</span>
<span id="cb33-1192"><a href="#cb33-1192"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb33-1193"><a href="#cb33-1193"></a>  <span class="fu">filter</span>(destaque <span class="sc">!=</span> <span class="st">"Resultado esperado"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1194"><a href="#cb33-1194"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> perc, <span class="at">y =</span> <span class="st">""</span>, <span class="at">color =</span> resultados)) <span class="sc">+</span></span>
<span id="cb33-1195"><a href="#cb33-1195"></a>  ggbeeswarm<span class="sc">::</span><span class="fu">geom_quasirandom</span>(</span>
<span id="cb33-1196"><a href="#cb33-1196"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb33-1197"><a href="#cb33-1197"></a>    <span class="at">alpha =</span> .<span class="dv">4</span>,</span>
<span id="cb33-1198"><a href="#cb33-1198"></a>    <span class="at">groupOnX=</span><span class="cn">FALSE</span></span>
<span id="cb33-1199"><a href="#cb33-1199"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1200"><a href="#cb33-1200"></a>  ggforce<span class="sc">::</span><span class="fu">geom_mark_circle</span>(</span>
<span id="cb33-1201"><a href="#cb33-1201"></a>    <span class="at">colour =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-1202"><a href="#cb33-1202"></a>    <span class="at">expand =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">"mm"</span>),</span>
<span id="cb33-1203"><a href="#cb33-1203"></a>    <span class="at">con.cap =</span> <span class="fu">unit</span>(<span class="dv">0</span>, <span class="st">"mm"</span>),</span>
<span id="cb33-1204"><a href="#cb33-1204"></a>    <span class="at">con.colour =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-1205"><a href="#cb33-1205"></a>    <span class="at">label.fontsize =</span> <span class="dv">8</span>,</span>
<span id="cb33-1206"><a href="#cb33-1206"></a>    <span class="at">label.colour =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-1207"><a href="#cb33-1207"></a>    <span class="at">label.buffer =</span> <span class="fu">unit</span>(<span class="dv">10</span>, <span class="st">"mm"</span>),</span>
<span id="cb33-1208"><a href="#cb33-1208"></a>    <span class="at">label.fill =</span> <span class="st">"transparent"</span>,</span>
<span id="cb33-1209"><a href="#cb33-1209"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-1210"><a href="#cb33-1210"></a>    <span class="fu">aes</span>(</span>
<span id="cb33-1211"><a href="#cb33-1211"></a>      <span class="at">filter =</span> orgao_abrev <span class="sc">==</span> <span class="st">"CEASA-MG"</span> <span class="sc">&amp;</span></span>
<span id="cb33-1212"><a href="#cb33-1212"></a>        decisao <span class="sc">==</span> <span class="st">"Acesso Parcialmente Concedido"</span> <span class="sc">&amp;</span></span>
<span id="cb33-1213"><a href="#cb33-1213"></a>        resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>,</span>
<span id="cb33-1214"><a href="#cb33-1214"></a>      <span class="at">label =</span> <span class="st">"Cada ponto</span><span class="sc">\n</span><span class="st">é um órgão"</span></span>
<span id="cb33-1215"><a href="#cb33-1215"></a>  )) <span class="sc">+</span></span>
<span id="cb33-1216"><a href="#cb33-1216"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span> <span class="fu">reorder</span>(decisao, <span class="sc">-</span>perc, sum), <span class="at">ncol =</span> <span class="dv">1</span>, <span class="at">scales =</span> <span class="st">"free_x"</span>) <span class="sc">+</span></span>
<span id="cb33-1217"><a href="#cb33-1217"></a>  hrbrthemes<span class="sc">::</span><span class="fu">scale_x_percent</span>(<span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">55</span>)) <span class="sc">+</span></span>
<span id="cb33-1218"><a href="#cb33-1218"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(cores_classificacao)) <span class="sc">+</span></span>
<span id="cb33-1219"><a href="#cb33-1219"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-1220"><a href="#cb33-1220"></a>    <span class="at">strip.text =</span> <span class="fu">element_text</span>(<span class="at">hjust =</span> <span class="dv">0</span>),</span>
<span id="cb33-1221"><a href="#cb33-1221"></a>    <span class="at">legend.position =</span> <span class="st">"top"</span>,</span>
<span id="cb33-1222"><a href="#cb33-1222"></a>    <span class="at">legend.justification =</span> <span class="st">"left"</span>,</span>
<span id="cb33-1223"><a href="#cb33-1223"></a>    <span class="at">legend.direction =</span> <span class="st">"horizontal"</span>,</span>
<span id="cb33-1224"><a href="#cb33-1224"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-1225"><a href="#cb33-1225"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>)</span>
<span id="cb33-1226"><a href="#cb33-1226"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1227"><a href="#cb33-1227"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-1228"><a href="#cb33-1228"></a>    <span class="at">title =</span> <span class="st">"Percentual de classificações contraditórias por órgão"</span>,</span>
<span id="cb33-1229"><a href="#cb33-1229"></a>    <span class="at">subtitle =</span> <span class="st">"Cada ponto representa um órgão"</span>,</span>
<span id="cb33-1230"><a href="#cb33-1230"></a>    <span class="at">color =</span> <span class="st">"Classificação (NLP/BERT):"</span>,</span>
<span id="cb33-1231"><a href="#cb33-1231"></a>    <span class="at">y =</span> <span class="st">"Decisão de Acesso (FalaBr)"</span>,</span>
<span id="cb33-1232"><a href="#cb33-1232"></a>    <span class="at">x =</span> <span class="st">"Percentual de decisões contraditórias com a classificação NLP/BERT"</span></span>
<span id="cb33-1233"><a href="#cb33-1233"></a>  )</span>
<span id="cb33-1234"><a href="#cb33-1234"></a><span class="in">```</span></span>
<span id="cb33-1235"><a href="#cb33-1235"></a></span>
<span id="cb33-1236"><a href="#cb33-1236"></a>:::</span>
<span id="cb33-1237"><a href="#cb33-1237"></a></span>
<span id="cb33-1238"><a href="#cb33-1238"></a><span class="fu">### Órgãos com mais de 20% de classificações contraditórias</span></span>
<span id="cb33-1239"><a href="#cb33-1239"></a></span>
<span id="cb33-1240"><a href="#cb33-1240"></a>::: {.panel-tabset}</span>
<span id="cb33-1241"><a href="#cb33-1241"></a></span>
<span id="cb33-1242"><a href="#cb33-1242"></a><span class="fu">#### Percentual (%)</span></span>
<span id="cb33-1243"><a href="#cb33-1243"></a></span>
<span id="cb33-1246"><a href="#cb33-1246"></a><span class="in">```{r}</span></span>
<span id="cb33-1247"><a href="#cb33-1247"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb33-1248"><a href="#cb33-1248"></a></span>
<span id="cb33-1249"><a href="#cb33-1249"></a>pedidos <span class="sc">%&gt;%</span></span>
<span id="cb33-1250"><a href="#cb33-1250"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"n_orgao_decisao_resultados"</span>, orgao_abrev, decisao, resultados) <span class="sc">%&gt;%</span></span>
<span id="cb33-1251"><a href="#cb33-1251"></a>  <span class="fu">add_count</span>(<span class="at">name =</span> <span class="st">"n_orgao"</span>, orgao_abrev, <span class="at">wt =</span> n_orgao_decisao_resultados) <span class="sc">%&gt;%</span></span>
<span id="cb33-1252"><a href="#cb33-1252"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> n_orgao_decisao_resultados <span class="sc">/</span> n_orgao) <span class="sc">%&gt;%</span></span>
<span id="cb33-1253"><a href="#cb33-1253"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>, resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1254"><a href="#cb33-1254"></a>  <span class="fu">filter</span>(perc <span class="sc">&gt;=</span> .<span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1255"><a href="#cb33-1255"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> perc, <span class="at">y =</span> <span class="fu">reorder</span>(orgao_abrev, perc))) <span class="sc">+</span></span>
<span id="cb33-1256"><a href="#cb33-1256"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb33-1257"><a href="#cb33-1257"></a>    <span class="at">fill =</span> cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb33-1258"><a href="#cb33-1258"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"rosa"</span>]],</span>
<span id="cb33-1259"><a href="#cb33-1259"></a>    <span class="at">size =</span> .<span class="dv">1</span>,</span>
<span id="cb33-1260"><a href="#cb33-1260"></a>    <span class="at">alpha =</span> .<span class="dv">7</span></span>
<span id="cb33-1261"><a href="#cb33-1261"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1262"><a href="#cb33-1262"></a>  hrbrthemes<span class="sc">::</span><span class="fu">scale_x_percent</span>(</span>
<span id="cb33-1263"><a href="#cb33-1263"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>),</span>
<span id="cb33-1264"><a href="#cb33-1264"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, .<span class="dv">6</span>)</span>
<span id="cb33-1265"><a href="#cb33-1265"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1266"><a href="#cb33-1266"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-1267"><a href="#cb33-1267"></a>    <span class="at">title =</span> <span class="st">"Percentual de classificações contraditórias por órgão (Acesso Concedido e Não Atendido)"</span>,</span>
<span id="cb33-1268"><a href="#cb33-1268"></a>    <span class="at">x =</span> <span class="st">"% de classificações contraditórias"</span>,</span>
<span id="cb33-1269"><a href="#cb33-1269"></a>    <span class="at">y =</span> <span class="st">"Órgão (sigla)"</span></span>
<span id="cb33-1270"><a href="#cb33-1270"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1271"><a href="#cb33-1271"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-1272"><a href="#cb33-1272"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-1273"><a href="#cb33-1273"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>)</span>
<span id="cb33-1274"><a href="#cb33-1274"></a>  )</span>
<span id="cb33-1275"><a href="#cb33-1275"></a><span class="in">```</span></span>
<span id="cb33-1276"><a href="#cb33-1276"></a></span>
<span id="cb33-1277"><a href="#cb33-1277"></a><span class="fu">#### Números absolutos</span></span>
<span id="cb33-1278"><a href="#cb33-1278"></a></span>
<span id="cb33-1281"><a href="#cb33-1281"></a><span class="in">```{r}</span></span>
<span id="cb33-1282"><a href="#cb33-1282"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb33-1283"><a href="#cb33-1283"></a></span>
<span id="cb33-1284"><a href="#cb33-1284"></a>pedidos <span class="sc">%&gt;%</span></span>
<span id="cb33-1285"><a href="#cb33-1285"></a>  <span class="fu">count</span>(<span class="at">name =</span> <span class="st">"n_orgao_decisao_resultados"</span>, orgao, decisao, resultados) <span class="sc">%&gt;%</span></span>
<span id="cb33-1286"><a href="#cb33-1286"></a>  <span class="fu">add_count</span>(<span class="at">name =</span> <span class="st">"n_orgao"</span>, orgao, <span class="at">wt =</span> n_orgao_decisao_resultados) <span class="sc">%&gt;%</span></span>
<span id="cb33-1287"><a href="#cb33-1287"></a>  <span class="fu">mutate</span>(<span class="at">perc =</span> n_orgao_decisao_resultados <span class="sc">/</span> n_orgao) <span class="sc">%&gt;%</span></span>
<span id="cb33-1288"><a href="#cb33-1288"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>, resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1289"><a href="#cb33-1289"></a>  <span class="fu">filter</span>(perc <span class="sc">&gt;=</span> .<span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1290"><a href="#cb33-1290"></a>  <span class="fu">mutate</span>(</span>
<span id="cb33-1291"><a href="#cb33-1291"></a>    <span class="at">orgao =</span> <span class="fu">if_else</span>(<span class="fu">str_detect</span>(orgao, <span class="st">"^EBSERH"</span>),</span>
<span id="cb33-1292"><a href="#cb33-1292"></a>                    <span class="fu">str_extract</span>(orgao, <span class="st">"[A-Z]+ . C*HU-UF</span><span class="sc">\\</span><span class="st">w+"</span>),</span>
<span id="cb33-1293"><a href="#cb33-1293"></a>                    <span class="fu">str_extract</span>(orgao, <span class="st">"[A-Z]+"</span>)),</span>
<span id="cb33-1294"><a href="#cb33-1294"></a>    <span class="at">orgao =</span> <span class="fu">if_else</span>(orgao <span class="sc">==</span> <span class="st">"A"</span>, <span class="st">"Autoridade Portuária"</span>, orgao),</span>
<span id="cb33-1295"><a href="#cb33-1295"></a>    <span class="at">orgao =</span> <span class="fu">reorder</span>(orgao, n_orgao_decisao_resultados)</span>
<span id="cb33-1296"><a href="#cb33-1296"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-1297"><a href="#cb33-1297"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">y =</span> orgao, <span class="at">x =</span> n_orgao_decisao_resultados)) <span class="sc">+</span></span>
<span id="cb33-1298"><a href="#cb33-1298"></a>  <span class="fu">geom_col</span>(<span class="at">fill =</span> cores_aep[[<span class="st">"laranja"</span>]], <span class="at">alpha =</span> .<span class="dv">8</span>) <span class="sc">+</span></span>
<span id="cb33-1299"><a href="#cb33-1299"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-1300"><a href="#cb33-1300"></a>    <span class="fu">aes</span>(<span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_orgao_decisao_resultados)),</span>
<span id="cb33-1301"><a href="#cb33-1301"></a>    <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">15</span>,</span>
<span id="cb33-1302"><a href="#cb33-1302"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]]</span>
<span id="cb33-1303"><a href="#cb33-1303"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1304"><a href="#cb33-1304"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-1305"><a href="#cb33-1305"></a>    <span class="at">title =</span> <span class="st">"Quantidade de pedidos com classificação contraditória"</span>,</span>
<span id="cb33-1306"><a href="#cb33-1306"></a>    <span class="at">subtitle =</span> <span class="st">"Somente órgãos com taxa de classificação contraditória acima de 20%"</span>,</span>
<span id="cb33-1307"><a href="#cb33-1307"></a>    <span class="at">x =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb33-1308"><a href="#cb33-1308"></a>    <span class="at">y =</span> <span class="st">"Órgão (sigla)"</span></span>
<span id="cb33-1309"><a href="#cb33-1309"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1310"><a href="#cb33-1310"></a>  <span class="fu">scale_x_continuous</span>(<span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>), <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">810</span>)) <span class="sc">+</span></span>
<span id="cb33-1311"><a href="#cb33-1311"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-1312"><a href="#cb33-1312"></a>    <span class="at">axis.line.x =</span> <span class="fu">element_blank</span>(),</span>
<span id="cb33-1313"><a href="#cb33-1313"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_line</span>(<span class="at">color =</span> <span class="st">"gray50"</span>)</span>
<span id="cb33-1314"><a href="#cb33-1314"></a>  )</span>
<span id="cb33-1315"><a href="#cb33-1315"></a><span class="in">```</span></span>
<span id="cb33-1316"><a href="#cb33-1316"></a></span>
<span id="cb33-1317"><a href="#cb33-1317"></a>:::</span>
<span id="cb33-1318"><a href="#cb33-1318"></a></span>
<span id="cb33-1321"><a href="#cb33-1321"></a><span class="in">```{r}</span></span>
<span id="cb33-1322"><a href="#cb33-1322"></a>pedidos_orgaos_counts <span class="ot">&lt;-</span> pedidos <span class="sc">%&gt;%</span></span>
<span id="cb33-1323"><a href="#cb33-1323"></a>  <span class="fu">filter</span>(orgao_abrev <span class="sc">!=</span> <span class="st">"MINFRA"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1324"><a href="#cb33-1324"></a>  <span class="fu">count</span>(</span>
<span id="cb33-1325"><a href="#cb33-1325"></a>    orgao, orgao_abrev, decisao, resultados,</span>
<span id="cb33-1326"><a href="#cb33-1326"></a>    <span class="at">name =</span> <span class="st">"n_orgao_decisao_resultados"</span></span>
<span id="cb33-1327"><a href="#cb33-1327"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-1328"><a href="#cb33-1328"></a>  <span class="fu">add_count</span>(</span>
<span id="cb33-1329"><a href="#cb33-1329"></a>    orgao, orgao_abrev,</span>
<span id="cb33-1330"><a href="#cb33-1330"></a>    <span class="at">name =</span> <span class="st">"n_orgao"</span>,</span>
<span id="cb33-1331"><a href="#cb33-1331"></a>    <span class="at">wt =</span> n_orgao_decisao_resultados</span>
<span id="cb33-1332"><a href="#cb33-1332"></a>  )  <span class="sc">%&gt;%</span></span>
<span id="cb33-1333"><a href="#cb33-1333"></a>  <span class="fu">add_count</span>(</span>
<span id="cb33-1334"><a href="#cb33-1334"></a>    <span class="at">name =</span> <span class="st">"n_resultado_acesso_concedido"</span>,</span>
<span id="cb33-1335"><a href="#cb33-1335"></a>    orgao, orgao_abrev, decisao,</span>
<span id="cb33-1336"><a href="#cb33-1336"></a>    <span class="at">wt =</span> n_orgao_decisao_resultados</span>
<span id="cb33-1337"><a href="#cb33-1337"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-1338"><a href="#cb33-1338"></a>  <span class="fu">mutate</span>(<span class="at">resultados_wt =</span> <span class="fu">if_else</span>(</span>
<span id="cb33-1339"><a href="#cb33-1339"></a>     resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>, n_orgao_decisao_resultados, <span class="cn">NA_integer_</span></span>
<span id="cb33-1340"><a href="#cb33-1340"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb33-1341"><a href="#cb33-1341"></a>  <span class="fu">group_by</span>(orgao, orgao_abrev, decisao) <span class="sc">%&gt;%</span></span>
<span id="cb33-1342"><a href="#cb33-1342"></a>  <span class="fu">fill</span>(resultados_wt, <span class="at">.direction =</span> <span class="st">"updown"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1343"><a href="#cb33-1343"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb33-1344"><a href="#cb33-1344"></a>  <span class="fu">mutate</span>(<span class="at">resultados_wt =</span> <span class="fu">replace_na</span>(resultados_wt, <span class="dv">0</span>))</span>
<span id="cb33-1345"><a href="#cb33-1345"></a></span>
<span id="cb33-1346"><a href="#cb33-1346"></a>total_acesso_concedido <span class="ot">&lt;-</span> <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span></span>
<span id="cb33-1347"><a href="#cb33-1347"></a>nao_atendidos <span class="ot">&lt;-</span> <span class="st">'Classificação contraditória'</span></span>
<span id="cb33-1348"><a href="#cb33-1348"></a><span class="in">```</span></span>
<span id="cb33-1349"><a href="#cb33-1349"></a></span>
<span id="cb33-1350"><a href="#cb33-1350"></a><span class="fu">### Órgãos agrupados por temas</span></span>
<span id="cb33-1351"><a href="#cb33-1351"></a></span>
<span id="cb33-1352"><a href="#cb33-1352"></a>::: {.panel-tabset}</span>
<span id="cb33-1353"><a href="#cb33-1353"></a></span>
<span id="cb33-1354"><a href="#cb33-1354"></a><span class="fu">#### Pastas Ministeriais</span></span>
<span id="cb33-1355"><a href="#cb33-1355"></a></span>
<span id="cb33-1358"><a href="#cb33-1358"></a><span class="in">```{r}</span></span>
<span id="cb33-1359"><a href="#cb33-1359"></a>pastas_ministeriais <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb33-1360"><a href="#cb33-1360"></a>  <span class="st">"PR"</span>,         <span class="co"># PR – Presidência da República</span></span>
<span id="cb33-1361"><a href="#cb33-1361"></a>  <span class="st">"SGPR"</span>,       <span class="co"># SGPR – Secretaria-Geral da Presidência da República</span></span>
<span id="cb33-1362"><a href="#cb33-1362"></a>  <span class="st">"SEGOV/PR"</span>,   <span class="co"># SEGOV/PR - Secretaria de Governo da Presidência da República</span></span>
<span id="cb33-1363"><a href="#cb33-1363"></a>  <span class="st">"VPR"</span>,        <span class="co"># VPR – Vice-Presidência da República</span></span>
<span id="cb33-1364"><a href="#cb33-1364"></a>  <span class="st">"GSI-PR"</span>,     <span class="co"># GSI-PR – Gabinete de Segurança Institucional da Presidência da República</span></span>
<span id="cb33-1365"><a href="#cb33-1365"></a>  <span class="st">"MAPA"</span>,       <span class="co"># MAPA – Ministério da Agricultura, Pecuária e Abastecimento</span></span>
<span id="cb33-1366"><a href="#cb33-1366"></a>  <span class="st">"MCIDADANIA"</span>, <span class="co"># MCIDADANIA - Ministério da Cidadania (Desenvolvimento Social e Esporte)</span></span>
<span id="cb33-1367"><a href="#cb33-1367"></a>  <span class="st">"MCOM"</span>,       <span class="co"># MCOM - Ministério das Comunicações</span></span>
<span id="cb33-1368"><a href="#cb33-1368"></a>  <span class="st">"MCTI"</span>,       <span class="co"># MCTI – Ministério da Ciência, Tecnologia, Inovações</span></span>
<span id="cb33-1369"><a href="#cb33-1369"></a>  <span class="st">"MD"</span>,         <span class="co"># MD – Ministério da Defesa</span></span>
<span id="cb33-1370"><a href="#cb33-1370"></a>  <span class="st">"MDR"</span>,        <span class="co"># MDR - Ministério do Desenvolvimento Regional</span></span>
<span id="cb33-1371"><a href="#cb33-1371"></a>  <span class="st">"ME"</span>,         <span class="co"># ME - Ministério da Economia</span></span>
<span id="cb33-1372"><a href="#cb33-1372"></a>  <span class="st">"MEC"</span>,        <span class="co"># MEC – Ministério da Educação</span></span>
<span id="cb33-1373"><a href="#cb33-1373"></a>  <span class="st">"MJSP"</span>,       <span class="co"># MJSP – Ministério da Justiça e Segurança Pública</span></span>
<span id="cb33-1374"><a href="#cb33-1374"></a>  <span class="st">"MMA"</span>,        <span class="co"># MMA – Ministério do Meio Ambiente</span></span>
<span id="cb33-1375"><a href="#cb33-1375"></a>  <span class="st">"MME"</span>,        <span class="co"># MME – Ministério de Minas e Energia</span></span>
<span id="cb33-1376"><a href="#cb33-1376"></a>  <span class="st">"MMFDH"</span>,      <span class="co"># MMFDH – Ministério da Mulher, da Família e dos Direitos Humanos</span></span>
<span id="cb33-1377"><a href="#cb33-1377"></a>  <span class="st">"MRE"</span>,        <span class="co"># MRE – Ministério das Relações Exteriores</span></span>
<span id="cb33-1378"><a href="#cb33-1378"></a>  <span class="st">"MS"</span>,         <span class="co"># MS – Ministério da Saúde</span></span>
<span id="cb33-1379"><a href="#cb33-1379"></a>  <span class="st">"MTur"</span>,        <span class="co"># MTur - Ministério do Turismo (Turismo e Cultura)</span></span>
<span id="cb33-1380"><a href="#cb33-1380"></a>  <span class="st">"CGU"</span></span>
<span id="cb33-1381"><a href="#cb33-1381"></a>)</span>
<span id="cb33-1382"><a href="#cb33-1382"></a></span>
<span id="cb33-1383"><a href="#cb33-1383"></a>pedidos_orgaos_counts <span class="sc">%&gt;%</span></span>
<span id="cb33-1384"><a href="#cb33-1384"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1385"><a href="#cb33-1385"></a>  <span class="fu">filter</span>(orgao_abrev <span class="sc">%in%</span> pastas_ministeriais) <span class="sc">%&gt;%</span></span>
<span id="cb33-1386"><a href="#cb33-1386"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb33-1387"><a href="#cb33-1387"></a>    <span class="at">y =</span> n_orgao_decisao_resultados,</span>
<span id="cb33-1388"><a href="#cb33-1388"></a>    <span class="at">x =</span> <span class="fu">reorder</span>(orgao_abrev, resultados_wt)</span>
<span id="cb33-1389"><a href="#cb33-1389"></a>  )) <span class="sc">+</span></span>
<span id="cb33-1390"><a href="#cb33-1390"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> total_acesso_concedido)) <span class="sc">+</span></span>
<span id="cb33-1391"><a href="#cb33-1391"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb33-1392"><a href="#cb33-1392"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb33-1393"><a href="#cb33-1393"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> nao_atendidos)</span>
<span id="cb33-1394"><a href="#cb33-1394"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1395"><a href="#cb33-1395"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-1396"><a href="#cb33-1396"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb33-1397"><a href="#cb33-1397"></a>    <span class="fu">aes</span>(<span class="at">color =</span> nao_atendidos, <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_orgao_decisao_resultados) <span class="sc">%&gt;%</span> <span class="fu">format</span>(<span class="at">justify =</span> <span class="st">"left"</span>)),</span>
<span id="cb33-1398"><a href="#cb33-1398"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-1399"><a href="#cb33-1399"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">4</span>,</span>
<span id="cb33-1400"><a href="#cb33-1400"></a>    <span class="at">hjust =</span> .<span class="dv">9</span></span>
<span id="cb33-1401"><a href="#cb33-1401"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1402"><a href="#cb33-1402"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-1403"><a href="#cb33-1403"></a>    <span class="at">check_overlap =</span> <span class="cn">TRUE</span>,</span>
<span id="cb33-1404"><a href="#cb33-1404"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb33-1405"><a href="#cb33-1405"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-1406"><a href="#cb33-1406"></a>    <span class="fu">aes</span>(</span>
<span id="cb33-1407"><a href="#cb33-1407"></a>      <span class="at">y =</span> <span class="dv">820</span>,</span>
<span id="cb33-1408"><a href="#cb33-1408"></a>      <span class="at">x =</span> <span class="st">"MCIDADANIA"</span>,</span>
<span id="cb33-1409"><a href="#cb33-1409"></a>      <span class="at">label =</span> <span class="st">"Número total de</span><span class="sc">\n</span><span class="st">Acessos Concedidos</span><span class="sc">\n</span><span class="st">para este órgão"</span></span>
<span id="cb33-1410"><a href="#cb33-1410"></a>    )</span>
<span id="cb33-1411"><a href="#cb33-1411"></a>  )  <span class="sc">+</span></span>
<span id="cb33-1412"><a href="#cb33-1412"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-1413"><a href="#cb33-1413"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-1414"><a href="#cb33-1414"></a>    <span class="at">hjust =</span> .<span class="dv">3</span>,</span>
<span id="cb33-1415"><a href="#cb33-1415"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">2</span>,</span>
<span id="cb33-1416"><a href="#cb33-1416"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb33-1417"><a href="#cb33-1417"></a>    <span class="at">check_overlap =</span> T,</span>
<span id="cb33-1418"><a href="#cb33-1418"></a>    <span class="fu">aes</span>(</span>
<span id="cb33-1419"><a href="#cb33-1419"></a>      <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_resultado_acesso_concedido, <span class="at">trim =</span> F),</span>
<span id="cb33-1420"><a href="#cb33-1420"></a>      <span class="at">y =</span> n_resultado_acesso_concedido,</span>
<span id="cb33-1421"><a href="#cb33-1421"></a>      <span class="at">color =</span> total_acesso_concedido</span>
<span id="cb33-1422"><a href="#cb33-1422"></a>    )</span>
<span id="cb33-1423"><a href="#cb33-1423"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1424"><a href="#cb33-1424"></a>  <span class="fu">geom_curve</span>(</span>
<span id="cb33-1425"><a href="#cb33-1425"></a>    <span class="fu">aes</span>(</span>
<span id="cb33-1426"><a href="#cb33-1426"></a>      <span class="at">x =</span> <span class="st">"MCIDADANIA"</span>,</span>
<span id="cb33-1427"><a href="#cb33-1427"></a>      <span class="at">xend =</span> <span class="st">"MCIDADANIA"</span>,</span>
<span id="cb33-1428"><a href="#cb33-1428"></a>      <span class="at">y =</span> <span class="dv">750</span>,</span>
<span id="cb33-1429"><a href="#cb33-1429"></a>      <span class="at">yend =</span> <span class="dv">510</span></span>
<span id="cb33-1430"><a href="#cb33-1430"></a>    ),</span>
<span id="cb33-1431"><a href="#cb33-1431"></a>    <span class="at">curvature =</span> .<span class="dv">3</span>,</span>
<span id="cb33-1432"><a href="#cb33-1432"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-1433"><a href="#cb33-1433"></a>    <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="fl">0.01</span>, <span class="st">"npc"</span>))</span>
<span id="cb33-1434"><a href="#cb33-1434"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1435"><a href="#cb33-1435"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-1436"><a href="#cb33-1436"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"marrom"</span>]], .<span class="dv">6</span>),</span>
<span id="cb33-1437"><a href="#cb33-1437"></a>    <span class="st">'Classificação contraditória'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb33-1438"><a href="#cb33-1438"></a>  )) <span class="sc">+</span></span>
<span id="cb33-1439"><a href="#cb33-1439"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-1440"><a href="#cb33-1440"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb33-1441"><a href="#cb33-1441"></a>    <span class="st">'Classificação contraditória'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb33-1442"><a href="#cb33-1442"></a>  )) <span class="sc">+</span></span>
<span id="cb33-1443"><a href="#cb33-1443"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb33-1444"><a href="#cb33-1444"></a>    <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">50</span>, <span class="dv">150</span>, <span class="dv">300</span>, <span class="dv">500</span>, <span class="dv">1000</span>, <span class="dv">1500</span>, <span class="dv">2000</span>, <span class="dv">4000</span>),</span>
<span id="cb33-1445"><a href="#cb33-1445"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"50"</span>, <span class="st">"150"</span>, <span class="st">"300"</span>, <span class="st">"500"</span>, <span class="st">"1k"</span>, <span class="st">"1,5k"</span>, <span class="st">"2k"</span>, <span class="st">"4k"</span>),</span>
<span id="cb33-1446"><a href="#cb33-1446"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2000</span>),</span>
<span id="cb33-1447"><a href="#cb33-1447"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb33-1448"><a href="#cb33-1448"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1449"><a href="#cb33-1449"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-1450"><a href="#cb33-1450"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb33-1451"><a href="#cb33-1451"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb33-1452"><a href="#cb33-1452"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">15</span>, .<span class="dv">95</span>),</span>
<span id="cb33-1453"><a href="#cb33-1453"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb33-1454"><a href="#cb33-1454"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1455"><a href="#cb33-1455"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-1456"><a href="#cb33-1456"></a>    <span class="at">title =</span> <span class="st">'Acessos concedidos classificados como "Não Atendido" pelo modelo NLP/BERT'</span>,</span>
<span id="cb33-1457"><a href="#cb33-1457"></a>    <span class="at">subtitle =</span> <span class="st">"Órgãos selecionados | Pastas ministeriais"</span>,</span>
<span id="cb33-1458"><a href="#cb33-1458"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb33-1459"><a href="#cb33-1459"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb33-1460"><a href="#cb33-1460"></a>    <span class="at">fill =</span> <span class="cn">NULL</span></span>
<span id="cb33-1461"><a href="#cb33-1461"></a>  )</span>
<span id="cb33-1462"><a href="#cb33-1462"></a><span class="in">```</span></span>
<span id="cb33-1463"><a href="#cb33-1463"></a></span>
<span id="cb33-1464"><a href="#cb33-1464"></a><span class="ss">- </span>PR – Presidência da República</span>
<span id="cb33-1465"><a href="#cb33-1465"></a><span class="ss">- </span>SGPR – Secretaria-Geral da Presidência da República</span>
<span id="cb33-1466"><a href="#cb33-1466"></a><span class="ss">- </span>SEGOV/PR - Secretaria de Governo da Presidência da República</span>
<span id="cb33-1467"><a href="#cb33-1467"></a><span class="ss">- </span>VPR – Vice-Presidência da República</span>
<span id="cb33-1468"><a href="#cb33-1468"></a><span class="ss">- </span>GSI-PR – Gabinete de Segurança Institucional da Presidência da República</span>
<span id="cb33-1469"><a href="#cb33-1469"></a><span class="ss">- </span>MAPA – Ministério da Agricultura, Pecuária e Abastecimento</span>
<span id="cb33-1470"><a href="#cb33-1470"></a><span class="ss">- </span>MCIDADANIA - Ministério da Cidadania (Desenvolvimento Social e Esporte)</span>
<span id="cb33-1471"><a href="#cb33-1471"></a><span class="ss">- </span>MCOM - Ministério das Comunicações</span>
<span id="cb33-1472"><a href="#cb33-1472"></a><span class="ss">- </span>MCTI – Ministério da Ciência, Tecnologia, Inovações</span>
<span id="cb33-1473"><a href="#cb33-1473"></a><span class="ss">- </span>MD – Ministério da Defesa</span>
<span id="cb33-1474"><a href="#cb33-1474"></a><span class="ss">- </span>MDR - Ministério do Desenvolvimento Regional</span>
<span id="cb33-1475"><a href="#cb33-1475"></a><span class="ss">- </span>ME - Ministério da Economia</span>
<span id="cb33-1476"><a href="#cb33-1476"></a><span class="ss">- </span>MEC – Ministério da Educação</span>
<span id="cb33-1477"><a href="#cb33-1477"></a><span class="ss">- </span>MJSP – Ministério da Justiça e Segurança Pública</span>
<span id="cb33-1478"><a href="#cb33-1478"></a><span class="ss">- </span>MMA – Ministério do Meio Ambiente</span>
<span id="cb33-1479"><a href="#cb33-1479"></a><span class="ss">- </span>MME – Ministério de Minas e Energia</span>
<span id="cb33-1480"><a href="#cb33-1480"></a><span class="ss">- </span>MMFDH – Ministério da Mulher, da Família e dos Direitos Humanos</span>
<span id="cb33-1481"><a href="#cb33-1481"></a><span class="ss">- </span>MRE – Ministério das Relações Exteriores</span>
<span id="cb33-1482"><a href="#cb33-1482"></a><span class="ss">- </span>MS – Ministério da Saúde</span>
<span id="cb33-1483"><a href="#cb33-1483"></a><span class="ss">- </span>MTur - Ministério do Turismo (Turismo e Cultura)</span>
<span id="cb33-1484"><a href="#cb33-1484"></a><span class="ss">- </span>CGU - Controladoria Geral da união</span>
<span id="cb33-1485"><a href="#cb33-1485"></a></span>
<span id="cb33-1486"><a href="#cb33-1486"></a></span>
<span id="cb33-1487"><a href="#cb33-1487"></a><span class="fu">#### Militares, PRF e PF</span></span>
<span id="cb33-1488"><a href="#cb33-1488"></a></span>
<span id="cb33-1491"><a href="#cb33-1491"></a><span class="in">```{r}</span></span>
<span id="cb33-1492"><a href="#cb33-1492"></a>militares <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb33-1493"><a href="#cb33-1493"></a>  <span class="st">"CEX"</span>,    <span class="co"># CEX – Comando do Exército</span></span>
<span id="cb33-1494"><a href="#cb33-1494"></a>  <span class="st">"CMAR"</span>,   <span class="co"># CMAR – Comando da Marinha</span></span>
<span id="cb33-1495"><a href="#cb33-1495"></a>  <span class="st">"COMAER"</span>, <span class="co"># COMAER – Comando da Aeronáutica</span></span>
<span id="cb33-1496"><a href="#cb33-1496"></a>  <span class="st">"IMBEL"</span>,  <span class="co"># IMBEL – Indústria de Material Bélico do Brasil</span></span>
<span id="cb33-1497"><a href="#cb33-1497"></a>  <span class="st">"DPRF"</span>,   <span class="co"># DPRF – Departamento de Polícia Rodoviária Federal</span></span>
<span id="cb33-1498"><a href="#cb33-1498"></a>  <span class="st">"DPF"</span>,    <span class="co"># DPF – Departamento de Polícia Federal</span></span>
<span id="cb33-1499"><a href="#cb33-1499"></a>  <span class="st">"ESG"</span>,    <span class="co"># ESG – Escola Superior de Guerra</span></span>
<span id="cb33-1500"><a href="#cb33-1500"></a>  <span class="st">"HFA"</span>     <span class="co"># HFA – Hospital das Forças Armadas</span></span>
<span id="cb33-1501"><a href="#cb33-1501"></a>)</span>
<span id="cb33-1502"><a href="#cb33-1502"></a></span>
<span id="cb33-1503"><a href="#cb33-1503"></a>pedidos_orgaos_counts <span class="sc">%&gt;%</span></span>
<span id="cb33-1504"><a href="#cb33-1504"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1505"><a href="#cb33-1505"></a>  <span class="fu">filter</span>(orgao_abrev <span class="sc">%in%</span> militares) <span class="sc">%&gt;%</span></span>
<span id="cb33-1506"><a href="#cb33-1506"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb33-1507"><a href="#cb33-1507"></a>    <span class="at">y =</span> n_orgao_decisao_resultados,</span>
<span id="cb33-1508"><a href="#cb33-1508"></a>    <span class="at">x =</span> <span class="fu">reorder</span>(orgao_abrev, resultados_wt)</span>
<span id="cb33-1509"><a href="#cb33-1509"></a>  )) <span class="sc">+</span></span>
<span id="cb33-1510"><a href="#cb33-1510"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> total_acesso_concedido)) <span class="sc">+</span></span>
<span id="cb33-1511"><a href="#cb33-1511"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb33-1512"><a href="#cb33-1512"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb33-1513"><a href="#cb33-1513"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> nao_atendidos)</span>
<span id="cb33-1514"><a href="#cb33-1514"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1515"><a href="#cb33-1515"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-1516"><a href="#cb33-1516"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb33-1517"><a href="#cb33-1517"></a>    <span class="fu">aes</span>(<span class="at">color =</span> nao_atendidos, <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_orgao_decisao_resultados) <span class="sc">%&gt;%</span> <span class="fu">format</span>(<span class="at">justify =</span> <span class="st">"left"</span>)),</span>
<span id="cb33-1518"><a href="#cb33-1518"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-1519"><a href="#cb33-1519"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">4</span></span>
<span id="cb33-1520"><a href="#cb33-1520"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1521"><a href="#cb33-1521"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-1522"><a href="#cb33-1522"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-1523"><a href="#cb33-1523"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">2</span>,</span>
<span id="cb33-1524"><a href="#cb33-1524"></a>    <span class="at">check_overlap =</span> T,</span>
<span id="cb33-1525"><a href="#cb33-1525"></a>    <span class="fu">aes</span>(</span>
<span id="cb33-1526"><a href="#cb33-1526"></a>      <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_resultado_acesso_concedido, <span class="at">trim =</span> F),</span>
<span id="cb33-1527"><a href="#cb33-1527"></a>      <span class="at">y =</span> n_resultado_acesso_concedido,</span>
<span id="cb33-1528"><a href="#cb33-1528"></a>      <span class="at">color =</span> total_acesso_concedido</span>
<span id="cb33-1529"><a href="#cb33-1529"></a>    )</span>
<span id="cb33-1530"><a href="#cb33-1530"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1531"><a href="#cb33-1531"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-1532"><a href="#cb33-1532"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"marrom"</span>]], .<span class="dv">6</span>),</span>
<span id="cb33-1533"><a href="#cb33-1533"></a>    <span class="st">'Classificação contraditória'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb33-1534"><a href="#cb33-1534"></a>  )) <span class="sc">+</span></span>
<span id="cb33-1535"><a href="#cb33-1535"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-1536"><a href="#cb33-1536"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb33-1537"><a href="#cb33-1537"></a>    <span class="st">'Classificação contraditória'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb33-1538"><a href="#cb33-1538"></a>  )) <span class="sc">+</span></span>
<span id="cb33-1539"><a href="#cb33-1539"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb33-1540"><a href="#cb33-1540"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">400</span>),</span>
<span id="cb33-1541"><a href="#cb33-1541"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb33-1542"><a href="#cb33-1542"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1543"><a href="#cb33-1543"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-1544"><a href="#cb33-1544"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb33-1545"><a href="#cb33-1545"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(),</span>
<span id="cb33-1546"><a href="#cb33-1546"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">15</span>, .<span class="dv">95</span>),</span>
<span id="cb33-1547"><a href="#cb33-1547"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb33-1548"><a href="#cb33-1548"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1549"><a href="#cb33-1549"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-1550"><a href="#cb33-1550"></a>    <span class="at">title =</span> <span class="st">'Acessos concedidos classificados como "Não Atendido" pelo modelo NLP/BERT'</span>,</span>
<span id="cb33-1551"><a href="#cb33-1551"></a>    <span class="at">subtitle =</span> <span class="st">"Órgãos selecionados | Militares e Polícias"</span>,</span>
<span id="cb33-1552"><a href="#cb33-1552"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb33-1553"><a href="#cb33-1553"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb33-1554"><a href="#cb33-1554"></a>    <span class="at">fill =</span> <span class="cn">NULL</span></span>
<span id="cb33-1555"><a href="#cb33-1555"></a>  )</span>
<span id="cb33-1556"><a href="#cb33-1556"></a><span class="in">```</span></span>
<span id="cb33-1557"><a href="#cb33-1557"></a></span>
<span id="cb33-1558"><a href="#cb33-1558"></a><span class="ss">- </span>CMAR - Comando da Marinha</span>
<span id="cb33-1559"><a href="#cb33-1559"></a><span class="ss">- </span>COMAER - Comando da Aeronáutica</span>
<span id="cb33-1560"><a href="#cb33-1560"></a><span class="ss">- </span>CEX - Comando do Exército</span>
<span id="cb33-1561"><a href="#cb33-1561"></a><span class="ss">- </span>ESG – Escola Superior de Guerra</span>
<span id="cb33-1562"><a href="#cb33-1562"></a><span class="ss">- </span>IMBEL – Indústria de Material Bélico do Brasil</span>
<span id="cb33-1563"><a href="#cb33-1563"></a><span class="ss">- </span>DPRF – Departamento de Polícia Rodoviária Federal</span>
<span id="cb33-1564"><a href="#cb33-1564"></a><span class="ss">- </span>DPF – Departamento de Polícia Federal</span>
<span id="cb33-1565"><a href="#cb33-1565"></a><span class="ss">- </span>HFA – Hospital das Forças Armadas</span>
<span id="cb33-1566"><a href="#cb33-1566"></a></span>
<span id="cb33-1567"><a href="#cb33-1567"></a><span class="fu">#### Bancos públicos e autoridades financeiras</span></span>
<span id="cb33-1568"><a href="#cb33-1568"></a></span>
<span id="cb33-1571"><a href="#cb33-1571"></a><span class="in">```{r}</span></span>
<span id="cb33-1572"><a href="#cb33-1572"></a>autoridades_financ <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb33-1573"><a href="#cb33-1573"></a>  <span class="st">"BACEN"</span>,    <span class="co"># BACEN – Banco Central do Brasil</span></span>
<span id="cb33-1574"><a href="#cb33-1574"></a>  <span class="st">"BB"</span>,       <span class="co"># BB Tecnologia e Serviços</span></span>
<span id="cb33-1575"><a href="#cb33-1575"></a>  <span class="st">"BB-TEC"</span>,   <span class="co"># BB Tecnologia e Serviços</span></span>
<span id="cb33-1576"><a href="#cb33-1576"></a>  <span class="st">"BBTur V"</span>,  <span class="co"># BBTur Viagens e Turismo Ltda</span></span>
<span id="cb33-1577"><a href="#cb33-1577"></a>  <span class="st">"BNDES"</span>,    <span class="co"># BNDES – Banco Nacional de Desenvolvimento Econômico e Social</span></span>
<span id="cb33-1578"><a href="#cb33-1578"></a>  <span class="st">"CADE"</span>,     <span class="co"># CADE – Conselho Administrativo de Defesa Econômica</span></span>
<span id="cb33-1579"><a href="#cb33-1579"></a>  <span class="st">"CMB"</span>,      <span class="co"># CMB – Casa da Moeda do Brasil</span></span>
<span id="cb33-1580"><a href="#cb33-1580"></a>  <span class="st">"CVM"</span>,      <span class="co"># CVM – Comissão de Valores Mobiliários</span></span>
<span id="cb33-1581"><a href="#cb33-1581"></a>  <span class="st">"CEF"</span>       <span class="co"># CEF - Caixa Econômica Federal</span></span>
<span id="cb33-1582"><a href="#cb33-1582"></a>)</span>
<span id="cb33-1583"><a href="#cb33-1583"></a></span>
<span id="cb33-1584"><a href="#cb33-1584"></a>pedidos_orgaos_counts <span class="sc">%&gt;%</span></span>
<span id="cb33-1585"><a href="#cb33-1585"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1586"><a href="#cb33-1586"></a>  <span class="fu">filter</span>(orgao_abrev <span class="sc">%in%</span> autoridades_financ) <span class="sc">%&gt;%</span></span>
<span id="cb33-1587"><a href="#cb33-1587"></a>  <span class="fu">add_row</span>(</span>
<span id="cb33-1588"><a href="#cb33-1588"></a>    <span class="at">orgao =</span> <span class="fu">rep</span>(<span class="st">"CEF - Caixa Econômica Federal"</span>, <span class="dv">3</span>),</span>
<span id="cb33-1589"><a href="#cb33-1589"></a>    <span class="at">orgao_abrev =</span> <span class="fu">rep</span>(<span class="st">"CEF"</span>, <span class="dv">3</span>),</span>
<span id="cb33-1590"><a href="#cb33-1590"></a>    <span class="at">decisao =</span> <span class="st">"Acesso Concedido"</span>,</span>
<span id="cb33-1591"><a href="#cb33-1591"></a>    <span class="at">resultados =</span> <span class="fu">c</span>(<span class="st">"Atendido"</span>, <span class="st">"Não Atendido"</span>, <span class="st">"Parcialmente Atendido"</span>),</span>
<span id="cb33-1592"><a href="#cb33-1592"></a>    <span class="at">n_orgao_decisao_resultados =</span> <span class="dv">0</span>,</span>
<span id="cb33-1593"><a href="#cb33-1593"></a>    <span class="at">n_resultado_acesso_concedido =</span> <span class="dv">0</span>,</span>
<span id="cb33-1594"><a href="#cb33-1594"></a>    <span class="at">resultados_wt =</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb33-1595"><a href="#cb33-1595"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb33-1596"><a href="#cb33-1596"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb33-1597"><a href="#cb33-1597"></a>    <span class="at">y =</span> n_orgao_decisao_resultados,</span>
<span id="cb33-1598"><a href="#cb33-1598"></a>    <span class="at">x =</span> <span class="fu">reorder</span>(orgao_abrev, resultados_wt, sum)</span>
<span id="cb33-1599"><a href="#cb33-1599"></a>  )) <span class="sc">+</span></span>
<span id="cb33-1600"><a href="#cb33-1600"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> total_acesso_concedido)) <span class="sc">+</span></span>
<span id="cb33-1601"><a href="#cb33-1601"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb33-1602"><a href="#cb33-1602"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb33-1603"><a href="#cb33-1603"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> nao_atendidos)</span>
<span id="cb33-1604"><a href="#cb33-1604"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1605"><a href="#cb33-1605"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-1606"><a href="#cb33-1606"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb33-1607"><a href="#cb33-1607"></a>    <span class="fu">aes</span>(<span class="at">color =</span> nao_atendidos, <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_orgao_decisao_resultados) <span class="sc">%&gt;%</span> <span class="fu">format</span>(<span class="at">justify =</span> <span class="st">"left"</span>)),</span>
<span id="cb33-1608"><a href="#cb33-1608"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-1609"><a href="#cb33-1609"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">4</span></span>
<span id="cb33-1610"><a href="#cb33-1610"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1611"><a href="#cb33-1611"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-1612"><a href="#cb33-1612"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-1613"><a href="#cb33-1613"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">2</span>,</span>
<span id="cb33-1614"><a href="#cb33-1614"></a>    <span class="at">hjust =</span> <span class="sc">-</span>.<span class="dv">5</span>,</span>
<span id="cb33-1615"><a href="#cb33-1615"></a>    <span class="at">check_overlap =</span> T,</span>
<span id="cb33-1616"><a href="#cb33-1616"></a>    <span class="fu">aes</span>(</span>
<span id="cb33-1617"><a href="#cb33-1617"></a>      <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_resultado_acesso_concedido, <span class="at">trim =</span> F),</span>
<span id="cb33-1618"><a href="#cb33-1618"></a>      <span class="at">y =</span> n_resultado_acesso_concedido,</span>
<span id="cb33-1619"><a href="#cb33-1619"></a>      <span class="at">color =</span> total_acesso_concedido</span>
<span id="cb33-1620"><a href="#cb33-1620"></a>    )</span>
<span id="cb33-1621"><a href="#cb33-1621"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1622"><a href="#cb33-1622"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-1623"><a href="#cb33-1623"></a>    <span class="at">check_overlap =</span> <span class="cn">TRUE</span>,</span>
<span id="cb33-1624"><a href="#cb33-1624"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb33-1625"><a href="#cb33-1625"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-1626"><a href="#cb33-1626"></a>    <span class="fu">aes</span>(</span>
<span id="cb33-1627"><a href="#cb33-1627"></a>      <span class="at">y =</span> <span class="dv">250</span>,</span>
<span id="cb33-1628"><a href="#cb33-1628"></a>      <span class="at">x =</span> <span class="st">"CEF"</span>,</span>
<span id="cb33-1629"><a href="#cb33-1629"></a>      <span class="at">label =</span> <span class="st">"CEF não divulga</span><span class="sc">\n</span><span class="st">nenhum pedido</span><span class="sc">\n</span><span class="st">de acesso a</span><span class="sc">\n</span><span class="st">informação"</span></span>
<span id="cb33-1630"><a href="#cb33-1630"></a>    )</span>
<span id="cb33-1631"><a href="#cb33-1631"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1632"><a href="#cb33-1632"></a>  <span class="fu">geom_curve</span>(</span>
<span id="cb33-1633"><a href="#cb33-1633"></a>    <span class="at">curvature =</span> <span class="dv">0</span>,</span>
<span id="cb33-1634"><a href="#cb33-1634"></a>    <span class="at">color =</span> cores_aep[[<span class="st">"cinza"</span>]],</span>
<span id="cb33-1635"><a href="#cb33-1635"></a>    <span class="at">arrow =</span> <span class="fu">arrow</span>(<span class="at">length =</span> <span class="fu">unit</span>(<span class="dv">2</span>, <span class="st">"mm"</span>)),</span>
<span id="cb33-1636"><a href="#cb33-1636"></a>    <span class="fu">aes</span>(</span>
<span id="cb33-1637"><a href="#cb33-1637"></a>      <span class="at">x =</span> <span class="st">'CEF'</span>, <span class="at">xend =</span> <span class="st">"CEF"</span>,</span>
<span id="cb33-1638"><a href="#cb33-1638"></a>      <span class="at">y =</span> <span class="dv">145</span>, <span class="at">yend =</span> <span class="dv">50</span></span>
<span id="cb33-1639"><a href="#cb33-1639"></a>    )</span>
<span id="cb33-1640"><a href="#cb33-1640"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1641"><a href="#cb33-1641"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-1642"><a href="#cb33-1642"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"marrom"</span>]], .<span class="dv">6</span>),</span>
<span id="cb33-1643"><a href="#cb33-1643"></a>    <span class="st">'Classificação contraditória'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb33-1644"><a href="#cb33-1644"></a>  )) <span class="sc">+</span></span>
<span id="cb33-1645"><a href="#cb33-1645"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-1646"><a href="#cb33-1646"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb33-1647"><a href="#cb33-1647"></a>    <span class="st">'Classificação contraditória'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb33-1648"><a href="#cb33-1648"></a>  )) <span class="sc">+</span></span>
<span id="cb33-1649"><a href="#cb33-1649"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb33-1650"><a href="#cb33-1650"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1100</span>),</span>
<span id="cb33-1651"><a href="#cb33-1651"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb33-1652"><a href="#cb33-1652"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1653"><a href="#cb33-1653"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-1654"><a href="#cb33-1654"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb33-1655"><a href="#cb33-1655"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(),</span>
<span id="cb33-1656"><a href="#cb33-1656"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">15</span>, .<span class="dv">9</span>),</span>
<span id="cb33-1657"><a href="#cb33-1657"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb33-1658"><a href="#cb33-1658"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1659"><a href="#cb33-1659"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-1660"><a href="#cb33-1660"></a>    <span class="at">title =</span> <span class="st">'Acessos concedidos classificados como "Não Atendido" pelo modelo NLP/BERT'</span>,</span>
<span id="cb33-1661"><a href="#cb33-1661"></a>    <span class="at">subtitle =</span> <span class="st">"Órgãos selecionados | Bancos públicos e autoridades financeiras"</span>,</span>
<span id="cb33-1662"><a href="#cb33-1662"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb33-1663"><a href="#cb33-1663"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb33-1664"><a href="#cb33-1664"></a>    <span class="at">fill =</span> <span class="cn">NULL</span></span>
<span id="cb33-1665"><a href="#cb33-1665"></a>  )</span>
<span id="cb33-1666"><a href="#cb33-1666"></a><span class="in">```</span></span>
<span id="cb33-1667"><a href="#cb33-1667"></a></span>
<span id="cb33-1668"><a href="#cb33-1668"></a><span class="ss">- </span>BACEN – Banco Central do Brasil</span>
<span id="cb33-1669"><a href="#cb33-1669"></a><span class="ss">- </span>BB Tecnologia e Serviços</span>
<span id="cb33-1670"><a href="#cb33-1670"></a><span class="ss">- </span>BB Tecnologia e Serviços</span>
<span id="cb33-1671"><a href="#cb33-1671"></a><span class="ss">- </span>BBTur Viagens e Turismo Ltda</span>
<span id="cb33-1672"><a href="#cb33-1672"></a><span class="ss">- </span>BNDES – Banco Nacional de Desenvolvimento Econômico e Social</span>
<span id="cb33-1673"><a href="#cb33-1673"></a><span class="ss">- </span>CADE – Conselho Administrativo de Defesa Econômica</span>
<span id="cb33-1674"><a href="#cb33-1674"></a><span class="ss">- </span>CMB – Casa da Moeda do Brasil</span>
<span id="cb33-1675"><a href="#cb33-1675"></a><span class="ss">- </span>CVM – Comissão de Valores Mobiliários</span>
<span id="cb33-1676"><a href="#cb33-1676"></a><span class="ss">- </span>CEF - Caixa Econômica Federal</span>
<span id="cb33-1677"><a href="#cb33-1677"></a></span>
<span id="cb33-1678"><a href="#cb33-1678"></a><span class="fu">#### Órgãos ambientais</span></span>
<span id="cb33-1679"><a href="#cb33-1679"></a></span>
<span id="cb33-1682"><a href="#cb33-1682"></a><span class="in">```{r}</span></span>
<span id="cb33-1683"><a href="#cb33-1683"></a>orgaos_ambientais <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb33-1684"><a href="#cb33-1684"></a>  <span class="st">"MMA"</span>,</span>
<span id="cb33-1685"><a href="#cb33-1685"></a>  <span class="st">"FUNAI"</span>,</span>
<span id="cb33-1686"><a href="#cb33-1686"></a>  <span class="st">"ICMBio"</span>,</span>
<span id="cb33-1687"><a href="#cb33-1687"></a>  <span class="st">"IBAMA"</span>,</span>
<span id="cb33-1688"><a href="#cb33-1688"></a>  <span class="st">"INCRA"</span>,</span>
<span id="cb33-1689"><a href="#cb33-1689"></a>  <span class="st">"FCP"</span>,</span>
<span id="cb33-1690"><a href="#cb33-1690"></a>  <span class="st">"INPE-MCT"</span>,</span>
<span id="cb33-1691"><a href="#cb33-1691"></a>  <span class="st">"INPA"</span></span>
<span id="cb33-1692"><a href="#cb33-1692"></a>)</span>
<span id="cb33-1693"><a href="#cb33-1693"></a></span>
<span id="cb33-1694"><a href="#cb33-1694"></a>pedidos_orgaos_counts <span class="sc">%&gt;%</span></span>
<span id="cb33-1695"><a href="#cb33-1695"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1696"><a href="#cb33-1696"></a>  <span class="fu">filter</span>(orgao_abrev <span class="sc">%in%</span> orgaos_ambientais) <span class="sc">%&gt;%</span></span>
<span id="cb33-1697"><a href="#cb33-1697"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(</span>
<span id="cb33-1698"><a href="#cb33-1698"></a>    <span class="at">y =</span> n_orgao_decisao_resultados,</span>
<span id="cb33-1699"><a href="#cb33-1699"></a>    <span class="at">x =</span> <span class="fu">reorder</span>(orgao_abrev, resultados_wt)</span>
<span id="cb33-1700"><a href="#cb33-1700"></a>  )) <span class="sc">+</span></span>
<span id="cb33-1701"><a href="#cb33-1701"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">fill =</span> total_acesso_concedido)) <span class="sc">+</span></span>
<span id="cb33-1702"><a href="#cb33-1702"></a>  <span class="fu">geom_col</span>(</span>
<span id="cb33-1703"><a href="#cb33-1703"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb33-1704"><a href="#cb33-1704"></a>    <span class="fu">aes</span>(<span class="at">fill =</span> nao_atendidos)</span>
<span id="cb33-1705"><a href="#cb33-1705"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1706"><a href="#cb33-1706"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-1707"><a href="#cb33-1707"></a>    <span class="at">data =</span> . <span class="sc">%&gt;%</span> <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>),</span>
<span id="cb33-1708"><a href="#cb33-1708"></a>    <span class="fu">aes</span>(<span class="at">color =</span> nao_atendidos, <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_orgao_decisao_resultados) <span class="sc">%&gt;%</span> <span class="fu">format</span>(<span class="at">justify =</span> <span class="st">"left"</span>)),</span>
<span id="cb33-1709"><a href="#cb33-1709"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-1710"><a href="#cb33-1710"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">4</span></span>
<span id="cb33-1711"><a href="#cb33-1711"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1712"><a href="#cb33-1712"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-1713"><a href="#cb33-1713"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-1714"><a href="#cb33-1714"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">2</span>,</span>
<span id="cb33-1715"><a href="#cb33-1715"></a>    <span class="at">check_overlap =</span> T,</span>
<span id="cb33-1716"><a href="#cb33-1716"></a>    <span class="fu">aes</span>(</span>
<span id="cb33-1717"><a href="#cb33-1717"></a>      <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_resultado_acesso_concedido, <span class="at">trim =</span> F),</span>
<span id="cb33-1718"><a href="#cb33-1718"></a>      <span class="at">y =</span> n_resultado_acesso_concedido,</span>
<span id="cb33-1719"><a href="#cb33-1719"></a>      <span class="at">color =</span> total_acesso_concedido</span>
<span id="cb33-1720"><a href="#cb33-1720"></a>    )</span>
<span id="cb33-1721"><a href="#cb33-1721"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1722"><a href="#cb33-1722"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-1723"><a href="#cb33-1723"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"marrom"</span>]], .<span class="dv">6</span>),</span>
<span id="cb33-1724"><a href="#cb33-1724"></a>    <span class="st">'Pedidos com decisão "Acesso Concedido" classificados como "Não Atendido" (BERT)'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb33-1725"><a href="#cb33-1725"></a>  )) <span class="sc">+</span></span>
<span id="cb33-1726"><a href="#cb33-1726"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-1727"><a href="#cb33-1727"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb33-1728"><a href="#cb33-1728"></a>    <span class="st">'Pedidos com decisão "Acesso Concedido" classificados como "Não Atendido" (BERT)'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb33-1729"><a href="#cb33-1729"></a>  )) <span class="sc">+</span></span>
<span id="cb33-1730"><a href="#cb33-1730"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb33-1731"><a href="#cb33-1731"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2300</span>),</span>
<span id="cb33-1732"><a href="#cb33-1732"></a>    <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">50</span>, <span class="dv">300</span>, <span class="dv">1000</span>, <span class="dv">1500</span>, <span class="dv">2000</span>),</span>
<span id="cb33-1733"><a href="#cb33-1733"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">"0"</span>, <span class="st">"50"</span>, <span class="st">"300"</span>, <span class="st">"1k"</span>, <span class="st">"1,5k"</span>, <span class="st">"2k"</span>),</span>
<span id="cb33-1734"><a href="#cb33-1734"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb33-1735"><a href="#cb33-1735"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1736"><a href="#cb33-1736"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-1737"><a href="#cb33-1737"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb33-1738"><a href="#cb33-1738"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(),</span>
<span id="cb33-1739"><a href="#cb33-1739"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">15</span>, .<span class="dv">95</span>),</span>
<span id="cb33-1740"><a href="#cb33-1740"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb33-1741"><a href="#cb33-1741"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1742"><a href="#cb33-1742"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-1743"><a href="#cb33-1743"></a>    <span class="at">title =</span> <span class="st">'Acessos concedidos classificados como "Não Atendido" pelo modelo NLP/BERT'</span>,</span>
<span id="cb33-1744"><a href="#cb33-1744"></a>    <span class="at">subtitle =</span> <span class="st">"Órgãos selecionados | Ambientais"</span>,</span>
<span id="cb33-1745"><a href="#cb33-1745"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb33-1746"><a href="#cb33-1746"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb33-1747"><a href="#cb33-1747"></a>    <span class="at">fill =</span> <span class="cn">NULL</span></span>
<span id="cb33-1748"><a href="#cb33-1748"></a>  )</span>
<span id="cb33-1749"><a href="#cb33-1749"></a><span class="in">```</span></span>
<span id="cb33-1750"><a href="#cb33-1750"></a></span>
<span id="cb33-1751"><a href="#cb33-1751"></a><span class="ss">- </span>MMA – Ministério do Meio Ambient</span>
<span id="cb33-1752"><a href="#cb33-1752"></a><span class="ss">- </span>FUNAI – Fundação Nacional do Índio</span>
<span id="cb33-1753"><a href="#cb33-1753"></a><span class="ss">- </span>IBAMA – Instituto Brasileiro do Meio Ambiente e dos Recursos Naturais Renováveis</span>
<span id="cb33-1754"><a href="#cb33-1754"></a><span class="ss">- </span>ICMBio – Instituto Chico Mendes de Conservação da Biodiversidade</span>
<span id="cb33-1755"><a href="#cb33-1755"></a><span class="ss">- </span>INCRA – Instituto Nacional de Colonização e Reforma Agrária</span>
<span id="cb33-1756"><a href="#cb33-1756"></a><span class="ss">- </span>INPA – Instituto Nacional de Pesquisas da Amazônia</span>
<span id="cb33-1757"><a href="#cb33-1757"></a><span class="ss">- </span>INPE-MCT – Instituto Nacional de Pesquisas Espaciais</span>
<span id="cb33-1758"><a href="#cb33-1758"></a><span class="ss">- </span>FCP – Fundação Cultural Palmares</span>
<span id="cb33-1759"><a href="#cb33-1759"></a></span>
<span id="cb33-1760"><a href="#cb33-1760"></a><span class="fu">#### Top 20 | Acessos Concedidos</span></span>
<span id="cb33-1761"><a href="#cb33-1761"></a></span>
<span id="cb33-1762"><a href="#cb33-1762"></a></span>
<span id="cb33-1765"><a href="#cb33-1765"></a><span class="in">```{r}</span></span>
<span id="cb33-1766"><a href="#cb33-1766"></a>pedidos_orgaos_counts <span class="sc">%&gt;%</span></span>
<span id="cb33-1767"><a href="#cb33-1767"></a>  <span class="fu">filter</span>(decisao <span class="sc">==</span> <span class="st">"Acesso Concedido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1768"><a href="#cb33-1768"></a>  <span class="fu">filter</span>(resultados <span class="sc">==</span> <span class="st">"Não Atendido"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1769"><a href="#cb33-1769"></a>  <span class="fu">group_by</span>(orgao, n_resultado_acesso_concedido) <span class="sc">%&gt;%</span></span>
<span id="cb33-1770"><a href="#cb33-1770"></a>  <span class="fu">nest</span>() <span class="sc">%&gt;%</span></span>
<span id="cb33-1771"><a href="#cb33-1771"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb33-1772"><a href="#cb33-1772"></a>  <span class="fu">slice_max</span>(<span class="at">order_by =</span> n_resultado_acesso_concedido, <span class="at">n =</span> <span class="dv">20</span>) <span class="sc">%&gt;%</span></span>
<span id="cb33-1773"><a href="#cb33-1773"></a>  <span class="fu">unnest</span>(data) <span class="sc">%&gt;%</span></span>
<span id="cb33-1774"><a href="#cb33-1774"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(orgao_abrev, resultados_wt))) <span class="sc">+</span></span>
<span id="cb33-1775"><a href="#cb33-1775"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> n_resultado_acesso_concedido, <span class="at">fill =</span> total_acesso_concedido)) <span class="sc">+</span></span>
<span id="cb33-1776"><a href="#cb33-1776"></a>  <span class="fu">geom_col</span>(<span class="fu">aes</span>(<span class="at">y =</span> resultados_wt, <span class="at">fill =</span> nao_atendidos)) <span class="sc">+</span></span>
<span id="cb33-1777"><a href="#cb33-1777"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-1778"><a href="#cb33-1778"></a>    <span class="fu">aes</span>(</span>
<span id="cb33-1779"><a href="#cb33-1779"></a>      <span class="at">color =</span> nao_atendidos,</span>
<span id="cb33-1780"><a href="#cb33-1780"></a>      <span class="at">y =</span> n_orgao_decisao_resultados,</span>
<span id="cb33-1781"><a href="#cb33-1781"></a>      <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_orgao_decisao_resultados) <span class="sc">%&gt;%</span> <span class="fu">format</span>(<span class="at">justify =</span> <span class="st">"left"</span>)</span>
<span id="cb33-1782"><a href="#cb33-1782"></a>    ),</span>
<span id="cb33-1783"><a href="#cb33-1783"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-1784"><a href="#cb33-1784"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">4</span>,</span>
<span id="cb33-1785"><a href="#cb33-1785"></a>    <span class="at">hjust =</span> .<span class="dv">9</span></span>
<span id="cb33-1786"><a href="#cb33-1786"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1787"><a href="#cb33-1787"></a>  <span class="fu">geom_text</span>(</span>
<span id="cb33-1788"><a href="#cb33-1788"></a>    <span class="at">show.legend =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-1789"><a href="#cb33-1789"></a>    <span class="at">hjust =</span> .<span class="dv">3</span>,</span>
<span id="cb33-1790"><a href="#cb33-1790"></a>    <span class="at">vjust =</span> <span class="sc">-</span>.<span class="dv">2</span>,</span>
<span id="cb33-1791"><a href="#cb33-1791"></a>    <span class="at">size =</span> <span class="dv">3</span>,</span>
<span id="cb33-1792"><a href="#cb33-1792"></a>    <span class="at">check_overlap =</span> T,</span>
<span id="cb33-1793"><a href="#cb33-1793"></a>    <span class="fu">aes</span>(</span>
<span id="cb33-1794"><a href="#cb33-1794"></a>      <span class="at">label =</span> scales<span class="sc">::</span><span class="fu">number</span>(n_resultado_acesso_concedido, <span class="at">trim =</span> F),</span>
<span id="cb33-1795"><a href="#cb33-1795"></a>      <span class="at">y =</span> n_resultado_acesso_concedido,</span>
<span id="cb33-1796"><a href="#cb33-1796"></a>      <span class="at">color =</span> total_acesso_concedido</span>
<span id="cb33-1797"><a href="#cb33-1797"></a>    )</span>
<span id="cb33-1798"><a href="#cb33-1798"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1799"><a href="#cb33-1799"></a>  <span class="fu">scale_fill_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-1800"><a href="#cb33-1800"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> <span class="fu">alpha</span>(cores_aep[[<span class="st">"marrom"</span>]], .<span class="dv">6</span>),</span>
<span id="cb33-1801"><a href="#cb33-1801"></a>    <span class="st">'Pedidos com decisão "Acesso Concedido" classificados como "Não Atendido" (BERT)'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb33-1802"><a href="#cb33-1802"></a>  )) <span class="sc">+</span></span>
<span id="cb33-1803"><a href="#cb33-1803"></a>  <span class="fu">scale_color_manual</span>(<span class="at">values =</span> <span class="fu">c</span>(</span>
<span id="cb33-1804"><a href="#cb33-1804"></a>    <span class="st">'Total de pedidos com decisão "Acesso Concedido"'</span> <span class="ot">=</span> cores_aep[[<span class="st">"marrom"</span>]],</span>
<span id="cb33-1805"><a href="#cb33-1805"></a>    <span class="st">'Pedidos com decisão "Acesso Concedido" classificados como "Não Atendido" (BERT)'</span> <span class="ot">=</span> cores_aep[[<span class="st">"rosa"</span>]]</span>
<span id="cb33-1806"><a href="#cb33-1806"></a>  )) <span class="sc">+</span></span>
<span id="cb33-1807"><a href="#cb33-1807"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb33-1808"><a href="#cb33-1808"></a>    <span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">250</span>, <span class="dv">500</span>, <span class="dv">1000</span>, <span class="dv">1500</span>, <span class="dv">2000</span>, <span class="dv">4000</span>),</span>
<span id="cb33-1809"><a href="#cb33-1809"></a>    <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">""</span>, <span class="st">"250"</span>, <span class="st">"500"</span>, <span class="st">"1k"</span>, <span class="st">"1,5k"</span>, <span class="st">"2k"</span>, <span class="st">"4k"</span>),</span>
<span id="cb33-1810"><a href="#cb33-1810"></a>    <span class="at">limits =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5000</span>),</span>
<span id="cb33-1811"><a href="#cb33-1811"></a>    <span class="at">expand =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">0</span>)</span>
<span id="cb33-1812"><a href="#cb33-1812"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1813"><a href="#cb33-1813"></a>  <span class="fu">theme</span>(</span>
<span id="cb33-1814"><a href="#cb33-1814"></a>    <span class="at">axis.ticks.y =</span> <span class="fu">element_line</span>(),</span>
<span id="cb33-1815"><a href="#cb33-1815"></a>    <span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>),</span>
<span id="cb33-1816"><a href="#cb33-1816"></a>    <span class="at">legend.position =</span> <span class="fu">c</span>(.<span class="dv">35</span>, .<span class="dv">9</span>),</span>
<span id="cb33-1817"><a href="#cb33-1817"></a>    <span class="at">axis.line.y =</span> <span class="fu">element_blank</span>()</span>
<span id="cb33-1818"><a href="#cb33-1818"></a>  ) <span class="sc">+</span></span>
<span id="cb33-1819"><a href="#cb33-1819"></a>  <span class="fu">labs</span>(</span>
<span id="cb33-1820"><a href="#cb33-1820"></a>    <span class="at">title =</span> <span class="st">'Acessos concedidos classificados como "Não Atendido" pelo modelo NLP/BERT'</span>,</span>
<span id="cb33-1821"><a href="#cb33-1821"></a>    <span class="at">subtitle =</span> <span class="st">"Órgãos selecionados | 20 primeiros órgãos em número de Acessos Concedido"</span>,</span>
<span id="cb33-1822"><a href="#cb33-1822"></a>    <span class="at">x =</span> <span class="cn">NULL</span>,</span>
<span id="cb33-1823"><a href="#cb33-1823"></a>    <span class="at">y =</span> <span class="st">"Quantidade de pedidos"</span>,</span>
<span id="cb33-1824"><a href="#cb33-1824"></a>    <span class="at">fill =</span> <span class="cn">NULL</span></span>
<span id="cb33-1825"><a href="#cb33-1825"></a>  )</span>
<span id="cb33-1826"><a href="#cb33-1826"></a><span class="in">```</span></span>
<span id="cb33-1827"><a href="#cb33-1827"></a></span>
<span id="cb33-1828"><a href="#cb33-1828"></a><span class="ss">- </span>ANVISA – Agência Nacional de Vigilância Sanitária</span>
<span id="cb33-1829"><a href="#cb33-1829"></a><span class="ss">- </span>FUNAI – Fundação Nacional do Índio</span>
<span id="cb33-1830"><a href="#cb33-1830"></a><span class="ss">- </span>INEP – Instituto Nacional de Estudos e Pesquisas Educacionais Anísio Teixeira</span>
<span id="cb33-1831"><a href="#cb33-1831"></a><span class="ss">- </span>MEC – Ministério da Educação</span>
<span id="cb33-1832"><a href="#cb33-1832"></a><span class="ss">- </span>ME - Ministério da Economia</span>
<span id="cb33-1833"><a href="#cb33-1833"></a><span class="ss">- </span>INSS – Instituto Nacional do Seguro Social</span>
<span id="cb33-1834"><a href="#cb33-1834"></a><span class="ss">- </span>MS – Ministério da Saúde</span>
<span id="cb33-1835"><a href="#cb33-1835"></a><span class="ss">- </span>MAPA – Ministério da Agricultura, Pecuária e Abastecimento</span>
<span id="cb33-1836"><a href="#cb33-1836"></a><span class="ss">- </span>PETROBRAS – Petróleo Brasileiro S.A.</span>
<span id="cb33-1837"><a href="#cb33-1837"></a><span class="ss">- </span>BACEN – Banco Central do Brasil</span>
<span id="cb33-1838"><a href="#cb33-1838"></a><span class="ss">- </span>ANEEL – Agência Nacional de Energia Elétrica</span>
<span id="cb33-1839"><a href="#cb33-1839"></a><span class="ss">- </span>SGPR – Secretaria-Geral da Presidência da República</span>
<span id="cb33-1840"><a href="#cb33-1840"></a><span class="ss">- </span>CGU – Controladoria-Geral da União</span>
<span id="cb33-1841"><a href="#cb33-1841"></a><span class="ss">- </span>DNIT – Departamento Nacional de Infraestrutura de Transportes</span>
<span id="cb33-1842"><a href="#cb33-1842"></a><span class="ss">- </span>MCIDADANIA - Ministério da Cidadania (Desenvolvimento Social e Esporte)</span>
<span id="cb33-1843"><a href="#cb33-1843"></a><span class="ss">- </span>SUSEP – Superintendência de Seguros Privados</span>
<span id="cb33-1844"><a href="#cb33-1844"></a><span class="ss">- </span>MDR - Ministério do Desenvolvimento Regional</span>
<span id="cb33-1845"><a href="#cb33-1845"></a><span class="ss">- </span>ANP – Agência Nacional do Petróleo, Gás Natural e Biocombustíveis</span>
<span id="cb33-1846"><a href="#cb33-1846"></a><span class="ss">- </span>BNDES – Banco Nacional de Desenvolvimento Econômico e Social</span>
<span id="cb33-1847"><a href="#cb33-1847"></a><span class="ss">- </span>INMETRO – Instituto Nacional de Metrologia, Qualidade e Tecnologia</span>
<span id="cb33-1848"><a href="#cb33-1848"></a></span>
<span id="cb33-1849"><a href="#cb33-1849"></a>:::</span>
</code><button title="Copiar para a área de transferência" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->



<script src="04-atendimento-lai-vs-decisoes_files/libs/quarto-html/zenscroll-min.js"></script>
</body></html>